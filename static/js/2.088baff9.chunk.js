(this["webpackJsonpnmr-displayer"]=this["webpackJsonpnmr-displayer"]||[]).push([[2],{200:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return f}));var a=n(67),r=n(7),i=n(0),o=n.n(i),c=Object(i.createContext)();function l(e,t){switch(t.type){case"SHOW":var n=Object(r.a)({},e,{highlights:Object(r.a)({},e.highlights)}),a=!0,i=!1,o=void 0;try{for(var c,l=t.payload[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var u=c.value;u in n.highlights?n.highlights[u]++:n.highlights[u]=1}}catch(h){i=!0,o=h}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}return n.highlighted=Object.keys(n.highlights),n;case"HIDE":var s=Object(r.a)({},e,{highlights:Object(r.a)({},e.highlights)}),f=!0,d=!1,p=void 0;try{for(var b,m=t.payload[Symbol.iterator]();!(f=(b=m.next()).done);f=!0){var g=b.value;g in s.highlights&&(s.highlights[g]--,0===s.highlights[g]&&delete s.highlights[g])}}catch(h){d=!0,p=h}finally{try{f||null==m.return||m.return()}finally{if(d)throw p}}return s.highlighted=Object.keys(s.highlights),s;default:throw new Error("unknown action type: ".concat(t.type))}}var u={highlights:{},highlighted:[]};function s(e){var t=Object(i.useReducer)(l,u),n=Object(a.a)(t,2),r=n[0],s=n[1],f=Object(i.useMemo)((function(){return{highlight:r,dispatch:s}}),[r]);return o.a.createElement(c.Provider,{value:f},e.children)}function f(e){if(!Array.isArray(e))throw new Error("highlights must be an array");var t=Object(i.useMemo)((function(){var t=[],n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;if("string"!==typeof c&&"number"!==typeof c)throw new Error("highlight key must be a string or number");""!==c&&t.push(String(c))}}catch(l){a=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return t}),[e]),n=Object(i.useContext)(c),a=Object(i.useMemo)((function(){return n.highlight.highlighted.some((function(e){return t.includes(e)}))}),[n.highlight.highlighted,t]),r=Object(i.useCallback)((function(){n.dispatch({type:"SHOW",payload:t})}),[n,t]),o=Object(i.useCallback)((function(){n.dispatch({type:"HIDE",payload:t})}),[n,t]);return{isActive:a,show:r,hide:o,onHover:{onMouseEnter:r,onMouseLeave:o}}}},285:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"id",(function(){return z})),n.d(a,"name",(function(){return V})),n.d(a,"apply",(function(){return H})),n.d(a,"isApplicable",(function(){return B})),n.d(a,"reduce",(function(){return Y}));var r={};n.r(r),n.d(r,"id",(function(){return K})),n.d(r,"name",(function(){return Z})),n.d(r,"baselineAlgorithms",(function(){return q})),n.d(r,"apply",(function(){return J})),n.d(r,"isApplicable",(function(){return $})),n.d(r,"reduce",(function(){return Q}));var i={};n.r(i),n.d(i,"id",(function(){return te})),n.d(i,"name",(function(){return ne})),n.d(i,"apply",(function(){return ae})),n.d(i,"isApplicable",(function(){return re})),n.d(i,"reduce",(function(){return ie}));var o={};n.r(o),n.d(o,"id",(function(){return oe})),n.d(o,"name",(function(){return ce})),n.d(o,"apply",(function(){return le})),n.d(o,"isApplicable",(function(){return ue})),n.d(o,"reduce",(function(){return se}));var c={};n.r(c),n.d(c,"id",(function(){return fe})),n.d(c,"name",(function(){return de})),n.d(c,"apply",(function(){return pe})),n.d(c,"isApplicable",(function(){return be})),n.d(c,"reduce",(function(){return me}));var l={};n.r(l),n.d(l,"id",(function(){return ge})),n.d(l,"name",(function(){return he})),n.d(l,"apply",(function(){return ve})),n.d(l,"isApplicable",(function(){return ye})),n.d(l,"reduce",(function(){return Oe}));var u={};n.r(u),n.d(u,"id",(function(){return xe})),n.d(u,"name",(function(){return je})),n.d(u,"apply",(function(){return ke})),n.d(u,"isApplicable",(function(){return Ee})),n.d(u,"reduce",(function(){return Ce}));var s={};n.r(s),n.d(s,"id",(function(){return we})),n.d(s,"name",(function(){return Se})),n.d(s,"apply",(function(){return Pe})),n.d(s,"isApplicable",(function(){return De})),n.d(s,"reduce",(function(){return Ie}));var f=n(176),d=n(7),p=n(67),b=n(175),m=n(214),g=n(0),h=n.n(g),v=n(405),y=n(705),O=n(706),x=n(198),j=n(408),k=(n(409),n(46)),E=n.n(k),C=n(69),w=n(33),S=n(34),P=n(227),D=n(250),I=n(251),T=n(207);function A(e){var t,n={dimension:0,nucleus:[],isFid:!1,isFt:!1,isComplex:!1};if(R(n,"title",e.TITLE),R(n,"solvent",e[".SOLVENTNAME"]),R(n,"pulse",e[".PULSESEQUENCE"]||e[".PULPROG"]||e.$PULPROG),R(n,"experiment",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===e&&(e={}),"string"===typeof e&&(e={pulse:e});var n=(Array.isArray(t.$SPECTYP)?t.$SPECTYP[0]:t.$SPECTYP||"").replace(/^<(.*)>$/,"$1").toLowerCase();if(n)return n;var a=e.pulse;return"string"!==typeof a?"":(a=a.toLowerCase()).includes("zg")?"1d":a.includes("hsqct")||a.includes("invi")&&(a.includes("ml")||a.includes("di"))?"hsqctocsy":a.includes("hsqc")||a.includes("invi")?"hsqc":a.includes("hmbc")||a.includes("inv4")&&a.includes("lp")?"hmbc":a.includes("cosy")?"cosy":a.includes("jres")?"jres":a.includes("tocsy")||a.includes("mlev")||a.includes("dipsi")?"tocsy":a.includes("noesy")?"noesy":a.includes("roesy")?"roesy":a.includes("dept")?"dept":a.includes("jmod")||a.includes("apt")?"aptjmod":""}(n,e)),R(n,"temperature",parseFloat(e.$TE||e[".TE"])),R(n,"frequency",parseFloat(e[".OBSERVEFREQUENCY"])),R(n,"type",e.DATATYPE),R(n,"probe",e.$PROBHD),R(n,"bf1",e.$BF1),R(n,"sfo1",e.$SFO1),R(n,"sw",e.$SW),R(n,"dspfvs",e.$DSPFVS),R(n,"decim",e.$DECIM),R(n,"grpdly",e.$GRPDLY),void 0!==e.$FNTYPE&&R(n,"acquisitionMode",parseInt(e.$FNTYPE,10)),R(n,"expno",parseInt(e.$EXPNO,10)),n.type&&(n.type.toUpperCase().indexOf("FID")>=0?n.isFid=!0:n.type.toUpperCase().indexOf("SPECTRUM")>=0&&(n.isFt=!0)),e[".NUCLEUS"]?n.nucleus=e[".NUCLEUS"].split(",").map((function(e){return e.trim()})):e[".OBSERVENUCLEUS"]?n.nucleus=[e[".OBSERVENUCLEUS"].replace(/[^A-Za-z0-9]/g,"")]:n.nucleus="string"!==typeof(t=n.experiment)?[]:(t=t.toLowerCase()).includes("jres")?["1H","Hz"]:t.includes("hmbc")||t.includes("hsqc")?["1H","13C"]:t.includes("cosy")||t.includes("tocsy")?["1H","1H"]:[],n.dimension=n.nucleus.length,e.SYMBOL){var a=e.SYMBOL.split(/[, ]+/);a.includes("R")&&a.includes("I")&&(n.isComplex=!0)}return e.$DATE&&(n.date=new Date(1e3*e.$DATE).toISOString()),n}function R(e,t,n){void 0!==n&&("string"===typeof n?(n.startsWith("<")&&n.endsWith(">")&&(n=n.substring(1,n.length-2)),e[t]=n.trim()):e[t]=n)}var F=n(211),L=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var a=0;a<e.length;a++){var r=e.charAt(a),i=r.charCodeAt(0);if(255!==t[i])throw new TypeError("".concat(r," is ambiguous"));t[i]=a}var o=e.length,c=e.charAt(0),l=Math.log(256)/Math.log(o);return{encode:function(t){if(0===t.length)return"";for(var n=0,a=0,r=0,i=t.length;r!==i&&0===t[r];)r++,n++;for(var u=(i-r)*l+1>>>0,s=new Uint8Array(u);r!==i;){for(var f=t[r],d=0,p=u-1;(0!==f||d<a)&&-1!==p;p--,d++)f+=256*s[p]>>>0,s[p]=f%o>>>0,f=f/o>>>0;if(0!==f)throw new Error("Non-zero carry");a=d,r++}for(var b=u-a;b!==u&&0===s[b];)b++;for(var m=c.repeat(n);b<u;++b)m+=e.charAt(s[b]);return m}}}("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),N=new Uint8Array(8);function _(){for(var e=0;e<8;e++)N[e]=Math.floor(256*Math.random());return L.encode(N).substring(0,8)}var M=n(382);var z="absolute",V="absolute";function H(e){if(!B(e))throw new Error("absolute not applicable on this data");e.data.re=T.a.absolute(e.data),e.data.im=new Float64Array(0),e.info.isComplex=!1}function B(e){return!(!e.info.isComplex||e.info.isFid)}function Y(){return{once:!1,reduce:null}}var G=n(699),U=n(504),X=n(383),W=n(696),K="baselineCorrection",Z="baseline correction",q={airpls:"airPLS",polynomial:"Polynomial"};function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!$(e))throw new Error("baselineCorrection not applicable on this data");var n,a=t.algorithm,r=t.zones,i=e.data,o=i.x,c=i.re;switch(a){case"airpls":n=Object(G.a)(o,c,t).corrected;break;case"polynomial":var l=Object(W.a)({x:o,y:c},{numberOfPoints:4096,zones:r});if(0===r.length){var u=Object(U.a)(l.x,l.y,t),s=u.regression;n=new Float64Array(o.length);for(var f=0;f<c.length;f++)n[f]=c[f]-s.predict(o[f])}else{var d=new X.a(o,c,t.degree);n=new Float64Array(o.length);for(var p=0;p<c.length;p++)n[p]=c[p]-d.predict(o[p])}break;default:throw new Error("baselineCorrection: algorithm unknown: ".concat(a))}Object.assign(e.data,{re:n})}function $(e){return!e.info.isFid}function Q(){return{once:!1,reduce:null}}var ee=n(261),te="fft",ne="FFT";function ae(e){if(!re(e))throw new Error("fft not applicable on this data");var t=new Float64Array(e.data.re),n=new Float64Array(e.data.im),a=t.length;ee.FFT.init(a),ee.FFT.fft(t,n);var r=new Float64Array(t),i=new Float64Array(n);r.set(t.slice(0,(a+1)/2),(a+1)/2),r.set(t.slice((a+1)/2)),i.set(n.slice(0,(a+1)/2),(a+1)/2),i.set(n.slice((a+1)/2)),e.data.re=r,e.data.im=i,e.data.x=function(e){var t=e.info,n=parseFloat(t.bf1),a=parseFloat(t.sfo1),r=parseFloat(t.sw),i=(a-n)/n*1e6,o=.5*r*a/n,c=e.data.x.length,l=i-o;o=2*o/(c-1);for(var u=new Array(c),s=0;s<c;s++)u[s]=l,l+=o;return u}(e),e.info=Object(d.a)({},e.info,{isFid:!1})}function re(e){return!(!e.info.isComplex||!e.info.isFid)}function ie(){return{once:!0,reduce:void 0}}var oe="lineBroadening",ce="line broadening";function le(e,t){if(!ue(e))throw new Error("lineBroadening not applicable on this data");for(var n=e.data.re,a=e.data.im,r=e.data.x,i=n.length,o=new Float64Array(i),c=new Float64Array(i),l=(r[i-1]-r[0])/(i-1),u=-t*Math.exp(1),s=Math.exp(u*l),f=Math.exp(u*r[0]),p=0;p<i;p++)o[p]=n[p]*f,c[p]=a[p]*f,f*=s;e.data=Object(d.a)({},e.data,{},{re:o,im:c})}function ue(e){return!(!e.info.isComplex||!e.info.isFid)}function se(e,t){return{once:!0,reduce:e+t}}var fe="phaseCorrection",de="phase correction";function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!be(e))throw new Error("phaseCorrection not applicable on this data");var n=t.ph0,a=t.ph1;n*=Math.PI/180,a*=Math.PI/180,Object.assign(e.data,T.a.phaseCorrection(e.data,n,a))}function be(e){return!(!e.info.isComplex||e.info.isFid)}function me(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var ge="shiftX",he="shift X";function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.x=e.data.x.map((function(e){return e+t}))}function ye(){return!0}function Oe(){return{once:!1,reduce:null}}var xe="zeroFilling",je="Zero Filling";function ke(e,t){if(!Ee(e))throw new Error("zeroFilling not applicable on this data");for(var n=e.data,a=n.re,r=n.im,i=n.x,o=new Float64Array(t),c=new Float64Array(t),l=new Float64Array(t),u=Math.min(t,a.length),s=0;s<u;s++)o[s]=a[s],c[s]=r[s],l[s]=i[s];for(var f=i[1]-i[0],p=i[u-1],b=u;b<l.length;b++)p+=f,l[b]=p;e.data=Object(d.a)({},e.data,{},{re:o,im:c,x:l})}function Ee(e){return!(!e.info.isComplex||!e.info.isFid)}function Ce(e,t){return{once:!0,reduce:e+t}}var we="digitalFilter",Se="Digital Filter";function Pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!De(e))throw new Error("Digital Filter is not applicable on this data");var n,a=t.grpdly,r=void 0===a?0:a,i=t.dspfvs,o=t.decim,c=new Float64Array(e.data.re),l=new Float64Array(e.data.im);if(r>0)n=r;else if(i>14)n=0;else{if(!Te[i])throw new Error("dspfvs not in lookup table");var u=Te[i];if(!u[o])throw new Error("decim not in lookup table");n=u[o]}var s=Math.floor(n+2),f=Math.floor(Math.max(s-6,0)),d=new Float64Array(c.length),p=new Float64Array(l.length);d.set(c.slice(s)),d.set(c.slice(s-f,s),c.length-s),p.set(l.slice(s)),p.set(l.slice(s-f,s),l.length-s),e.data.re=d,e.data.im=p}function De(e){return!(!e.info.isComplex||!e.info.isFid)}function Ie(){return{once:!0,reduce:void 0}}var Te={10:{2:44.75,3:33.5,4:66.625,6:59.083333333333336,8:68.5625,12:60.375,16:69.53125,24:61.020833333333336,32:70.015625,48:61.34375,64:70.2578125,96:61.505208333333336,128:70.37890625,192:61.5859375,256:70.439453125,384:61.626302083333336,512:70.4697265625,768:61.646484375,1024:70.48486328125,1536:61.656575520833336,2048:70.492431640625},11:{2:46,3:36.5,4:48,6:50.166666666666664,8:53.25,12:69.5,16:72.25,24:70.16666666666667,32:72.75,48:70.5,64:73,96:70.66666666666667,128:72.5,192:71.33333333333333,256:72.25,384:71.66666666666667,512:72.125,768:71.83333333333333,1024:72.0625,1536:71.91666666666667,2048:72.03125},12:{2:46,3:36.5,4:48,6:50.166666666666664,8:53.25,12:69.5,16:71.625,24:70.16666666666667,32:72.125,48:70.5,64:72.375,96:70.66666666666667,128:72.5,192:71.33333333333333,256:72.25,384:71.66666666666667,512:72.125,768:71.83333333333333,1024:72.0625,1536:71.91666666666667,2048:72.03125},13:{2:2.75,3:2.8333333333333335,4:2.875,6:2.9166666666666665,8:2.9375,12:2.9583333333333335,16:2.96875,24:2.9791666666666665,32:2.984375,48:2.9895833333333335,64:2.9921875,96:2.9947916666666665}},Ae={absolute:a,baselineCorrection:r,lineBroadening:o,fft:i,phaseCorrection:c,shiftX:l,zeroFilling:u,digitalFilter:s},Re=function(){function e(){Object(w.a)(this,e)}return Object(S.a)(e,null,[{key:"applyFilter",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!1,r=!0,i=!1,o=void 0;try{for(var c,l=n[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var u=c.value,s={name:u.name,label:Ae[u.name].name,value:u.options},f=e.lookupForFilter(t,u.name);if(f){var d=Ae[u.name].reduce(f.value,s.value);d.once?(a||(a=!0),null!=d.reduce&&void 0!==d.reduce&&e.replaceFilter(t,f.id,d.reduce)):e.addFilter(t,s,!Object.prototype.hasOwnProperty.call(u,"isDeleteAllow")||u.isDeleteAllow)}else e.addFilter(t,s,!Object.prototype.hasOwnProperty.call(u,"isDeleteAllow")||u.isDeleteAllow)}}catch(y){i=!0,o=y}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}if(a)1===n.length&&e.isLastFilter(t,n[0].name)?Ae[n[0].name].apply(t,n[0].options):e.reapplyFilters(t);else{var p=!0,b=!1,m=void 0;try{for(var g,h=n[Symbol.iterator]();!(p=(g=h.next()).done);p=!0){var v=g.value;Ae[v.name].apply(t,v.options)}}catch(y){b=!0,m=y}finally{try{p||null==h.return||h.return()}finally{if(b)throw m}}}}},{key:"isLastFilter",value:function(e,t){var n=e.filters.findIndex((function(e){return e.name===t}));return e.filters.length===n+1}},{key:"lookupForFilter",value:function(e,t){return e.filters.find((function(e){return e.name===t}))}},{key:"reapplyFilters",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=e.filters[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value,c=o.id,l=o.flag;this.enableFilter(e,c,l)}}catch(u){n=!0,a=u}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}},{key:"enableFilter",value:function(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));for(var r in e.filters[a]=Object(d.a)({},e.filters[a],{flag:n}),e.data=Object(d.a)({},e.data,{},e.source.original),e.info=Object(d.a)({},e.info,{},e.originalInfo),e.filters){var i=e.filters[r];if(e.filters[r]=Object(d.a)({},e.filters[r],{error:null}),i.flag)try{Ae[i.name].apply(e,i.value)}catch(o){e.filters[r]=Object(d.a)({},e.filters[r],{error:o.message})}}}},{key:"deleteFilter",value:function(e,t){for(var n in e.filters=e.filters.slice(0),e.filters=e.filters.filter((function(e){return e.id!==t})),e.data=Object(d.a)({},e.data,{},e.source.original),e.info=Object(d.a)({},e.info,{},e.originalInfo),e.filters){var a=e.filters[n];if(e.filters[n]=Object(d.a)({},e.filters[n],{error:null}),a.flag)try{Ae[a.name].apply(e,a.value)}catch(r){e.filters[n]=Object(d.a)({},e.filters[n],{error:r.message})}}}},{key:"addFilter",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=_();e.filters=e.filters.slice(0),e.filters.push(Object(d.a)({},t,{id:a,flag:!0,isDeleteAllow:n}))}},{key:"replaceFilter",value:function(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));e.filters[a]=Object(d.a)({},e.filters[a],{value:n})}}]),e}(),Fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(w.a)(this,e),this.id=t.id||_(),this.source=Object.assign({jcamp:null,jcampURL:null,original:[]},t.source),this.display=Object.assign({name:t.display&&t.display.name?t.display.name:_(),color:"black",isVisible:!0,isPeaksMarkersVisible:!0,isRealSpectrumVisible:!0,isVisibleInDomain:!0},t.display),this.info=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1},t.info),this.originalInfo=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1},t.info),this.meta=Object.assign({},t.meta),this.data=Object.assign({x:[],re:[],im:[]},t.data),this.peaks=Object.assign({values:[],options:{}},t.peaks),this.integrals=Object.assign({values:[],options:{}},t.integrals),this.filters=Object.assign([],t.filters),this.ranges=Object.assign({values:[],options:{}},t.ranges),this.preprocessing(),Re.reapplyFilters(this)}return Object(S.a)(e,[{key:"preprocessing",value:function(){this.info.isFid&&this.applyFilter([{name:Ae.digitalFilter.id,options:{dspfvs:this.info.dspfvs,decim:this.info.decim,grpdly:this.info.grpdly},isDeleteAllow:!1}])}},{key:"setIsRealSpectrumVisible",value:function(e){this.isRealSpectrumVisible=e}},{key:"setPeaks",value:function(e){this.peaks=e}},{key:"getPeaks",value:function(){return this.peaks}},{key:"setRanges",value:function(e){this.ranges=e}},{key:"getRanges",value:function(){return this.ranges}},{key:"addIntegral",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.integrals=Object.assign({},this.integrals),this.integrals.values=this.integrals.values.slice(),this.integrals.values.push({id:_(),from:e[0],to:e[1],value:this.getIntegration(e[0],e[1]),relative:0,kind:"signal"}),this.updateRelativeIntegrals()}},{key:"getIntegration",value:function(e,t){return T.c.integration({x:this.data.x,y:this.data.re},{from:e,to:t,reverse:!0})}},{key:"changeIntegralSum",value:function(e){this.integrals=Object.assign({},this.integrals),this.integrals.options=Object(d.a)({},this.integrals.options,{sum:e}),this.updateRelativeIntegrals()}},{key:"updateRelativeIntegrals",value:function(){var e=this.integrals.options.sum||100;this.integrals=Object.assign({},this.integrals),this.integrals.values=this.integrals.values.slice();var t=e/this.integrals.values.reduce((function(e,t){return e+t.value}),0);this.integrals.values=this.integrals.values.map((function(e){var n=e.value*t;return Object(d.a)({},e,{relative:n})}))}},{key:"changeIntegral",value:function(e){this.integrals=Object.assign({},this.integrals),this.integrals.values=this.integrals.values.slice();var t=this.integrals.values.findIndex((function(t){return t.id===e.id}));-1!==t&&(this.integrals.values[t]=Object(d.a)({},this.integrals.values[t],{},e,{},{value:this.getIntegration(e.from,e.to)}),this.updateRelativeIntegrals())}},{key:"getIntegrals",value:function(){return this.integrals}},{key:"getInfo",value:function(){return this.info}},{key:"baseline",value:function(){}},{key:"applyAutoPeakPicking",value:function(e){this.peaks=Object.assign({},this.peaks),this.peaks.values=this.peaks.values.slice();var t=function(e,t){var n=t.minMaxRatio,a=t.maxNumberOfPeaks,r=e.data.re.map((function(e){return Math.abs(e)})).sort()[Math.floor(e.data.re.length/2)],i=M.a.fromXY(e.data.x,e.data.re).createPeaks({noiseLevel:3*r,minMaxRatio:n,realTopDetection:!0,maxCriteria:!0,smoothY:!1,sgOptions:{windowSize:7,polynomial:3}});return i.sort((function(e,t){return t.y-e.y})),a&&(i=i.slice(0,a)),i.map((function(t){return{id:_(),xIndex:t.index,intensity:t.y,width:t.width,xShift:e.data.x[t.index]-t.x}}))}(this,e);return this.peaks.values=t,this.peaks}},{key:"detectRanges",value:function(e){var t=function(e,t){var n=t.minMaxRatio,a=void 0===n?.1:n,r=t.nH,i=void 0===r?100:r,o=t.compile,c=void 0===o||o,l=t.frequencyCluster,u=void 0===l?16:l,s=t.clean,f=void 0===s?null:s,d=t.keepPeaks,p=void 0===d||d,b=e.data.re.map((function(e){return Math.abs(e)})).sort()[Math.floor(e.data.re.length/2)];return M.a.fromXY(e.data.x,e.data.re).createRanges({noiseLevel:3*b,minMaxRatio:a,realTopDetection:!0,maxCriteria:!0,smoothY:!1,nH:i,compile:c,frequencyCluster:u,clean:f,keepPeaks:p,sgOptions:{windowSize:7,polynomial:3}})}(this,e);return this.ranges.values=t.map((function(e){return Object(d.a)({id:_()},e)})),this.ranges}},{key:"deletePeak",value:function(e){this.peaks=Object.assign({},this.peaks),this.peaks.values=this.peaks.values.slice(),this.peaks.values=null==e?[]:this.peaks.values.filter((function(t){return t.xIndex!==e.xIndex}))}},{key:"deleteRange",value:function(e){this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice(),this.ranges.values=null==e?[]:this.ranges.values.filter((function(t){return t.id!==e}))}},{key:"deleteIntegral",value:function(e){this.integrals=Object.assign({},this.integrals),this.integrals.values=this.integrals.values.slice(),this.integrals.values=null==e?[]:this.integrals.values.filter((function(t){return t.id!==e}))}},{key:"applyFilter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Re.applyFilter(this,e)}},{key:"enableFilter",value:function(e,t){Re.enableFilter(this,e,t)}},{key:"deleteFilter",value:function(e){Re.deleteFilter(this,e)}},{key:"getReal",value:function(){return{x:this.data.x,y:this.data.re}}},{key:"getImaginary",value:function(){return{x:this.data.x,y:this.data.im}}},{key:"lookupPeak",value:function(e,t){var n=this.data.x.findIndex((function(t){return t>=e})),a=this.data.x.findIndex((function(e){return e>=t}))-1;n>a&&(a=n=a);var r=this.data.re.slice(n,a);if(r&&r.length>0){var i=Object(F.a)(r),o=r.findIndex((function(e){return e===i}));return{x:this.data.x[n+o],y:i,xIndex:n+o}}return null}},{key:"checkPeakIsExists",value:function(e){return!!this.peaks.values.map((function(e){return e.xIndex})).includes(e.xIndex)}},{key:"addPeak",value:function(e){this.peaks=Object.assign({},this.peaks),this.peaks.values=this.peaks.values.slice(),this.checkPeakIsExists(e)||this.peaks.values.push(Object(d.a)({id:_()},e))}},{key:"addPeaks",value:function(e,t){if(e!==t){this.peaks=Object.assign({},this.peaks),this.peaks.values=this.peaks.values.slice();var n=this.lookupPeak(e,t);n&&!this.checkPeakIsExists(n)&&(this.peaks.values=this.peaks.values.concat(Object(d.a)({id:_()},n)))}return this.peaks}},{key:"addFilter",value:function(e){Re.addFilter(this,e)}},{key:"getFilters",value:function(){return this.filters}},{key:"toJSON",value:function(){return{data:this.data,id:this.id,source:{jcamp:this.source.jcamp,jcampURL:this.source.jcampURL,original:this.source.jcampURL||this.source.jcamp?[]:this.source.original},display:this.display,info:this.originalInfo,meta:this.meta,peaks:this.peaks,integrals:this.integrals,ranges:this.ranges,filters:this.filters}}}]),e}(),Le=function e(){Object(w.a)(this,e)};function Ne(e){var t=e[0]&&e[0].data&&e[0].data[0]&&e[0].data[0].x?e[0].data[0].x:[],n=e[0]&&e[0].data&&e[0].data[0]&&e[0].data[0].y?e[0].data[0].y:[],a=e[1]&&e[1].data&&e[1].data[0]&&e[1].data[0].y?e[1].data[0].y:new Array(n.length);return a?T.b.sortX({x:t,re:n,im:a}):T.c.sortX({x:t,re:n})}Le.fromBruker=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Ne(e.spectra),r=new Fe(Object(d.a)({},n,{info:t,meta:e.info,data:a}));return console.log(r),r},Le.fromJcamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(D.convert)(e,{xy:!0,keepRecordsRegExp:/.*/}),a=Ne(n.spectra),r=A(n.info);Array.isArray(r.nucleus)&&(r.nucleus=r.nucleus[0]);var i=new Fe(Object(d.a)({},t,{info:r,meta:n.info,data:a,source:{jcamp:null,jcampURL:t.source&&t.source.jcampURL?t.source.jcampURL:null,original:a}}));return console.log(i),i};var _e=n(698),Me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(w.a)(this,e),this.id=t.id||_(),this.source=Object.assign({jcamp:null,jcampURL:null,original:[]},t.source),this.display=Object.assign({name:t.display.name||_(),positiveColor:"red",negativeColor:"blue",isVisible:!0},t.display),this.info=Object.assign({nucleus:["1H","1H"],isFid:!1,isComplex:!1},t.info),this.originalInfo=Object.assign({nucleus:["1H","1H"],isFid:!1,isComplex:!1},t.info),this.meta=Object.assign({},t.meta),this.data=Object.assign({z:[],minX:0,minY:0,maxX:0,maxY:0},t.data)}return Object(S.a)(e,[{key:"getContourLines",value:function(){return new _e.a(this.data.z).drawContour({contourDrawer:"basic",nbLevels:10,timeout:1e4})}},{key:"toJSON",value:function(){return{data:this.data,id:this.id,source:{jcamp:this.source.jcamp,jcampURL:this.source.jcampURL,original:this.source.jcampURL?[]:this.source.original},display:this.display,info:this.originalInfo,meta:this.meta}}}]),e}(),ze=function e(){Object(w.a)(this,e)};function Ve(e,t,n){return fetch(t).then((function(e){return e.text()})).then((function(t){He(e,t,n)}))}function He(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(D.createTree)(t);if(0!==a.length){var r=a[0];if(r.jcamp&&Ge(e,r.jcamp,n),r.children){var i=!0,o=!1,c=void 0;try{for(var l,u=r.children[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var s=l.value;s.jcamp&&Ge(e,s.jcamp,n)}}catch(f){o=!0,c=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw c}}}}}function Be(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(C.a)(E.a.mark((function e(t){var n,a,r,i,o,c,l,u,s=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=s.length>1&&void 0!==s[1]?s[1]:[],a=[],r=!0,i=!1,o=void 0,e.prev=5,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)null!=(u=l.value).source.jcamp?He(t,u.source.jcamp,u):null!=u.source.jcampURL?a.push(Ve(t,u.source.jcampURL,u)):t.push(new Fe(Object(d.a)({},u,{data:u.source.original})));e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),i=!0,o=e.t0;case 13:e.prev=13,e.prev=14,r||null==c.return||c.return();case 16:if(e.prev=16,!i){e.next=19;break}throw o;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return e.next=23,Promise.all(a);case 23:case"end":return e.stop()}}),e,null,[[5,9,13,21],[14,,16,20]])})))).apply(this,arguments)}function Ge(e,t,n){var a=A(Object(D.convert)(t,{withoutXY:!0,keepRecordsRegExp:/.*/}).info);1===a.dimension&&e.push(Le.fromJcamp(t,n)),2===a.dimension&&e.push(ze.fromJcamp(t,n))}function Ue(e,t){var n=t.acqus,a=t.procs,r=t.content,i=Object(I.convertFolder)({acqus:n,procs:a,"1r":r},{xy:!0}),o=A(i.info);e.push(Le.fromBruker(i,o))}ze.fromJcamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(D.convert)(e,{noContour:!0,xy:!0,keepRecordsRegExp:/.*/}),a=n.minMax,r=A(n.info),i=new Me(Object(d.a)({},t,{info:r,meta:n.info,data:a,source:{jcamp:null,jcampURL:t.source&&t.source.jcampURL?t.source.jcampURL:null,original:a}}));return i};var Xe=n(297),We=n(505),Ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(w.a)(this,e),this.key=t.key||_(),this.molfile=t.molfile||"";var n=new P.Molecule.fromMolfile(this.molfile),a=n.getMolecularFormula();this.mf=a.formula,this.em=a.absoluteWeight,this.mw=a.relativeWeight,this.svg=n.toSVG(50,50);var r=new We.MF(this.mf);this.atoms=r.getInfo().atoms}return Object(S.a)(e,[{key:"toJSON",value:function(){return{molfile:this.molfile}}}]),e}(),Ze=function e(){Object(w.a)(this,e)};Ze.fromJSON=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++){var a=P.Molecule.fromMolfile(e[n].molfile),r=a.getFragments(),i=!0,o=!1,c=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var s=l.value;t.push(new Ke({molfile:s.toMolfileV3()}))}}catch(f){o=!0,c=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw c}}}return t};var qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;Object(w.a)(this,e),this.spectra=[],this.molecules=[],this.spectra=t.slice(),this.molecules=n.slice(),this.preferences=a||{}}return Object(S.a)(e,[{key:"fromZip",value:function(){var e=Object(C.a)(E.a.mark((function e(t){var n,a,r,i,o,c,l,u=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Xe,a=!0,r=!1,i=void 0,e.prev=4,o=E.a.mark((function e(){var t,a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.value,e.next=3,n.loadAsync(t.binary);case 3:return a=e.sent,r=Object.keys(a.files).filter((function(e){return e.endsWith("1/1r")})),e.next=7,Promise.all(r.map(function(){var e=Object(C.a)(E.a.mark((function e(t){var n,r,i,o,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.replace(/1r$/,"procs"),r=t.replace(/pdata\/1\/1r$/,"acqus"),e.next=4,a.file(n).async("text");case 4:return i=e.sent,e.next=7,a.file(r).async("text");case 7:return o=e.sent,e.next=10,a.file(t).async("arraybuffer");case 10:c=e.sent,Ue(u.spectra,{procs:i,acqus:o,content:c});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:r=e.sent;case 8:case"end":return e.stop()}}),e)})),c=t[Symbol.iterator]();case 7:if(a=(l=c.next()).done){e.next=12;break}return e.delegateYield(o(),"t0",9);case 9:a=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),r=!0,i=e.t1;case 18:e.prev=18,e.prev=19,a||null==c.return||c.return();case 21:if(e.prev=21,!r){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,null,[[4,14,18,26],[19,,21,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addJcampFromURL",value:function(){var e=Object(C.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ve(this.spectra,t,n);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addJcamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};He(this.spectra,e,t)}},{key:"addMolfileFromURL",value:function(){var e=Object(C.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.text()}));case 2:n=e.sent,this.addMolfile(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMolecules",value:function(){return this.molecules}},{key:"getPreferences",value:function(){return this.preferences}},{key:"removeMolecule",value:function(e){this.molecules=this.molecules.filter((function(t){return t.key!==e}))}},{key:"addMolfile",value:function(e){var t=P.Molecule.fromMolfile(e).getFragments();this.molecules=Object.assign([],this.molecules);var n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;this.molecules.push(new Ke({molfile:c.toMolfileV3(),svg:c.toSVG(150,150),mf:c.getMolecularFormula().formula,em:c.getMolecularFormula().absoluteWeight,mw:c.getMolecularFormula().relativeWeight}))}}catch(l){a=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}}},{key:"setMolecules",value:function(e){this.molecules=e}},{key:"setMolfile",value:function(e,t){var n=P.Molecule.fromMolfile(e).getFragments();this.molecules=this.molecules.filter((function(e){return e.key!==t}));var a=!0,r=!1,i=void 0;try{for(var o,c=n[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value;this.molecules.push(new Ke({molfile:l.toMolfileV3(),svg:l.toSVG(150,150),mf:l.getMolecularFormula().formula,em:l.getMolecularFormula().absoluteWeight,mw:l.getMolecularFormula().relativeWeight}))}}catch(u){r=!0,i=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return this.molecules}},{key:"toJSON",value:function(){return{spectra:this.spectra.map((function(e){return Object(d.a)({},e.toJSON(),{data:{}})})),molecules:this.molecules.map((function(e){return e.toJSON()})),preferences:this.preferences}}},{key:"setPreferences",value:function(e){this.preferences=Object(d.a)({},this.preferences,{},e)}},{key:"pushDatum",value:function(e){this.spectra.push(e)}},{key:"getDatum",value:function(e){return this.spectra.find((function(t){return t.id===e}))}},{key:"getSpectraData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.spectra?this.spectra.map((function(t){return{id:t.id,x:t.data.x,y:e?t.data.re:t.data.im,im:t.data.im,name:t.display.name,color:t.display.color,isVisible:t.display.isVisible,isPeaksMarkersVisible:t.display.isPeaksMarkersVisible,isRealSpectrumVisible:t.display.isRealSpectrumVisible,isVisibleInDomain:t.display.isVisibleInDomain,info:t.info,meta:t.meta,peaks:t.peaks,integrals:t.integrals,filters:t.filters}})):[]}},{key:"deleteDatumByIDs",value:function(e){var t=this.spectra.filter((function(t){return!e.includes(t.id)}));this.spectra=t.length>0?t:[]}}],[{key:"build",value:function(){var t=Object(C.a)(E.a.mark((function t(){var n,a,r,i=arguments;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},a=n.molecules?Ze.fromJSON(n.molecules):[],r=new e([],a,n.preferences),t.next=5,Be(r.spectra,n.spectra);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),e}(),Je=n(200),$e=h.a.createContext(),Qe=$e.Provider;function et(){return Object(g.useContext)($e)}var tt=n(70),nt=n(208),at=n(519),rt=["#FFB300","#803E75","#FF6800","#A6BDD7","#C10020","#CEA262","#817066","#007D34","#F6768E","#00538A","#FF7A5C","#53377A","#FF8E00","#B32851","#F4C800","#7F180D","#93AA00","#593315","#F13A13","#232C16"],it=function(e){var t=rt.filter((function(t){return!e.includes(t)}));if(t.length>0)return t[0];var n=String("#".concat(Math.random().toString(16).slice(2,8).toUpperCase())).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var a,r,i="#";for(r=0;r<3;r++)a=parseInt(n.substr(2*r,2),16),a=Math.round(Math.min(Math.max(0,a+-.25*a),255)).toString(16),i+="00".concat(a).substr(a.length);return i},ot={zoom:{id:"zoom",label:"Zoom",hasOptionPanel:!1,isFilter:!1},peakPicking:{id:"peakPicking",label:"Peak Tool",hasOptionPanel:!0,isFilter:!1},integral:{id:"integral",label:"integral Tool",hasOptionPanel:!1,isFilter:!1},HMove:{id:"HMove",label:"move spectrum horizontal",hasOptionPanel:!1,isFilter:!1},equalizerTool:{id:"equalizerTool",label:"Equalizer Tool",hasOptionPanel:!1,isFilter:!1},autoRangesPicking:{id:"autoRangesPicking",label:"Auto Ranges Picking",hasOptionPanel:!0,isFilter:!1},zeroFilling:{id:Ae.zeroFilling.id,label:Ae.zeroFilling.name,hasOptionPanel:!0,isFilter:!0},phaseCorrection:{id:Ae.phaseCorrection.id,label:Ae.phaseCorrection.name,hasOptionPanel:!0,isFilter:!0},baseLineCorrection:{id:"baseLineCorrection",label:"baseline correction",hasOptionPanel:!0,isFilter:!0}},ct=n(520);function lt(e){return ut.apply(this,arguments)}function ut(){return(ut=Object(C.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=dt(t),a=n.blob;Object(ct.saveAs)(a,"".concat(e,".svg"))}function ft(e){var t=dt(e),n=t.blob,a=t.width,r=t.height;try{var i=document.createElement("canvas");i.width=a,i.height=r;var o=i.getContext("2d");o.fillStyle="white",o.fillRect(0,0,i.width,i.height);var c=new Image,l=URL.createObjectURL(n);c.onload=Object(C.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.drawImage(c,0,0),t=i.toDataURL("image/png",1),i.toBlob((function(e){var t=new ClipboardItem(Object(tt.a)({},e.type,e));navigator.clipboard.write([t]).then((function(){console.log("experiment copied.")}),(function(e){console.log(e)}))})),URL.revokeObjectURL(t);case 4:case"end":return e.stop()}}),e)}))),c.src=l}catch(u){u instanceof ReferenceError&&alert("Your browser does not support this feature, please use Google Chrome"),console.log(u)}}function dt(e){var t=document.getElementById(e).cloneNode(!0),n=t.getAttribute("width").replace("px",""),a=t.getAttribute("height").replace("px","");t.querySelectorAll('[data-no-export="true"]').forEach((function(e){return e.remove()}));var r="<svg  viewBox='0 0 ".concat(n," ").concat(a,"' width=\"").concat(n,'"  height="').concat(a,'"  version="1.1" xmlns="http://www.w3.org/2000/svg">'),i="".concat(r+"<style>.grid line,.grid path{stroke:none;} .regular-text{fill:black} .x path{stroke-width:1px} .x text{\n    font-size: 12px;\n    font-weight: bold;\n  } </style>"+t.innerHTML,"</svg>");return{blob:new Blob([i],{type:"image/svg+xml"}),width:n,height:a}}var pt=function(e){return function(t){return t.reduce((function(t,n){var a=n.info[e];return t[a]=(t[a]||[]).concat(n),t}),{})}},bt=new qe;function mt(e){var t=[],n=[],a={};try{t=e.reduce((function(e,t){return t.isVisibleInDomain?e.concat([t.x[0],t.x[t.x.length-1]]):e.concat([])}),[]),a={},n=e.reduce((function(e,t){if(t.isVisibleInDomain){var n=m.c(t.y);return a[t.id]=n,e.concat(n)}return e.concat([])}),[])}catch(r){console.log(r)}return{x:m.c(t),y:m.c(n),yDomains:a}}var gt=function(e){var t=e.xDomain,n=e.yDomain,a=e.width,r=e.height,i=e.margin,o="RTL"===e.mode?[a-i.right,i.left]:[i.left,a-i.right];return{x:m.e(t,o),y:m.e(n,[r-i.bottom,i.top])}};function ht(e,t,n){if(e&&e.length>0)if(e[0].info.isFid&&!e.some((function(e){return!1===e.info.isFid}))){var a=n/2;t.verticalAlign.flag=!0,t.verticalAlign.value=a,t.verticalAlign.stacked=!1}else t.verticalAlign.flag=!1,t.verticalAlign.value=20,t.verticalAlign.stacked=!1}var vt=function(e,t,n){var a=n.center,r=e.height;if(a){var i=r/2;t.verticalAlign.flag=!0,t.verticalAlign.value=i,t.verticalAlign.stacked=!1,bt.setPreferences({display:{center:!0}})}else t.verticalAlign.flag=!1,t.verticalAlign.value=20,t.verticalAlign.stacked=!1,bt.setPreferences({display:{center:!1}})},yt=function(e,t){var n=t.exportType,a=e.data;if(a.length>0){var r=a[0].name;switch(n){case"json":!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"experiment",n=JSON.stringify(e,void 0,2),a=new Blob([n],{type:"text/plain"});Object(ct.saveAs)(a,"".concat(t,".nmrium"))}(bt.toJSON(),r);break;case"svg":st(r,"nmrSVG");break;case"png":!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=dt(t),a=n.blob,r=n.width,i=n.height;try{var o=document.createElement("canvas");o.width=r,o.height=i;var c=o.getContext("2d");c.fillStyle="white",c.fillRect(0,0,o.width,o.height);var l=new Image,u=URL.createObjectURL(a);l.onload=Object(C.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.drawImage(l,0,0),n=o.toDataURL("image/png",1),Object(ct.saveAs)(n,"".concat(e,".png")),URL.revokeObjectURL(n);case 4:case"end":return t.stop()}}),t)}))),l.src=u}catch(s){console.log(s)}}(r,"nmrSVG");break;case"copy":ft("nmrSVG")}}return e},Ot=function(e,t){return Object(at.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum.id,r=e.data.findIndex((function(e){return e.id===a})),i=function(e,t,n){var a=gt(n),r=n.activeSpectrum,i=a.x.invert(t.x-e),o=a.x.invert(t.x+e),c=[];return i>o?(c[0]=o,c[1]=i):(c[0]=i,c[1]=o),bt.getDatum(r.id).lookupPeak(c[0],c[1])}(10,t,e);if(-1!==r){var o={xIndex:i.xIndex};bt.getDatum(a).addPeak(o),n.data[r].peaks=bt.getDatum(a).getPeaks()}}}))},xt=function(e,t,n){if(n.activeSpectrum){var a=e.height,r=e.margin;if(n.originIntegralYDomain){var i=m.e(n.originIntegralYDomain,[a-r.bottom,r.top]),o=m.g.translate(0,a-r.bottom).scale(t.scale).translate(0,-(a-r.bottom)).rescaleY(i).domain();n.integralZoomFactor=t;var c=n.activeSpectrum;n.integralsYDomains[c.id]=o}}};function jt(e,t,n){var a=t.getReal(),r=e.data.findIndex((function(e){return e.id===n}));e.selectedOptionPanel=null,e.selectedTool=ot.zoom.id,e.data[r].x=a.x,e.data[r].y=a.y,e.data[r].filters=t.getFilters(),e.data[r].info=t.getInfo()}var kt=function(e,t){return Object(at.a)(e,(function(n){t?(n.selectedTool=t,ot[t].hasOptionPanel?n.selectedOptionPanel=t:n.selectedOptionPanel=null,ot[t].isFilter&&function(e,t,n){if(e.tempData=t.data,n===Ae.phaseCorrection.id){var a=function(e){var t=e.activeSpectrum,n=e.data,a=t.id,r=n.find((function(e){return e.id===a})),i=Object(F.a)(r.y),o=r.y.findIndex((function(e){return e===i}));return{xValue:r.x[o],yValue:i,index:o}}(t).xValue;e.pivot=a}else if(e.selectedTool===ot.phaseCorrection.id){var r=t.activeSpectrum.id,i=e.data.findIndex((function(e){return e.id===r})),o=bt.getDatum(r);o.data.x=t.tempData[i].x,o.data.re=t.tempData[i].y,o.data.im=t.tempData[i].im,e.data[i].x=t.tempData[i].x,e.data[i].y=t.tempData[i].y,e.tempData=null,e.selectedTool=null,Pt(e)}}(n,e,t)):(n.selectedTool=null,ot[e.selectedTool].hasOptionPanel&&(n.selectedOptionPanel=null))}))};var Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e}));return n},Ct=function(e,t,n){var a,r=e.originDomain,i=e.height,o=e.margin,c=e.data;if(1===c.length){var l=Et(c[0].y),u=gt(e).y(l);a=m.g.translate(0,u).scale(n.scale).translate(0,-u)}else a=m.g.translate(0,i-o.bottom).scale(n.scale).translate(0,-(i-o.bottom));if(t.zoomFactor=n,null===t.activeSpectrum)t.yDomains=Object.keys(t.yDomains).reduce((function(e,t){var n=m.e(r.yDomains[t],[i-o.bottom,o.top]),c=a.rescaleY(n).domain();return e[t]=c,e}),{});else{var s=m.e(r.yDomains[t.activeSpectrum.id],[i-o.bottom,o.top]),f=a.rescaleY(s).domain();t.yDomains[t.activeSpectrum.id]=f}};function wt(e){if(e.activeTab){var t=pt("nucleus")(e.data)[e.activeTab];if(e.activeSpectrum){var n=t.findIndex((function(t){return t.id===e.activeSpectrum.id}));if(-1!==n){var a=t[n].info.isFid||!1;t=t.filter((function(e){return e.info.isFid===a}))}}else t=t?t.filter((function(e){return!1===e.info.isFid})):[];var r=!0,i=!1,o=void 0;try{for(var c,l=function(){var e=c.value;t.some((function(t){return t.id===e.id}))?(bt.getDatum(e.id).isVisibleInDomain=!0,e.isVisibleInDomain=!0):(bt.getDatum(e.id).isVisibleInDomain=!1,e.isVisibleInDomain=!1)},u=e.data[Symbol.iterator]();!(r=(c=u.next()).done);r=!0)l()}catch(s){i=!0,o=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return e.data}return e.data}function St(e){var t=wt(e).filter((function(e){return!0===e.isVisibleInDomain}));e.mode=t&&t[0]&&t[0].info.isFid?"LTR":"RTL"}function Pt(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=wt(e);e.activeTab?(t=mt(a),e.xDomain=t.x,n?(e.yDomain=t.y,e.yDomains=t.yDomains,e.originDomain={x:t.x,y:t.y,yDomains:t.yDomains}):e.originDomain=Object(d.a)({},e.originDomain,{x:t.x})):(t=mt(a),e.xDomain=t.x,e.yDomain=t.y,e.originDomain=t,e.yDomains=t.yDomains)}var Dt={data:null,tempData:null,xDomain:[],yDomain:[],yDomains:{},originDomain:{},integralsYDomains:{},originIntegralYDomain:{},selectedTool:ot.zoom.id,selectedFilter:null,selectedOptionPanel:null,activeTab:null,width:null,height:null,margin:{top:10,right:20,bottom:70,left:0},activeSpectrum:null,mode:"RTL",zoomFactor:{scale:1},integralZoomFactor:{scale:.5},molecules:[],verticalAlign:{flag:!1,stacked:!1,value:20},history:{past:[],present:null,future:[],hasUndo:!1,hasRedo:!1},pivot:0,isLoading:!1,preferences:{},baseLineZones:[],keysPreferences:{}},It=function(e,t){switch(t.type){case"INITIATE":return function(e,t){return Object(at.a)(e,(function(n){var a=(bt=t.AnalysisObj).getSpectraData(),r=mt(a);n.data=a,n.molecules=bt.getMolecules(),n.xDomain=r.x,n.yDomain=r.y,n.originDomain=r,n.yDomains=r.yDomains,n.isLoading=!1;var i=bt.getPreferences("1d");i.display&&Object.prototype.hasOwnProperty.call(i.display,"center")?vt(e,n,{center:i.display.center}):ht(a,n,e.height),St(n)}))}(e,t.data);case"SET_LOADING_FLAG":return function(e,t){return Object(d.a)({},e,{isLoading:t})}(e,t.isLoading);case"LOAD_JSON_FILE":return function(e,t){return Object(at.a)(e,(function(n){var a=(bt=t.AnalysisObj).getSpectraData();n.data=a,n.molecules=bt.getMolecules();var r=bt.getPreferences("1d");n.preferences=r,r.display&&Object.prototype.hasOwnProperty.call(r.display,"center")?vt(e,n,{center:r.display.center}):ht(a,n,e.height),Pt(n),St(n),n.isLoading=!1}))}(e,t.data);case"LOAD_JCAMP_FILE":return function(e,t){return Object(at.a)(e,(function(e){for(var n=e.data.map((function(e){return e.color})),a=t.length,r=0;r<a;r++){var i=it(n);bt.addJcamp(t[r].binary.toString(),{display:{name:t[r].name,color:i,isVisible:!0,isPeaksMarkersVisible:!0},source:{jcampURL:t[r].jcampURL?t[r].jcampURL:null}}),n.push(i)}e.data=bt.getSpectraData(),Pt(e),St(e),e.isLoading=!1}))}(e,t.files);case"LOAD_MOL_FILE":return function(e,t){return Object(at.a)(e,(function(e){for(var n=t.length,a=0;a<n;a++)bt.addMolfile(t[a].binary.toString());e.molecules=bt.getMolecules(),e.isLoading=!1}))}(e,t.files);case"LOAD_ZIP_FILE":return function(e,t){return bt.fromZip(t),e}(e,t.files);case"EXPORT_DATA":return yt(e,t);case"ADD_PEAK":return Ot(e,t.mouseCoordinates);case"ADD_PEAKS":return function(e,t){return Object(at.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum.id,r=e.data.findIndex((function(e){return e.id===a})),i=gt(e),o=i.x.invert(t.startX),c=i.x.invert(t.endX),l=[];if(o>c?(l[0]=c,l[1]=o):(l[0]=o,l[1]=c),-1!==r){var u=bt.getDatum(a).addPeaks(l[0],l[1]);n.data[r].peaks=u}}}))}(e,t);case"DELETE_PEAK_NOTATION":return function(e,t){return Object(at.a)(e,(function(n){var a=e.activeSpectrum,r=a.id,i=a.index,o=bt.getDatum(r);o.deletePeak(t),n.data[i].peaks=o.getPeaks()}))}(e,t.data);case"ADD_INTEGRAL":return function(e,t){var n=gt(e).x;return Object(at.a)(e,(function(a){var r=n.invert(t.startX),i=n.invert(t.endX),o=[];if(o=r>i?[i,r]:[r,i],e.activeSpectrum){var c=e.activeSpectrum,l=c.id,u=c.index,s=bt.getDatum(l);s.addIntegral(o),a.data[u].integrals=s.getIntegrals();var f=a.data[u].integrals.values;if(1===f.length){var d=f[0],p=d.from,b=d.to,g=a.data[u],h=g.x,v=g.y,y=T.c.integral({x:h,y:v},{from:p,to:b,reverse:!0}),O=m.c(y.y);a.integralsYDomains[l]=O,a.originIntegralYDomain=O,xt(e,a.integralZoomFactor,a)}}}))}(e,t);case"DELETE_INTEGRAL":return function(e,t){return Object(at.a)(e,(function(n){var a=t.integralID,r=e.activeSpectrum,i=r.id,o=r.index,c=bt.getDatum(i);c.deleteIntegral(a),n.data[o].integrals=c.getIntegrals()}))}(e,t);case"CHANGE_INTEGRAL_DATA":return function(e,t){return Object(at.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=bt.getDatum(r);o.setIntegral(t.data),n.data[i].integrals=o.getIntegrals()}}))}(e,t);case"RESIZE_INTEGRAL":return function(e,t){return Object(at.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=bt.getDatum(r);o.changeIntegral(t),n.data[i].integrals=o.getIntegrals()}}))}(e,t.integral);case"SET_ORIGINAL_DOMAIN":return function(e,t){return Object(at.a)(e,(function(e){e.originDomain=t}))}(e,t.domain);case"SET_X_DOMAIN":return function(e,t){return Object(at.a)(e,(function(e){e.xDomain=t}))}(e,t.xDomain);case"SET_WIDTH":return function(e,t){return Object(d.a)({},e,{width:t})}(e,t.width);case"SET_DIMENSIONS":return function(e,t,n){return Object(d.a)({},e,{width:t,height:n})}(e,t.width,t.height);case"SET_POINTER_COORDINATES":return function(e,t){return Object(d.a)({},e,{pointerCoordinates:t})}(e,t.pointerCoordinates);case"SET_SELECTED_TOOL":return kt(e,t.selectedTool);case"RESET_SELECTED_TOOL":return function(e){return Object(at.a)(e,(function(t){t.selectedOptionPanel=null,t.selectedTool=ot.zoom.id,t.baseLineZones=[],e.tempData&&(t.data=e.tempData,t.tempData=null,Pt(t))}))}(e);case"SET_SELECTED_OPTIONS_PANEL":return function(e,t){return Object(d.a)({},e,{selectedOptionPanel:t})}(e,t.selectedOptionPanel);case"SET_DATA":return function(e,t){return Object(at.a)(e,(function(e){var n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;bt.pushDatum(new Fe(c))}}catch(l){a=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}e.data=bt.getSpectraData(),e.molecules=bt.getMolecules(),e.isLoading=!1,Pt(e),St(e)}))}(e,t.data);case"FULL_ZOOM_OUT":return function(e,t){return Object(at.a)(e,(function(n){switch(t){case"H":n.xDomain=e.originDomain.x;break;case"V":Ct(e,n,{scale:.8});break;default:n.xDomain=e.originDomain.x,Ct(e,n,{scale:.8})}}))}(e,t.zoomType);case"SHIFT_SPECTRUM":return function(e,t){return Object(at.a)(e,(function(n){var a=e.activeSpectrum.id,r=bt.getDatum(a);r.applyFilter([{name:Ae.shiftX.id,options:t}]),jt(n,r,a),Pt(n)}))}(e,t.shiftValue);case"APPLY_ZERO_FILLING_FILTER":return function(e,t){return Object(at.a)(e,(function(n){var a=e.activeSpectrum.id,r=bt.getDatum(a);r.applyFilter([{name:Ae.zeroFilling.id,options:t.zeroFillingSize},{name:Ae.lineBroadening.id,options:t.lineBroadeningValue}]),jt(n,r,a),Pt(n),St(n)}))}(e,t.value);case"APPLY_FFT_FILTER":return function(e){return Object(at.a)(e,(function(t){var n=e.activeSpectrum.id,a=bt.getDatum(n);a.applyFilter([{name:Ae.fft.id,options:{}}]),jt(t,a,n),ht([{info:a.getInfo()}],t,e.height),Pt(t),St(t)}))}(e);case"APPLY_MANUAL_PHASE_CORRECTION_FILTER":return function(e){return Object(at.a)(e,(function(t){var n=e.activeSpectrum.id,a=bt.getDatum(n),r=e.tempData.findIndex((function(e){return e.id===n}));t.selectedOptionPanel=null,t.selectedTool=ot.zoom.id,t.tempData=null,t.data[r].filters=a.getFilters(),Pt(t)}))}(e,t.value);case"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER":return function(e,t){return Object(at.a)(e,(function(n){var a=e.data,r=e.activeSpectrum,i=r.id,o=r.index,c=t.ph0,l=t.ph1,u=bt.getDatum(i),s=Et(a[o].x,e.pivot);c-=l*a[o].x.indexOf(s)/u.data.x.length,u.applyFilter([{name:Ae.phaseCorrection.id,options:{ph0:c,ph1:l}}]);var f=u.getReal();n.data[o].x=f.x,n.data[o].y=f.y}))}(e,t.value);case"ENABLE_FILTER":return function(e,t,n){return Object(at.a)(e,(function(a){var r=e.activeSpectrum.id,i=bt.getDatum(r);i.enableFilter(t,n);var o=i.getReal(),c=e.data.findIndex((function(e){return e.id===r}));a.data[c].x=o.x,a.data[c].y=o.y,a.data[c].filters=i.getFilters(),a.data[c].info.isFid=i.info.isFid,Pt(a),St(a)}))}(e,t.id,t.checked);case"DELETE_FILTER":return function(e,t){return Object(at.a)(e,(function(n){var a=e.activeSpectrum.id,r=bt.getDatum(a);r.deleteFilter(t);var i=r.getReal(),o=e.data.findIndex((function(e){return e.id===a}));n.data[o].x=i.x,n.data[o].y=i.y,n.data[o].filters=r.getFilters(),n.data[o].info.isFid=r.info.isFid,Pt(n),St(n)}))}(e,t.id);case"CHANGE_VISIBILITY":return function(e,t){return Object(at.a)(e,(function(e){var n=!0,a=!1,r=void 0;try{for(var i,o=function(){var e=i.value;t.some((function(t){return t.id===e.id}))?e.isVisible=!0:e.isVisible=!1},c=e.data[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)o()}catch(l){a=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}}))}(e,t.data);case"CHANGE_PEAKS_MARKERS_VISIBILITY":return function(e,t){return Object(at.a)(e,(function(e){var n=!0,a=!1,r=void 0;try{for(var i,o=function(){var e=i.value;t.some((function(t){return t.id===e.id}))?(bt.getDatum(e.id).isPeaksMarkersVisible=!0,e.isPeaksMarkersVisible=!0):(bt.getDatum(e.id).isPeaksMarkersVisible=!1,e.isPeaksMarkersVisible=!1)},c=e.data[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)o()}catch(l){a=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}}))}(e,t.data);case"CHANGE_ACTIVE_SPECTRUM":return function(e,t){return Object(at.a)(e,(function(e){if(t){bt.getDatum(t.id).isVisible=!0;var n=e.data.findIndex((function(e){return e.id===t.id}));-1!==n&&(e.data[n].isVisible=!0),t=Object(d.a)({},t,{index:n}),e.activeSpectrum=t}else e.activeSpectrum=null;Pt(e,!1),St(e)}))}(e,t.data);case"CHANGE_SPECTRUM_COLOR":return function(e,t){var n=t.id,a=t.color;return Object(at.a)(e,(function(e){var t=e.data.findIndex((function(e){return e.id===n}));-1!==t&&(e.data[t].color=a,bt.getDatum(n).display.color=a)}))}(e,t.data);case"TOGGLE_REAL_IMAGINARY_VISIBILITY":return function(e){return Object(at.a)(e,(function(t){if(null!==e.activeSpectrum){var n=e.activeSpectrum.id,a=bt.getDatum(n);if(a){var r=a.getReal().y,i=a.getImaginary().y,o=e.data.findIndex((function(e){return e.id===n}));if(a.setIsRealSpectrumVisible(!t.data[o]),t.data[o].isRealSpectrumVisible=!t.data[o].isRealSpectrumVisible,a.setIsRealSpectrumVisible(),t.data[o].isRealSpectrumVisible){if(null!==r&&void 0!==r){t.data[o].y=r;var c=mt(t.data);t.xDomain=c.x,t.yDomain=c.y,t.yDomains=c.yDomains}}else if(null!==i&&void 0!==i){t.data[o].y=i;var l=mt(t.data);t.xDomain=l.x,t.yDomain=l.y,t.yDomains=l.yDomains}}}}))}(e);case"SET_ZOOM_FACTOR":return function(e,t){return Object(at.a)(e,(function(n){Ct(e,n,t)}))}(e,t.zoomFactor);case"CHANGE_SPECTRUM_DISPLAY_VIEW_MODE":return function(e,t){var n=t.flag;return Object(at.a)(e,(function(t){var a=e.activeSpectrum,r=e.data,i=e.height,o=20;a&&(r[a.index].isFid&&(o=i/2));t.verticalAlign.flag=n,t.verticalAlign.stacked=n,t.verticalAlign.value=n?Math.floor(i/(e.data.length+2)):o}))}(e,t);case"ADD_MOLECULE":return function(e,t){return bt.addMolfile(t),Object(at.a)(e,(function(e){e.molecules=bt.getMolecules()}))}(e,t.molfile);case"SET_MOLECULE":return function(e,t,n){return Object(at.a)(e,(function(e){e.molecules=bt.setMolfile(t,n)}))}(e,t.molfile,t.key);case"DELETE_MOLECULE":return function(e,t){return Object(at.a)(e,(function(e){bt.removeMolecule(t),e.molecules=bt.getMolecules()}))}(e,t.key);case"DELETE_SPECTRA":return function(e,t){return Object(at.a)(e,(function(e){var n=e.activeSpectrum;if(n&&n.id)bt.deleteDatumByIDs([n.id]),e.activeSpectrum=null,e.data=bt.getSpectraData(),Pt(e),St(e);else{var a=t.IDs;bt.deleteDatumByIDs(a),e.data=bt.getSpectraData()}}))}(e,t);case"SET_INTEGRAL_Y_DOMAIN":return function(e,t){return Object(at.a)(e,(function(e){var n=e.activeSpectrum;n&&(e.integralsYDomains[n.id]=t)}))}(e,t.yDomain);case"CHANGE_INTEGRAL_ZOOM":return function(e,t){return Object(at.a)(e,(function(n){xt(e,t,n)}))}(e,t.zoomFactor);case"CHANGE_INTEGRAL_SUM":return function(e,t){return Object(at.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=bt.getDatum(r);o.changeIntegralSum(t),n.data[i].integrals=o.getIntegrals(),e.data.integralsYDomain||(n.integralsYDomains[r]=n.yDomains[r])}}))}(e,t.value);case"BRUSH_END":return function(e,t){var n=gt(e).x;return Object(at.a)(e,(function(e){var a=n.invert(t.startX),r=n.invert(t.endX);e.xDomain=a>r?[r,a]:[a,r]}))}(e,t);case"SET_VERTICAL_INDICATOR_X_POSITION":return function(e,t){return Object(at.a)(e,(function(n){var a=gt(e).x;n.pivot=a.invert(t)}))}(e,t.position);case"SET_SPECTRUMS_VERTICAL_AlIGN":return function(e,t){return Object(at.a)(e,(function(n){vt(e,n,{center:t})}))}(e,t.flag);case"AUTO_PEAK_PICKING":return function(e,t){return Object(at.a)(e,(function(n){n.selectedTool=ot.zoom.id,n.selectedOptionPanel=null;var a=e.activeSpectrum.id,r=bt.getDatum(a).applyAutoPeakPicking(t),i=e.data.findIndex((function(e){return e.id===a}));-1!==i&&(n.data[i].peaks=r)}))}(e,t.options);case"AUTO_RANGES_DETECTION":return function(e,t){return Object(at.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index;n.selectedTool=ot.zoom.id,n.selectedOptionPanel=null;var o=bt.getDatum(r).detectRanges(t);n.data[i].ranges=o}}))}(e,t.options);case"DELETE_RANGE":return function(e,t){return Object(at.a)(e,(function(n){var a=e.activeSpectrum,r=a.id,i=a.index,o=bt.getDatum(r);o.deleteRange(t),n.data[i].ranges=o.getRanges()}))}(e,t.rangeID);case"SET_PREFERENCES":return function(e,t){var n=t.type,a=t.values;return Object(at.a)(e,(function(e){var t=bt.getPreferences(),r=t&&Object.prototype.hasOwnProperty.call(t,"panels")?t.panels:{};bt.setPreferences({panels:Object(d.a)({},r,Object(tt.a)({},n,a))}),e.preferences=bt.getPreferences()}))}(e,t.data);case"SET_ACTIVE_TAB":return function(e,t){return Object(at.a)(e,(function(n){var a=e.data;n.activeTab=t;var r=pt("nucleus")(a)[t];if(r&&1===r.length){var i=a.findIndex((function(e){return e.id===r[0].id}));n.activeSpectrum={id:r[0].id,index:i}}Pt(n),St(n)}))}(e,t.tab);case"ADD_BASE_LINE_ZONE":return function(e,t){var n=t.from,a=t.to,r=gt(e).x;return Object(at.a)(e,(function(t){var i=r.invert(n),o=r.invert(a),c=[];c=i>o?[o,i]:[i,o];var l=e.baseLineZones.slice();l.push({id:_(),from:c[0],to:c[1]}),t.baseLineZones=l}))}(e,t.zone);case"DELETE_BASE_LINE_ZONE":return function(e,t){return Object(at.a)(e,(function(n){n.baseLineZones=e.baseLineZones.filter((function(e){return e.id!==t}))}))}(e,t.id);case"APPLY_BASE_LINE_CORRECTION_FILTER":return function(e,t){return Object(at.a)(e,(function(n){var a=e.activeSpectrum.id,r=bt.getDatum(a);r.applyFilter([{name:Ae.baselineCorrection.id,options:Object(d.a)({zones:e.baseLineZones},t.options)}]),n.baseLineZones=[],jt(n,r,a),Pt(n),St(n)}))}(e,t);case"SET_KEY_PREFERENCES":return function(e,t){return Object(at.a)(e,(function(n){var a=e.activeTab,r=e.data,i=e.activeSpectrum,o=e.zoomFactor,c=e.xDomain;if(a){var l=pt("nucleus")(r);n.keysPreferences[t]={activeTab:a,activeSpectrum:i,zoomFactor:o,xDomain:c,data:l[a].reduce((function(e,t){return e[t.id]={color:t.color,isVisible:t.isVisible,isPeaksMarkersVisible:t.isPeaksMarkersVisible},e}),{})}}}))}(e,t.keyCode);case"APPLY_KEY_PREFERENCES":return function(e,t){return Object(at.a)(e,(function(n){var a=e.keysPreferences[t];a&&(n.activeTab=a.activeTab,n.data=e.data.map((function(e){return Object(d.a)({},e,{},e.info.nucleus===a.activeTab?a.data[e.id]:{isVisible:!1})})),n.activeSpectrum=a.activeSpectrum,Pt(n),n.xDomain=a.xDomain,Ct(e,n,a.zoomFactor))}))}(e,t.keyCode);case"RESET_X_DOMAIN":return function(e){return Object(at.a)(e,(function(t){t.xDomain=e.originDomain.x,t.yDomain=e.originDomain.y}))}(e);case"undo":return function(e){var t=e.history,n=t.past,a=t.present,r=t.future,i=n[n.length-1],o=n.slice(0,n.length-1),c=[a].concat(Object(nt.a)(r)),l=0!==c.length,u=0!==n.length;bt.undoFilter(n);var s=bt.getSpectraData(),f=mt(s),p={past:o,present:i,future:c,hasRedo:l,hasUndo:u};return Object(d.a)({},e,{data:s,xDomain:f.x,yDomain:f.y,originDomain:f,history:p})}(e);case"redo":return function(e){return Object(at.a)(e,(function(e){var t=e.history,n=t.future[0],a=t.future.shift();t.past.push(t.present),t.present=a,t.hasUndo=!0,t.hasRedo=t.future.length>0,bt.redoFilter(n),e.data=bt.getSpectraData(),Pt(e)}))}(e);case"reset":return function(e,t){return Object(at.a)(e,(function(e){e.history={past:[],present:t,future:[],hasRedo:!1,hasUndo:!1}}))}(e,t);default:return e}},Tt=Object(g.createContext)(),At=Tt.Provider;function Rt(){return Object(g.useContext)(Tt)}var Ft=n(697),Lt=n(68);function Nt(){return(Nt=Object(C.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return _t(n=e.sent),e.next=6,n.text();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e){if(!e.ok)throw new Error("HTTP ".concat(e.status," - ").concat(e.statusText));return e}function Mt(e){return e.replace(/^.*\./,"").toLowerCase()}function zt(e){return Promise.all([].map.call(e,(function(e){return new Promise((function(t,n){var a=new FileReader;a.onabort=function(e){return n(e)},a.onerror=function(e){return n(e)},a.onload=function(){if(a.result){var n=a.result,r=function(e){return e.substr(0,e.lastIndexOf("."))}(e.name),i=Mt(e.name);t({binary:n,name:r,extension:i})}},a.readAsBinaryString(e)}))})))}function Vt(){var e=Object(f.a)(["\n  border: 0.55px #e6e6e6 solid;\n  display: flex;\n  flex: 1;\n  flex-direction: 'column';\n  height: 100%;\n"]);return Vt=function(){return e},e}function Ht(){var e=Object(f.a)(["\n  height: 100%;\n  background-color: #b5b5b599;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-flow: column;\n  z-index: 99999;\n\n  p {\n    color: white;\n    background-color: rgb(104, 104, 104);\n    padding: 1.5%;\n    border-radius: 30px;\n    margin: 0px;\n  }\n\n  svg {\n    stroke-width: 0;\n    font-size: 3rem !important;\n    fill: white;\n  }\n"]);return Ht=function(){return e},e}var Bt=Object(b.b)(Ht()),Yt=Object(b.b)(Vt()),Gt=function(e){var t=et(),n=t.width,a=t.height,r=Rt(),i=Object(g.useCallback)((function(e){r({type:"SET_LOADING_FLAG",isLoading:!0});var t=Object(nt.a)(new Set(e.map((function(e){return Mt(e.name)})))),n=!0,a=!1,i=void 0;try{for(var o,c=function(){var t=o.value,n=e.filter((function(e){return Mt(e.name)===t}));switch(t){case"mol":zt(n).then((function(e){r({type:"LOAD_MOL_FILE",files:e})}),(function(e){alert(e)}));break;case"nmrium":case"json":1===n.length?zt(n).then((function(e){qe.build(JSON.parse(e[0].binary.toString())).then((function(e){r({type:"LOAD_JSON_FILE",data:{AnalysisObj:e}})}))}),(function(e){alert(e)})):alert("You can add only one json file");break;case"dx":case"jdx":zt(n).then((function(e){r({type:"LOAD_JCAMP_FILE",files:e})}),(function(e){alert(e)}));break;case"zip":zt(n).then((function(e){r({type:"LOAD_ZIP_FILE",files:e})}),(function(e){alert(e)}));break;default:alert("The file extesion must be zip, dx, jdx, json, mol or nmrium.")}},l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)c()}catch(u){a=!0,i=u}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}}),[r]),o=Object(Ft.a)({onDrop:i,noClick:!0}),c=o.getRootProps,l=o.getInputProps,u=o.isDragActive;return Object(b.c)("div",Object.assign({},c(),{css:Yt}),Object(b.c)("input",l()),u&&Object(b.c)("div",{css:Bt,style:{width:"".concat(n+41,"px"),height:"".concat(a,"px")}},Object(b.c)(Lt.v,null),Object(b.c)("p",null,"Drop your files here")),e.children)},Ut=n(191),Xt=n.n(Ut),Wt={position:"fixed",top:0,left:0,pointerEvents:"none",backgroundColor:"gray",padding:"3px",borderRadius:"2px",color:"white",whiteSpace:"nowrap",fontSize:"10px"},Kt=function(e){var t=e.style,n=e.className,a=e.popupPlacement,r=void 0===a?"right":a,i=e.children,o=e.title,c=e.offset,l=void 0===c?{x:0,y:0}:c,u=Object(g.useRef)(),s=Object(g.useRef)(),f=Object(g.useState)({x:0,y:0}),b=Object(p.a)(f,2),m=b[0],v=b[1],y=Object(g.useState)(!1),O=Object(p.a)(y,2),x=O[0],j=O[1];Object(g.useLayoutEffect)((function(){if(x){var e=function(){var e,t,n=u.current.getBoundingClientRect(),a=s.current.getBoundingClientRect();switch(r){case"left":e=-a.width,t=n.height/2-n.height/2*a.height/n.height;break;case"right":e=n.width,t=n.height/2-n.height/2*a.height/n.height;break;case"top":e=n.width/2-n.width/2*a.width/n.width,t=-n.height;break;case"bottom":e=n.width/2-n.width/2*a.width/n.width,t=n.height;break;default:e=0,t=0}return{x:e+n.x,y:t+n.y}}();v(e)}}),[r,x]);var k=Object(g.useCallback)((function(){j(!0)}),[]),E=Object(g.useCallback)((function(){j(!1)}),[]);return h.a.createElement("div",{style:{position:"relative",height:"100%"}},h.a.createElement("div",{ref:u,onMouseOver:k,onMouseOut:E,style:{width:"inherit",height:"inherit"}},i),h.a.createElement("div",{ref:s,style:Object(d.a)({},Wt,{transform:"translate(".concat(m.x,"px,").concat(m.y,"px)"),zIndex:999999999,left:l.x,top:l.y,display:x?"block":"none"},t),className:n},h.a.createElement("span",{style:{pointerEvents:"none"}},o)))};function Zt(){var e=Object(f.a)(["\n  color: black;\n  background-color: #f3f3f3 !important;\n"]);return Zt=function(){return e},e}function qt(){var e=Object(f.a)(["\n  width: 35px;\n  height: 35px;\n  background-color: white;\n  padding: 5px;\n  margin: 0px;\n  border: none;\n  outline: none;\n\n  :focus {\n    outline: none !important;\n  }\n"]);return qt=function(){return e},e}var Jt=Object(b.b)(qt()),$t=Object(b.b)(Zt()),Qt=function(e){var t=e.children,n=e.value,a=e.disabled,r=e.isActive,i=e.onChange,o=e.className,c=e.style,l=e.isVisible,u=Object(g.useState)(r),s=Object(p.a)(u,2),f=s[0],d=s[1],m=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=!f;d(t),i(t?n:null)}),[f,i,n]);return Object(g.useEffect)((function(){d(r)}),[r]),l?Object(b.c)("button",{type:"button",onClick:m,css:[Jt,f&&$t],style:c,className:" ".concat(o,f?"  active":" "),disabled:a},Object(g.cloneElement)(t,{style:{fontSize:"10px"}})):null};Qt.displayName="ToggleButton",Qt.defaultProps={isActive:!1,disabled:!1,isVisible:!0,value:null,className:"",onChange:function(){return null},onValueReady:function(){return null}};var en=Qt,tn={display:"flex",flexDirection:"column"},nn=function(e){var t=e.children,n=e.value,a=e.onChange,r=Object(g.useState)([]),i=Object(p.a)(r,2),o=i[0],c=i[1],l=Object(g.useCallback)((function(e){var t=Object(nt.a)(o).map((function(t){return{value:t.value,isActive:t.value===e}}));c(t),a(e)}),[a,o]),u=Object(g.useMemo)((function(){var e=0;return h.a.Children.map(t,(function(t){if(t){if("ToggleButton"===t.type.displayName){var n=h.a.cloneElement(t,{onChange:l,isActive:o[e]&&o[e].isActive&&o[e].isActive,index:e});return e++,n}return h.a.cloneElement(t)}}))}),[t,l,o]);return Object(g.useEffect)((function(){var e=h.a.Children.map(t,(function(e){if(e&&"ToggleButton"===e.type.displayName)return{value:e.props.value,isActive:e.props.value===n}}));c(e)}),[t,n]),h.a.createElement("div",{style:tn}," ",u," ")};nn.defaultProps={onChange:function(){return null}};var an=nn,rn={icon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"18px 18px"},button:{backgroundColor:"transparent",border:"none",width:"35px",height:"35px",outline:"outline"},faIcon:{display:"flex",justifyContent:"center"}},on=[],cn=function(e){var t=e.defaultValue,n=e.preferences,a=Object(g.useState)(),r=Object(p.a)(a,2),i=r[0],o=r[1],c=Object(g.useState)(),l=Object(p.a)(c,2),u=l[0],s=l[1],f=Object(x.d)(),b=Rt(),m=Object(g.useCallback)((function(e){[ot.peakPicking.id,ot.integral.id].includes(e)&&f.show("Press Shift + Left Mouse button to select zone for integral and peak picking"),b({type:"SET_SELECTED_TOOL",selectedTool:e})}),[f,b]),v=et(),y=v.activeSpectrum,O=v.data,j=Object(g.useCallback)((function(e){o(e),m(e)}),[m]),k=Object(g.useCallback)((function(){0===on.length&&b({type:"FULL_ZOOM_OUT",zoomType:"H"});var e=Xt.a.debounce((function(){on=[]}),500);on.push(e),e(),on.length>1&&(Xt.a.map(on,(function(e){return e.cancel()})),on=[],b({type:"FULL_ZOOM_OUT"}))}),[b]),E=Object(g.useCallback)((function(e){if("input"!==e.target.localName&&!e.shiftKey&&!e.metaKey)switch(e.key){case"f":k();break;case"z":case"Escape":o(ot.zoom.id),m(ot.zoom.id);break;case"r":o(ot.autoRangesPicking.id),m(ot.autoRangesPicking.id);break;case"p":o(ot.peakPicking.id),m(ot.peakPicking.id);break;case"i":o(ot.integral.id),m(ot.integral.id)}}),[m,k]);Object(g.useEffect)((function(){return o(t),document.addEventListener("keydown",E,!1),function(){document.removeEventListener("keydown",E,!1)}}),[t,E]),Object(g.useEffect)((function(){if(O&&y){var e=O.find((function(e){return e.id===y.id})).info;s({info:e})}else s({info:{isComplex:!1,isFid:!1}})}),[y,O]);var C=Object(g.useCallback)((function(){b({type:"APPLY_FFT_FILTER",value:""}),b({type:"SET_SELECTED_FILTER",selectedFilter:null})}),[b]),w=Object(g.useCallback)((function(e){return!Xt.a.get(n,"toolsBarButtons.".concat(e))}),[n]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(an,{value:i,onChange:j},w("hideZoomTool")&&h.a.createElement(en,{key:ot.zoom.id,value:ot.zoom.id},h.a.createElement(Kt,{title:"".concat(ot.zoom.label," ( Press z )"),popupPlacement:"right",offset:{x:10,y:0}},h.a.createElement(Lt.t,null))),w("hideZoomOutTool")&&h.a.createElement("button",{type:"button",style:Object(d.a)({},rn.button,{},rn.faIcon),onClick:k},h.a.createElement(Kt,{title:"Horizontal zoom out ( Press f ), Horizontal and Vertical zoom out, double click ( Press ff )",popupPlacement:"right"},h.a.createElement(Lt.f,null))),w("hidePeakTool")&&h.a.createElement(en,{key:ot.peakPicking.id,value:ot.peakPicking.id,className:"ci-icon-nmr-peak-picking",style:rn.icon,isVisible:y&&u&&!u.info.isFid},h.a.createElement(Kt,{title:"".concat(ot.peakPicking.label," ( Press p )"),popupPlacement:"right",offset:{x:10,y:0}})),w("hideIntegralTool")&&h.a.createElement(en,{key:ot.integral.id,value:ot.integral.id,className:"ci-icon-nmr-integrate",style:rn.icon,isVisible:y&&u&&!u.info.isFid},h.a.createElement(Kt,{title:"".concat(ot.integral.label," ( Press i )"),popupPlacement:"right",offset:{x:10,y:0}})),w("hideAutoRangesTool")&&h.a.createElement(en,{key:ot.autoRangesPicking.id,value:ot.autoRangesPicking.id,className:"ci-icon-nmr-range-picking",style:rn.icon,isVisible:y&&u&&!u.info.isFid},h.a.createElement(Kt,{title:ot.autoRangesPicking.label,popupPlacement:"right",offset:{x:10,y:0}})),w("hideZeroFillingTool")&&h.a.createElement(en,{key:ot.zeroFilling.id,value:ot.zeroFilling.id,className:"ci-icon-nmr-zero-filling",style:rn.icon,isVisible:u&&Ae.zeroFilling.isApplicable(u)},h.a.createElement(Kt,{title:ot.zeroFilling.label,popupPlacement:"right",offset:{x:10,y:0}})),w("hidePhaseCorrectionTool")&&h.a.createElement(en,{key:ot.phaseCorrection.id,value:ot.phaseCorrection.id,className:"ci-icon-nmr-phase-correction",style:rn.icon,isVisible:y&&u&&Ae.phaseCorrection.isApplicable(u)},h.a.createElement(Kt,{title:ot.phaseCorrection.label,popupPlacement:"right",offset:{x:10,y:0}})),w("hideBaseLineCorrectionTool")&&h.a.createElement(en,{key:ot.baseLineCorrection.id,value:ot.baseLineCorrection.id,className:"ci-icon-nmr-base-line-correction",style:rn.icon,isVisible:y&&u&&Ae.baselineCorrection.isApplicable(u)},h.a.createElement(Kt,{title:ot.baseLineCorrection.label,popupPlacement:"right",offset:{x:10,y:0}},"BLC"))),w("hideFFTTool")&&u&&Ae.fft.isApplicable(u)&&h.a.createElement("button",{className:"ci-icon-nmr-fourier-transform",style:Object(d.a)({},rn.icon,{},rn.button),type:"button",onClick:C},h.a.createElement(Kt,{title:"FFT Filter",popupPlacement:"right",offset:{x:10,y:0}})))},ln=Object(g.memo)(cn);function un(){var e=Object(f.a)(["\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\n  padding: 0px;\n  margin: 0px;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  z-index: 99999;\n  padding: 2px;\n  transform: translate(40px, -26px);\n  background-color: white;\n\n  button:hover {\n    background-color: #fafafa;\n  }\n"]);return un=function(){return e},e}cn.defaultProps={defaultValue:ot.zoom.id};var sn=Object(b.b)(un()),fn=function(e){var t=e.style,n=e.component,a=e.toolTip,r=void 0===a?"":a,i=e.children,o=e.className,c=Object(g.useState)(!1),l=Object(p.a)(c,2),u=l[0],s=l[1],f=Object(g.useCallback)((function(){s(!1)}),[]),d=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),s(!0),document.addEventListener("click",f)}),[f]),m=Object(g.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),!1}),[]);return Object(g.useEffect)((function(){u||document.removeEventListener("click",f)}),[f,u]),Object(b.c)("div",null,Object(b.c)("button",{type:"button",css:t,onClick:d,onContextMenu:m,className:o},Object(b.c)(Kt,{title:r,popupPlacement:"right"},n)),u?Object(b.c)("div",{className:"menu",css:sn},i):null)},dn={outerContainer:{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(255,255,255,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},innerContainer:{boxSizing:"initial",backgroundColor:"#fff",boxShadow:"0 0 0 0, 0 8px 16px rgba(0,0,0,.30)",display:"flex",flexDirection:"column",minWidth:"300px",minHeight:"140px",justifyContent:"space-between",borderRadius:"5px"}},pn=function(e){var t=e.children,n=e.open,a=e.onClose,r=e.style,i=Object(g.useCallback)((function(e){a(e)}),[a]);return Object(g.useEffect)((function(){!1===n&&i()}),[i,n]),n&&h.a.createElement("div",{style:dn.outerContainer,onClick:i},h.a.createElement("div",{style:Object(d.a)({},dn.innerContainer,{},r),onClick:function(e){e.preventDefault(),e.stopPropagation()}},t))};pn.defaultProps={onClose:function(){return null},open:!1};var bn=pn,mn=n(2),gn=Object(g.createContext)();function hn(){var e=Object(f.a)(["\n  display: flex;\n  align-items: flex-end;\n  justify-content: flex-end;\n  padding: 5px;\n  background-color: #ffffff52;\n\n  button:first-child {\n    border-radius: 5px 0 0 5px;\n    border-weight: 0 1px 0 0;\n  }\n  button:last-child {\n    border-radius: 0px 5px 5px 0px;\n    border-weight: 0 0 0 1px;\n  }\n  button {\n    border: 1px solid #dcdcdc;\n    background-color: white;\n    display: inline-block;\n    cursor: pointer;\n    color: #666666;\n    font-weight: bold;\n    padding: 6px 24px;\n    text-decoration: none;\n  }\n  button:hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"]);return hn=function(){return e},e}function vn(){var e=Object(f.a)(["\n  font-size: 16px;\n  text-align: center;\n  color: white;\n  text-align: center;\n  margin: 35px 10px;\n  flex: 1;\n"]);return vn=function(){return e},e}var yn=Object(b.b)(vn()),On=Object(b.b)(hn()),xn=function(e){var t=e.onYes,n=e.onNo,a=e.onClose,r=e.message,i=Object(g.useCallback)((function(e){t(e),a()}),[a,t]),o=Object(g.useCallback)((function(e){n(e),a()}),[a,n]);return Object(b.c)("div",{style:{display:"flex",flexDirection:"column",backgroundColor:"#ff3636",flex:1}},Object(b.c)("p",{css:yn},r),Object(b.c)("div",{css:On},Object(b.c)("button",{type:"button",onClick:o},"No"),Object(b.c)("button",{type:"button",onClick:i},"Yes")))};xn.defaultProps={onYes:function(){return null},onNo:function(){return null}};var jn=xn,kn=function(e){var t=e.children,n=e.context,a=e.style,r=Object(g.useRef)(),i=Object(g.useRef)(null),o=Object(g.useState)({show:!1}),c=Object(p.a)(o,2),l=c[0],u=c[1];Object(g.useEffect)((function(){return r.current=document.createElement("div"),document.body.appendChild(r.current),function(){r.current&&document.body.removeChild(r.current)}}),[]);var s=function(){u((function(e){return e&&e.options&&e.options.onClose&&e.options.onClose(),{show:!1}}))},f=Object(g.useCallback)((function(){s()}),[]);return i.current={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={component:e,options:t,show:!0,close:function(){return s()}};return u(n),n.options.onOpen&&n.options.onOpen(),n},close:function(){f()},modal:l,showConfirmDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={component:h.a.createElement(jn,null),options:t,show:!0};return t.message=e,n.close=function(){return s()},u(n),n.options.onOpen&&n.options.onOpen(),n}},h.a.createElement(n.Provider,{value:i},t,r.current&&Object(mn.createPortal)(h.a.createElement(bn,{open:l.show,onClose:f,style:a},l.options&&h.a.cloneElement(l.component,Object(d.a)({},l.options,{onClose:f}))),r.current))},En=kn;kn.defaultProps={context:gn,style:{}};var Cn=function(e){return Object(g.useContext)(e||gn).current};function wn(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]);return wn=function(){return e},e}var Sn=Object(b.b)(wn()),Pn=["dx","jdx"],Dn=function(e){var t=e.onLoadClick,n=e.onClose,a=e.startLoading,r=Object(g.useRef)(),i=Object(g.useCallback)((function(){var e=r.current.value,n=function(e){var t=e.replace(/^.*[\\\/]/,"").split(".");return{name:t[0].toLowerCase(),extension:t[1].toLowerCase()}}(e);Pn.includes(n.extension)?(a(),function(e){return Nt.apply(this,arguments)}(e).then((function(a){var r={binary:a,name:n.name,jcampURL:e};t(r)}))):t(null)}),[t,a]);return Object(b.c)("div",{css:Sn},Object(b.c)("div",{className:"header"},Object(b.c)("span",null,"Load JCAMP Dialog"),Object(b.c)("button",{onClick:n,type:"button"},Object(b.c)(Lt.u,null))),Object(b.c)("div",{className:"container"},Object(b.c)("input",{ref:r,type:"text",placeholder:"Enter JCAMP file relative path ex: ./path/file.dx"}),Object(b.c)("button",{type:"button",onClick:i},"Load")))};Dn.defaultProps={onLoadButtonClick:function(){return null},onClose:function(){return null},startLoading:function(){return null}};var In=Dn;function Tn(){var e=Object(f.a)(["\n  background-color: transparent;\n  border: none;\n  border-bottom: 0.55px solid whitesmoke;\n  height: 35px;\n  outline: outline;\n  display: flex;\n  justify-content: flex-start;\n\n  :focus {\n    outline: none !important;\n  }\n  span {\n    font-size: 10px;\n    padding: 0px 10px;\n  }\n"]);return Tn=function(){return e},e}function An(){var e=Object(f.a)(["\n  background-color: transparent;\n  border: none;\n  width: 35px;\n  height: 35px;\n  min-height: 35px;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: outline;\n  :focus {\n    outline: none !important;\n  }\n"]);return An=function(){return e},e}var Rn=Object(b.b)(An()),Fn=Object(b.b)(Tn()),Ln=function(e){var t=e.isViewButtonVisible,n=void 0===t||t,a=e.preferences,r=Rt(),i=et(),o=i.data,c=i.activeSpectrum,l=i.verticalAlign,u=Object(g.useState)(!1),s=Object(p.a)(u,2),f=s[0],d=s[1],m=Object(g.useState)(0),h=Object(p.a)(m,2),v=h[0],y=h[1],O=Object(g.useState)(),j=Object(p.a)(O,2),k=j[0],E=j[1],C=Object(g.useState)(!1),w=Object(p.a)(C,2),S=w[0],P=w[1],D=Object(x.d)(),I=Cn(),T=Object(g.useCallback)((function(){r({type:"EXPORT_DATA",exportType:"svg"})}),[r]),A=Object(g.useCallback)((function(){return r({type:"EXPORT_DATA",exportType:"png"})}),[r]),R=Object(g.useCallback)((function(){r({type:"EXPORT_DATA",exportType:"copy"}),D.show("Spectrum copied to clipboard")}),[D,r]),F=Object(g.useCallback)((function(){return r({type:"EXPORT_DATA",exportType:"json"})}),[r]),L=Object(g.useCallback)((function(){var e=!S;P(e),r({type:"CHANGE_SPECTRUM_DISPLAY_VIEW_MODE",flag:e})}),[r,S]),N=Object(g.useCallback)((function(){r({type:"TOGGLE_REAL_IMAGINARY_VISIBILITY",isRealSpectrumVisible:!f}),d(!f)}),[r,f]),_=Object(g.useCallback)((function(){r({type:"SET_SPECTRUMS_VERTICAL_AlIGN",flag:!l.flag})}),[r,l.flag]),M=Object(g.useCallback)((function(e){if("input"!==e.target.localName&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey)switch(e.key){case"c":_();break;case"s":L()}if(!e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"c":R(),e.preventDefault();break;case"s":F(),e.preventDefault()}}),[_,L,F,R]),z=Object(g.useCallback)((function(e){e?(r({type:"LOAD_JCAMP_FILE",files:[e]}),I.close()):D.error("you file must be one of those extensions [ .jdx, dx ] ")}),[D,r,I]),V=Object(g.useCallback)((function(){I.close(),r({type:"SET_LOADING_FLAG",isLoading:!0})}),[r,I]),H=Object(g.useCallback)((function(){I.show(Object(b.c)(In,{onLoadClick:z,onClose:function(){return I.close()},startLoading:V}),{})}),[z,I,V]);Object(g.useEffect)((function(){return document.addEventListener("keydown",M,!1),function(){document.removeEventListener("keydown",M,!1)}}),[M]),Object(g.useEffect)((function(){if(o)if(y(o.length),c){var e=o.find((function(e){return e.id===c.id})).info;E(e)}else E({isComplex:!1,isFid:!1})}),[c,o]);var B=Object(g.useCallback)((function(e){return!Xt.a.get(a,"toolsBarButtons.".concat(e))}),[a]);return Object(b.c)(g.Fragment,null,B("hideImport")&&Object(b.c)(fn,{style:Rn,component:Object(b.c)(Lt.m,null),toolTip:"Import"},Object(b.c)("button",{type:"button",css:Fn,onClick:H},Object(b.c)(Lt.i,null),Object(b.c)("span",null,"Add jcamp from URL"))),B("hideExportAs")&&Object(b.c)(fn,{style:Rn,component:Object(b.c)(Lt.k,null),toolTip:"Export As"},Object(b.c)("button",{type:"button",css:Fn,onClick:T},Object(b.c)(Lt.e,null),Object(b.c)("span",null,"Export as SVG")),Object(b.c)("button",{type:"button",css:Fn,onClick:A},Object(b.c)(Lt.l,null),Object(b.c)("span",null,"Export as PNG")),Object(b.c)("button",{type:"button",css:Fn,onClick:F},Object(b.c)(Lt.j,null),Object(b.c)("span",null,"Save data ( Press Ctrl + S )")),Object(b.c)("button",{type:"button",css:Fn,onClick:R},Object(b.c)(Lt.d,null),Object(b.c)("span",null,"Copy image to Clipboard ( Press Ctrl + C )"))),B("hideSpectraStackAlignments")&&n&&v>1&&Object(b.c)("button",{type:"button",css:[Rn,{display:"block"}],onClick:L,className:S?"ci-icon-nmr-overlay3":"ci-icon-nmr-overlay3-aligned"},Object(b.c)(Kt,{title:"Spectra alignment",popupPlacement:"right"},Object(b.c)("div",null))),B("hideRealImaginary")&&k&&k.isComplex&&Object(b.c)("button",{css:Rn,type:"button",onClick:N,className:"ci-icon-nmr-real-imag"},Object(b.c)(Kt,{title:f?"Real Spectrum":"Imaginary Spectrum",popupPlacement:"right"})),B("hideSpectraCenterAlignments")&&Object(b.c)("button",{css:Rn,type:"button",onClick:_},Object(b.c)(Kt,{title:l.flag?"Bottom Align":"Align Center",popupPlacement:"right"},l.flag?"BA":"CA")))},Nn={display:"flex",flexDirection:"column",alignItems:"start",borderRight:"0.55px solid #f7f7f7",paddingRight:"1px"},_n=function(e){var t=e.preferences,n=et().selectedTool;return h.a.createElement("div",{style:Nn},h.a.createElement(ln,{defaultValue:n,preferences:t}),h.a.createElement(Ln,{preferences:t}))},Mn={container:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},zn=function(e){var t=e.children,n=e.defaultOpenIndex,a=void 0===n?0:n,r=Object(g.useCallback)((function(){return Array(t.length).fill(!1).map((function(e,t){return t===a||e}))}),[t.length,a]),i=Object(g.useState)(r),o=Object(p.a)(i,2),c=o[0],l=o[1],u=Object(g.useRef)(),s=Object(g.useCallback)((function(e){var t=c.slice();t=t.map((function(t,n){return n===e})),l(t)}),[c]),f=Object(g.useMemo)((function(){return h.a.Children.map(t,(function(e,t){return h.a.cloneElement(e,{onOpen:s,index:t,isOpen:c[t]})}))}),[t,c,s]);return Object(g.useEffect)((function(){l(r)}),[r]),h.a.createElement("div",{ref:u,style:Mn.container},f)},Vn={container:{display:"flex",flexDirection:"column",margin:"0px",userSelect:"none"},button:{cursor:"pointer",padding:"12px",display:"flex",alignItems:"center",border:"none",outline:"none",transition:"background-color 0.2s ease-in",boxShadow:"inset 0px 1px 0px 0px #ffffff",background:"linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%)",filter:'progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#f6f6f6",GradientType=0)',backgroundColor:"#ffffff",color:"#666666",fontFamily:"Arial",fontWeight:"bold",textDecoration:"none",textShadow:"0px 1px 0px #ffffff",borderTop:"0.55px  solid #d5d5d5"},buttonTitle:{padding:0,margin:0},content:{backgroundColor:"white",maxHeight:"0",overflow:"auto",flex:"1 1 1px"}},Hn=function(e){var t=e.title,n=e.children,a=e.index,r=e.isOpen,i=e.onOpen,o=e.style,c=Object(g.useState)(null),l=Object(p.a)(c,2),u=l[0],s=l[1],f=Object(g.useRef)(),b=Object(g.useRef)();return Object(g.useEffect)((function(){s(r?{backgroundColor:"#ccc"}:null)}),[r]),Object(g.useEffect)((function(){!1===r&&s(null)}),[r]),h.a.createElement("div",{ref:b,style:Object(d.a)({},Vn.container,{flex:null==u?0:"1 1 1px",transition:r?"":"flex 0.2s ease"}),className:"custom-accordion"},h.a.createElement("button",{type:"button",style:Vn.button,onClick:function(){s(null==u?{backgroundColor:"#ccc"}:null),null==u&&i(a)}},h.a.createElement("p",{style:Vn.buttonTitle},t)),h.a.createElement("div",{ref:f,style:Object(d.a)({},Vn.content,{maxHeight:null==u?0:"100%"},o)},n))};Hn.defaultProps={onOpen:function(){return null}};var Bn=Hn;var Yn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(a){var r=t(),i=r.data,o=r.activeSpectrum,c=r.preferences,l=r.activeTab,u=r.selectedTool;return h.a.createElement(e,Object.assign({data:i,activeSpectrum:o,preferences:c,activeTab:l,selectedTool:u},a,n))}},Gn=function(e){var t=e.label,n=e.activeTab,a=e.onClick,r="tab-list-item";n===t&&(r+=" tab-list-active");var i=Object(g.useCallback)((function(e){a(Object(d.a)({},e,{label:t}))}),[t,a]);return h.a.createElement("li",{className:r,onClick:i},t)};function Un(){var e=Object(f.a)(["\n  .tab-list {\n    border-bottom: 1px solid #ccc;\n    padding-left: 0;\n  }\n\n  .tab-list li:first-of-type {\n    margin-left: 5px;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list-item {\n    display: inline-block;\n    list-style: none;\n    margin-bottom: -1px;\n    padding: 0.5rem 0.75rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 1px 0 1px;\n  }\n"]);return Un=function(){return e},e}var Xn=Object(b.b)(Un()),Wn=function(e){var t=e.children,n=e.onClick,a=e.defaultTabID,r=Object(g.useState)(),i=Object(p.a)(r,2),o=i[0],c=i[1];Object(g.useEffect)((function(){c(a)}),[a]);var l=Object(g.useCallback)((function(e){n(e.label),c(e.label)}),[n]),u=Object(g.useMemo)((function(){return g.Children.map(t,(function(e){var t=e.props.label;return Object(b.c)(Gn,{activeTab:o,key:t,label:t,onClick:l})}))}),[o,t,l]),s=Object(g.useMemo)((function(){return g.Children.map(t,(function(e){return e.props.label!==o?Object(g.cloneElement)(e,{style:{display:"none"}}):Object(g.cloneElement)(e,{style:{display:"block"}})}))}),[o,t]);return Object(b.c)("div",{className:"tabs",css:Xn},Object(b.c)("ol",{className:"tab-list"},u),Object(b.c)("div",{className:"tab-content"},s))};Wn.defaultProps={onClick:function(){return null}};var Kn=Wn,Zn={button:{backgroundColor:"transparent",border:"none",width:"24px"},row:{display:"flex",alignContent:"center",height:"25px",borderBottom:"0.55px solid #f1f1f1"},name:{flex:1,height:"100%",display:"flex"},info:{flex:"1 1 1px",height:"100%",display:"block",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},icon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"18px 18px"},spectrumClassIcon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"16px 16px",width:"16px",height:"100%",margin:"0px 2px"}},qn=Object(g.memo)((function(e){var t,n,a=e.visible,r=e.activated,i=e.markersVisible,o=e.data,c=e.onChangeVisibility,l=e.onChangeMarkersVisibility,u=e.onChangeActiveSpectrum,s=e.onOpenColorPicker;return h.a.createElement("div",{style:Zn.row,key:o.id},h.a.createElement("button",{style:Zn.button,type:"button",onClick:function(){return c(o)}},h.a.createElement(Lt.g,{style:(n=o.id,-1!==a.findIndex((function(e){return e.id===n}))?{opacity:1,strokeWidth:"1px",fill:o.color}:{opacity:.1,fill:o.color})})),h.a.createElement("div",{style:Zn.name,onClick:function(){return u(o)}},h.a.createElement("div",{style:Zn.spectrumClassIcon,className:o.info.isFid?"ci-icon-nmr-fid":"ci-icon-nmr-ft"}),h.a.createElement("span",{style:Zn.info},o.name),h.a.createElement("div",{style:Zn.info,dangerouslySetInnerHTML:{__html:o.info&&(t=o.info.solvent,t&&(t=t.replace(/([0-9]+)/g,"<sub>$1</sub>")),t)}}),h.a.createElement("span",{style:Zn.info},o.info&&o.info.pulse)),h.a.createElement("button",{style:Object(d.a)({},Zn.button,{},Zn.icon,{opacity:function(e){return-1!==i.findIndex((function(t){return t.id===e}))}(o.id)&&o.peaks&&o.peaks.length>0?1:.1}),type:"button",onClick:function(){return l(o)},className:"ci-icon-nmr-peaks",disabled:o.peaks&&0===o.peaks.length}),h.a.createElement("button",{style:Zn.button,type:"button",onClick:function(){return u(o)}},h.a.createElement(Lt.n,{style:function(e){return r&&r.id===e}(o.id)?{fill:o.color,height:"15px"}:{fill:o.color,opacity:.1}})),h.a.createElement("button",{style:Zn.button,type:"button",className:"color-change-bt",onClick:function(e){return s(o,e)}},h.a.createElement(Lt.o,null)))})),Jn=n(522),$n={position:"fixed",zIndex:999999999};var Qn=Object(g.memo)((function(e){var t=e.colorPickerPosition,n=e.selectedSpectrumData,a=e.onColorChanged,r=e.onMouseLeave;return h.a.createElement("div",{style:Object(d.a)({},$n,{left:t.x-200,top:t.y}),onMouseLeave:r},h.a.createElement(Jn.SketchPicker,{color:n.color,presetColors:rt,onChangeComplete:a}))}),(function(){return!0})),ea={button:{backgroundColor:"transparent",border:"none"},container:{display:"flex",flexDirection:"column",flexGrow:"1",height:"100%"},toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)",padding:"0px 5px"},counterLabel:{margin:0,textAlign:"right",width:"100%",lineHeight:"22px",padding:"0px 10px"}},ta=Object(g.memo)((function(e){var t=e.counter,n=e.onDelete,a=e.deleteToolTip,r=e.children,i=e.showSettingButton,o=void 0!==i&&i,c=e.onSettingClick;return h.a.createElement("div",{style:ea.toolbar},h.a.createElement(Kt,{title:a,popupPlacement:"right"},h.a.createElement("button",{style:ea.button,type:"button",onClick:n,disabled:0===t},h.a.createElement(Lt.r,null))),r,h.a.createElement("p",{style:ea.counterLabel},"[ ",t," ]"),o&&h.a.createElement(Kt,{title:"preferences",popupPlacement:"left"},h.a.createElement("button",{style:ea.button,type:"button",onClick:c},h.a.createElement(Lt.c,null))))})),na={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},button:{backgroundColor:"transparent",border:"none"}},aa=Yn(Object(g.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,r=Object(g.useState)(null),i=Object(p.a)(r,2),o=i[0],c=i[1],l=Object(g.useState)([]),u=Object(p.a)(l,2),s=u[0],f=u[1],d=Object(g.useState)([]),b=Object(p.a)(d,2),m=b[0],v=b[1],y=Object(g.useState)(!1),O=Object(p.a)(y,2),x=O[0],j=O[1],k=Object(g.useState)(null),E=Object(p.a)(k,2),C=E[0],w=E[1],S=Object(g.useState)(null),P=Object(p.a)(S,2),D=P[0],I=P[1],T=Object(g.useState)(null),A=Object(p.a)(T,2),R=A[0],F=A[1],L=Cn(),N=Rt(),_=Object(g.useState)([]),M=Object(p.a)(_,2),z=M[0],V=M[1],H=Object(g.useCallback)((function(){return Array.isArray(z[R])?z[R].map((function(e){return e.id})):[]}),[R,z]),B=Object(g.useCallback)((function(e){var t=s.findIndex((function(t){return t.id===e.id})),n=Object(nt.a)(s);-1===t?n.push({id:e.id}):n.splice(t,1),N({type:"CHANGE_VISIBILITY",data:n}),f(n)}),[N,s]),Y=Object(g.useCallback)((function(e){var t=m.findIndex((function(t){return t.id===e.id})),n=Object(nt.a)(m);-1===t?n.push({id:e.id}):n.splice(t,1),N({type:"CHANGE_PEAKS_MARKERS_VISIBILITY",data:n}),v(n)}),[N,m]),G=Object(g.useCallback)((function(e){o&&o.id===e.id?N({type:"CHANGE_ACTIVE_SPECTRUM",data:null}):N({type:"CHANGE_ACTIVE_SPECTRUM",data:{id:e.id}})}),[o,N]),U=Object(g.useCallback)((function(e){null!==C&&N({type:"CHANGE_SPECTRUM_COLOR",data:{id:C.id,color:e.hex}})}),[N,C]),X=Object(g.useCallback)((function(e){e&&F(e)}),[]);Object(g.useEffect)((function(){if(t){var e=t?t.filter((function(e){return!0===e.isVisible})):[],n=t?t.filter((function(e){return!0===e.isPeaksMarkersVisible})):[];f(e),v(n)}}),[t,o,R,N]),Object(g.useEffect)((function(){c(n)}),[n]),Object(g.useEffect)((function(){if(t){var e=pt("nucleus")(t);if(V(e),!R){var n=Object.keys(e)[0];X(n),N({type:"SET_ACTIVE_TAB",tab:n})}}}),[t,G,o,R,N,X]);var W=Object(g.useCallback)((function(e,t){I({x:t.nativeEvent.clientX,y:t.nativeEvent.clientY}),w(e),j(!0)}),[]),K=Object(g.useCallback)((function(){j(!1)}),[]),Z=Object(g.useCallback)((function(e){N({type:"SET_ACTIVE_TAB",tab:e})}),[N]),q=Object(g.useMemo)((function(){return h.a.createElement(Kn,{defaultTabID:a||z&&Object.keys(z)[0],onClick:Z},z&&Object.keys(z).map((function(e){return h.a.createElement("div",{label:e,key:e},z[e]&&z[e].map((function(e){return h.a.createElement(qn,{key:e.id,visible:s,activated:o,markersVisible:m,data:e,onChangeVisibility:B,onChangeMarkersVisibility:Y,onChangeActiveSpectrum:G,onOpenColorPicker:W})})))})))}),[a,z,Z,s,o,m,B,Y,G,W]),J=Object(g.useCallback)((function(){var e=H();N({type:"DELETE_SPECTRA",IDs:e})}),[N,H]),$=Object(g.useCallback)((function(){o?(c(null),N({type:"DELETE_SPECTRA"})):L.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:J})}),[o,N,L,J]),Q=Object(g.useCallback)((function(){var e=H().map((function(e){return{id:e}}));N({type:"CHANGE_VISIBILITY",data:e}),f(e)}),[N,H]),ee=Object(g.useCallback)((function(){N({type:"CHANGE_VISIBILITY",data:[]}),f([])}),[N]);return h.a.createElement("div",{style:na.container},h.a.createElement("div",{style:{overflow:"auto"}},h.a.createElement(ta,{onDelete:$,counter:z[R]&&z[R].length,deleteToolTip:"Delete All Spectrums"},h.a.createElement(Kt,{title:"Hide all spectrums",popupPlacement:"right"},h.a.createElement("button",{style:na.button,type:"button",onClick:ee},h.a.createElement(Lt.h,null))),h.a.createElement(Kt,{title:"Show all spectrums",popupPlacement:"right"},h.a.createElement("button",{style:na.button,type:"button",onClick:Q},h.a.createElement(Lt.g,null)))),q,x?h.a.createElement(Qn,{onMouseLeave:K,selectedSpectrumData:C,colorPickerPosition:D,onColorChanged:U}):null))})),et),ra=n(381),ia=n.n(ra),oa=n(284),ca=function(e){var t=e.headerGroups;return h.a.createElement("thead",null,t.map((function(e){return h.a.createElement("tr",Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e){return h.a.createElement("th",Object.assign({key:e.getHeaderProps().key},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),h.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""))})))})))};function la(){var e=Object(f.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  th,\n  td {\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"]);return la=function(){return e},e}function ua(){var e=Object(f.a)(["\n  background-color: #ff6f0057;\n"]);return ua=function(){return e},e}var sa=Object(b.b)(ua()),fa=Object(b.b)(la()),da=function(e){var t=e.row,n=Object(Je.b)([Object.prototype.hasOwnProperty.call(t.original,"id")?t.original.id:""]);return Object(b.c)("tr",Object.assign({key:t.getRowProps().key,css:n.isActive?sa:null},t.getRowProps(),n.onHover),t.cells.map((function(e){return Object(b.c)("td",Object.assign({key:e.key},e.getCellProps()),e.render("Cell"))})))},pa=function(e){var t=e.data,n=e.columns,a=Object(oa.d)({columns:n,data:t},oa.c),r=a.getTableProps,i=a.getTableBodyProps,o=a.headerGroups,c=a.rows,l=a.prepareRow;return Object(b.c)("table",Object.assign({},r(),{css:fa}),Object(b.c)(ca,{headerGroups:o}),Object(b.c)("tbody",i(),c.map((function(e){return l(e),Object(b.c)(da,Object.assign({key:e.key,row:e},e.getRowProps()))}))))};function ba(){var e=Object(f.a)(["\n      position: relative;\n      padding: 0px 5px;\n      border: 0.55px solid #cacaca;\n      font-size: 14px;\n      width: ","px;\n      margin: 0;\n      height: 100%;\n      background: url(../img/br_down.png) no-repeat right white;\n      -webkit-appearance: none;\n      background-position-x: ","px;\n      background-size: 10px 10px;\n      border-radius: 5px;\n      margin: 0px 5px;\n      :focus,\n      input:focus {\n        outline: none;\n      }\n    "]);return ba=function(){return e},e}var ma=h.a.forwardRef((function(e,t){var n=e.data,a=e.style,r=e.onChange,i=e.defaultValue,o=Object(g.useCallback)((function(e){r(e.target.value)}),[r]),c=Object(b.b)(ba(),a.width?a.width-5:115,a.width?a.width-18:97);return Object(b.c)("select",{css:[c,a],ref:t,onChange:o,defaultValue:i},n.map((function(e){return Object(b.c)("option",{key:"".concat(e.key),value:e.value},e.label)})))}));ma.defaultProps={onChange:function(){return null},ref:null};var ga=ma;function ha(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]);return ha=function(){return e},e}var va=Object(b.b)(ha()),ya=function(e){var t=e.onSave,n=e.onClose,a=Object(g.useRef)(),r=Object(g.useCallback)((function(){t(a.current.value)}),[t]);return Object(b.c)("div",{css:va},Object(b.c)("div",{className:"header"},Object(b.c)("span",null,"Set new integral sum"),Object(b.c)("button",{onClick:n,type:"button"},Object(b.c)(Lt.u,null))),Object(b.c)("div",{className:"container"},Object(b.c)("input",{ref:a,type:"number",placeholder:"Enter the integral sum"}),Object(b.c)("button",{type:"button",onClick:r},"Set")))};ya.defaultProps={onSave:function(){return null},onClose:function(){return null}};var Oa=ya,xa=n(685),ja=n.n(xa);var ka=function(e,t){return ja()(e).format(t)},Ea=function(){return h.a.createElement("p",{style:{textAlign:"center",width:"100%",fontSize:"11px",padding:"5px",color:"gray"}},"No Data")};function Ca(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n  button {\n    background-color: transparent;\n    border: none;\n    height: 100%;\n    margin: 0px 5px;\n  }\n  .save svg {\n    fill: green;\n    font-size: 16px;\n  }\n  .close svg {\n    fill: #ca0000;\n    font-size: 20px;\n  }\n"]);return Ca=function(){return e},e}var wa=Object(b.b)(Ca()),Sa=Object(g.memo)((function(e){var t=e.onClose,n=e.onSave;return Object(b.c)("div",{css:wa},Object(b.c)(Kt,{title:"close Preferences",popupPlacement:"left"},Object(b.c)("button",{className:"close",type:"button",onClick:t},Object(b.c)(Lt.u,null))),Object(b.c)(Kt,{title:"save Preferences",popupPlacement:"left"},Object(b.c)("button",{className:"save",type:"button",onClick:n},Object(b.c)(Lt.b,null))))})),Pa={row:{display:"flex",margin:"5px 0px"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center"}},Da=Object(g.memo)((function(e){var t=e.label,n=e.checkControllerName,a=e.formatControllerName,r=e.defaultData,i=e.inputChangeHandler,o=e.groupID,c=e.data,l=Object(g.useCallback)((function(e,t){if(c){var n=Xt.a.get(c,"".concat(e,".").concat(t));return n||null}return r[t]}),[c,r]);return h.a.createElement("div",{style:Pa.row},h.a.createElement("span",{style:Pa.inputLabel},t),h.a.createElement("div",{style:{flex:4}},h.a.createElement("input",{name:"".concat(o,"-").concat(n),type:"checkbox",onChange:function(e){return i(e,o-n)},style:{margin:"0px 5px"},checked:l(o,n)}),h.a.createElement("input",{style:Pa.input,name:"".concat(o,"-").concat(a),type:"text",onChange:function(e){return i(e,o-a)},value:l(o,a)})))})),Ia={showValue:!0,valueFormat:"0.00",showNB:!0,NBFormat:"0.00"},Ta={showPeakNumber:!0,peakNumberFormat:"0.00",showPeakIndex:!0,peakIndexFormat:"0.00",showDeltaPPM:!1,deltaPPMFormat:"0.00",showDeltaHz:!1,deltaHzFormat:"0.00",showPeakWidth:!1,peakWidthFormat:"00.0000",showIntensity:!0,intensityFormat:"0.00"},Aa={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},Ra={showValue:!0,valueFormat:"0.00",showNB:!0,NBFormat:"0.00"},Fa=Object(g.forwardRef)((function(e,t){var n=et(),a=n.data,r=n.preferences,i=Rt(),o=Object(x.d)(),c=Object(g.useState)([]),l=Object(p.a)(c,2),u=l[0],s=l[1],f=Object(g.useState)(null),b=Object(p.a)(f,2),m=b[0],v=b[1],y=Object(g.useRef)(),O=Object(g.useCallback)((function(e){return e.reduce((function(e,t){return e=Object(d.a)({},e,Object(tt.a)({},t,Ra))}),{})}),[]);Object(g.useEffect)((function(){if(a&&Array.isArray(a)){var e=pt("nucleus"),t=Object.keys(e(a));s(t)}}),[a,O,m]),Object(g.useEffect)((function(){var e=Xt.a.get(r,"panels.integrals");e&&v(e)}),[r]);var j=Object(g.useCallback)((function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name.split("-");v((function(e){var t=e&&Object.prototype.hasOwnProperty.call(e,a[0])?e[a[0]]:{};return Object(d.a)({},e,Object(tt.a)({},a[0],Object(d.a)({},t,Object(tt.a)({},a[1],n))))}))}),[]),k=Object(g.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i({type:"SET_PREFERENCES",data:{type:"integrals",values:e}}),t&&o.success("Integrals preferences saved successfully")}),[o,i]);Object(g.useImperativeHandle)(t,(function(){return{saveSetting:function(){y.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var w=[{id:1,label:"Value :",checkController:"showValue",formatController:"valueFormat",defaultFormat:"0.00"},{id:2,label:"nb :",checkController:"showNB",formatController:"NBFormat",defaultFormat:"00.00"}],S=function(){var e=Object(C.a)(E.a.mark((function e(t){var n,a,r,i,o,c,l,u,s,f,p;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.target,a=new FormData(n),r={},i=!0,o=!1,c=void 0,e.prev=6,l=a.entries()[Symbol.iterator]();!(i=(u=l.next()).done);i=!0)s=u.value,f=s[0].split("-"),p=n.elements[s[0]].checked?!!s[1]:s[1],r=Object(d.a)({},r,Object(tt.a)({},f[0],Object(d.a)({},r[f[0]],Object(tt.a)({},f[1],p))));e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),o=!0,c=e.t0;case 14:e.prev=14,e.prev=15,i||null==l.return||l.return();case 17:if(e.prev=17,!o){e.next=20;break}throw c;case 20:return e.finish(17);case 21:return e.finish(14);case 22:k(r,!0);case 23:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}();return h.a.createElement("div",{style:Aa.container},h.a.createElement("form",{onSubmit:S,ref:y},u&&u.map((function(e){return h.a.createElement("div",{key:e,style:Aa.groupContainer},h.a.createElement("p",{style:Aa.header},e),w.map((function(t){return h.a.createElement(Da,{key:t.id,label:t.label,data:m,defaultData:Ia,checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e,defaultFormat:t.defaultFormat,inputChangeHandler:function(e,t){return j(e,t)}})})))}))))})),La={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},container:{display:"flex",flexDirection:"column",height:"100%"}},Na=[{key:"signal",label:"Signal",value:"signal"},{key:"reference",label:"Reference",value:"reference"},{key:"solvent",label:"Solvent",value:"solvent"},{key:"impurity",label:"Impurity",value:"impurity"},{key:"standard",label:"Standard",value:"standard"},{key:"p1",label:"P1",value:"p1"},{key:"p2",label:"P2",value:"p2"},{key:"p3",label:"P3",value:"p3"}],_a={marginLeft:10,marginRight:10,border:"none"},Ma=Yn(Object(g.memo)((function(e){var t=e.activeSpectrum,n=e.data,a=e.preferences,r=e.activeTab,i=Rt(),o=Cn(),c=Object(g.useState)(!1),l=Object(p.a)(c,2),u=l[0],s=l[1],f=Object(g.useState)(!0),b=Object(p.a)(f,2),m=b[0],v=b[1],y=Object(g.useRef)(),O=Object(g.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;i({type:"DELETE_INTEGRAL",integralID:n.id})}),[i]),x=Object(g.useCallback)((function(e,t){var n=Object(d.a)({},t.original,{kind:e});i({type:"CHANGE_INTEGRAL_DATA",data:n})}),[i]),j=[{orderIndex:1,Header:"#",Cell:function(e){return e.row.index+1},width:10},{orderIndex:2,Header:"From",accessor:"from",sortType:"basic",resizable:!0,Cell:function(e){return e.row.original.from.toFixed(2)}},{orderIndex:3,Header:"To",accessor:"to",sortType:"basic",resizable:!0,Cell:function(e){return e.row.original.to.toFixed(2)}},{orderIndex:6,Header:"Kind",accessor:"kind",sortType:"basic",resizable:!0,Cell:function(e){var t=e.row;return h.a.createElement(ga,{onChange:function(e){return x(e,t)},data:Na,style:_a,defaultValue:t.original.signalKind})}},{orderIndex:7,Header:"",id:"delete-button",Cell:function(e){var t=e.row;return h.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return O(e,t)}},h.a.createElement(Lt.r,null))}}],k=function(e,t){return!!(void 0===e||0===Object.keys(e).length||e&&!0===e[t])},E=Object(g.useMemo)((function(){var e=function(e,t,n,a){e.push({orderIndex:t,Header:n,sortType:"basic",Cell:function(e){var t=e.row;return a(t)}})},t=Xt.a.get(a,"panels.integrals.[".concat(r,"]")),n=[].concat(j);if(k(t,"showValue")&&e(n,4,"Value",(function(e){return ka(e.original.value,t&&Object.prototype.hasOwnProperty.call(t,"valueFormat")?t.valueFormat:Ia.valueFormat)})),k(t,"showNB")){var i=r&&r.replace(/[0-9]/g,"");e(n,5,"nb ".concat(i),(function(e){return ka(e.original.relative,t&&Object.prototype.hasOwnProperty.call(t,"NBFormat")?t.NBFormat:Ia.NBFormat)}))}return n.sort((function(e,t){return e.orderIndex-t.orderIndex}))}),[r,j,a]),C=Object(g.useMemo)((function(){var e=t&&n?n[t.index]:null;return e&&e.integrals&&e.integrals.values?e.integrals.values:[]}),[n,t]),w=Object(g.useCallback)((function(){i({type:"DELETE_INTEGRAL",integralID:null})}),[i]),S=Object(g.useCallback)((function(){o.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:w})}),[o,w]),P=Object(g.useCallback)((function(e){e&&i({type:"CHANGE_INTEGRAL_SUM",value:e}),o.close()}),[i,o]),D=Object(g.useCallback)((function(){o.show(h.a.createElement(Oa,{onClose:function(){return o.close()},onSave:P}))}),[P,o]),I=Object(g.useCallback)((function(){s(!u),u?v(!0):setTimeout((function(){v(!1)}),400,u)}),[u]),T=Object(g.useCallback)((function(){y.current.saveSetting(),s(!1),v(!0)}),[]);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{style:La.container},!u&&h.a.createElement(ta,{onDelete:S,counter:C&&C.length,deleteToolTip:"Delete All Integrals",showSettingButton:"true",onSettingClick:I},h.a.createElement(Kt,{title:"Change Integrals sum",popupPlacement:"right"},h.a.createElement("button",{style:La.sumButton,type:"button",onClick:D},"\u03a3"))),u&&h.a.createElement(Sa,{onSave:T,onClose:I}),h.a.createElement(ia.a,{isFlipped:u,infinite:!0,containerStyle:{height:"100%"}},h.a.createElement("div",{style:m?{}:{display:"none"}},C&&C.length>0?h.a.createElement(pa,{data:C,columns:E}):h.a.createElement(Ea,null)),h.a.createElement(Fa,{data:n,ref:y}))))})),et),za=n(700),Va=n(384),Ha=n(688),Ba=n.n(Ha),Ya=(n(689),n(385));function Ga(){var e=Object(f.a)(["\n  -moz-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  -webkit-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  box-shadow: inset 0px 1px 0px 0px #ffffff;\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0.05, #ffffff),\n    color-stop(1, #f6f6f6)\n  );\n  background: -moz-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -webkit-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -o-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -ms-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0);\n  background-color: #ffffff;\n  border: 0.55px solid #dcdcdc;\n  display: inline-block;\n  cursor: pointer;\n  color: #666666;\n  font-weight: bold;\n  padding: 6px 24px;\n  text-decoration: none;\n  text-shadow: 0px 1px 0px #ffffff;\n\n  :hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"]);return Ga=function(){return e},e}var Ua=Object(b.b)(Ga()),Xa=function(e){var t=e.onClose,n=e.open,a=e.selectedMolecule,r=Object(g.useState)(null),i=Object(p.a)(r,2),o=i[0],c=i[1],l=Rt();Object(g.useEffect)((function(){c(a?a.molfile:null)}),[a,n]);var u=Object(g.useCallback)((function(e){c(e)}),[c]),s=Object(g.useCallback)((function(){t()}),[t]),f=Object(g.useCallback)((function(){a?(l({type:"SET_MOLECULE",molfile:o,key:a.key}),t("replace")):(l({type:"ADD_MOLECULE",molfile:o}),t("new"))}),[l,a,o,t]);return Object(b.c)(bn,{open:n,onClose:s},Object(b.c)(Ya.a,{initialMolfile:a&&a.molfile,svgMenu:!0,fragment:!1,onChange:u}),Object(b.c)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",margin:5}},Object(b.c)("button",{type:"button",css:Ua,onClick:s},"Close"),Object(b.c)("button",{type:"button",css:Ua,onClick:f},"Save")))};function Wa(){var e=Object(f.a)(["\n  background-color: transparent;\n  border: none;\n  border-bottom: 0.55px solid whitesmoke;\n  height: 35px;\n  outline: outline;\n  display: flex;\n  justify-content: flex-start;\n\n  :focus {\n    outline: none !important;\n  }\n  span {\n    font-size: 10px;\n    padding: 0px 10px;\n  }\n"]);return Wa=function(){return e},e}function Ka(){var e=Object(f.a)(["\n  .slider {\n    height: 180px;\n    padding: 0px;\n  }\n  .slider p {\n    width: 100%;\n    margin: 0 auto;\n    display: block;\n    position: relative;\n  }\n\n  .slider svg polygon {\n    fill: gray !important;\n  }\n"]);return Ka=function(){return e},e}function Za(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  button svg {\n    fill: #4e4e4e;\n  }\n\n  .bar-button {\n    background-color: transparent;\n    border: none;\n  }\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]);return Za=function(){return e},e}function qa(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]);return qa=function(){return e},e}var Ja=Object(b.b)(qa()),$a=Object(b.b)(Za()),Qa=Object(b.b)(Ka()),er=Object(b.b)(Wa()),tr=function(){var e=Object(g.useRef)(),t=h.a.useState(!1),n=Object(p.a)(t,2),a=n[0],r=n[1],i=Object(g.useState)(),o=Object(p.a)(i,2),c=o[0],l=o[1],u=Object(g.useState)(0),s=Object(p.a)(u,2),f=s[0],d=s[1],m=Object(g.useState)(null),v=Object(p.a)(m,2),y=v[0],O=v[1],j=Rt(),k=Object(x.d)(),E=Object(g.useContext)($e).molecules,C=Object(g.useCallback)((function(e){r(!1),"new"===e&&d(E.length)}),[E.length]),w=Object(g.useCallback)((function(e,t,n){l(n?{molfile:n,key:t}:null),r(!0)}),[]),S=Object(g.useCallback)((function(){navigator.clipboard.readText().then((function(e){j({type:"ADD_MOLECULE",molfile:e})}))}),[j]),P=Object(g.useCallback)((function(){E[f]&&E[f].key&&(d(0),j({type:"DELETE_MOLECULE",key:E[f].key}))}),[j,E,f]),D=Object(g.useCallback)((function(){st("molFile","molSVG".concat(f))}),[f]),I=Object(g.useCallback)((function(){ft("molSVG".concat(f)),k.success("MOL copied as PNG to clipboard")}),[k,f]),T=Object(g.useCallback)((function(){E[f]&&(lt(E[f].molfile)?k.success("MOLFile copied to clipboard"):k.error("copied not completed"))}),[k,f,E]);return Object(b.c)("div",{css:Ja},Object(b.c)("div",{css:$a},Object(b.c)(fn,{className:"bar-button",component:Object(b.c)(Lt.k,null),toolTip:"Export As"},Object(b.c)("button",{type:"button",css:er,onClick:T},Object(b.c)(Lt.d,null),Object(b.c)("span",null,"Copy as molfile")),Object(b.c)("button",{type:"button",css:er,onClick:I},Object(b.c)(Lt.l,null),Object(b.c)("span",null,"Copy as PNG")),Object(b.c)("button",{type:"button",css:er,onClick:D},Object(b.c)(Lt.e,null),Object(b.c)("span",null,"Export as SVG"))),Object(b.c)(Kt,{title:"Paste molfile",popupPlacement:"left"},Object(b.c)("button",{className:"bar-button",type:"button",onClick:S},Object(b.c)(Lt.p,null))),Object(b.c)(Kt,{title:"Add Molecule",popupPlacement:"left"},Object(b.c)("button",{className:"bar-button",type:"button",onClick:w},Object(b.c)(Lt.q,null))),Object(b.c)(Kt,{title:"Delete Molecule",popupPlacement:"left"},Object(b.c)("button",{className:"bar-button",type:"button",onClick:P},Object(b.c)(Lt.r,null))),Object(b.c)("p",null,E&&E.length>0&&"".concat(+(f+1)," / ").concat(E.length)," ")),Object(b.c)("div",{css:Qa,ref:e},Object(b.c)(Ba.a,{onSlideChange:function(e){return d(e.slideIndex)},slideIndex:f},E&&E.map((function(t,n){return Object(b.c)("div",{key:t.key,onDoubleClick:function(e){return w(e,t.key,t.molfile)}},Object(b.c)("div",null,Object(b.c)(za.a,{id:"molSVG".concat(n),width:e&&e.current.clientWidth-70,molfile:t.molfile,atomHighlight:y&&[y],atomHighlightColor:"yellow",atomHighlightOpacity:.5,onAtomEnter:function(e){return O(e)},onAtomLeave:function(){return O(null)}})),Object(b.c)("p",null,Object(b.c)(Va.a,{mf:t.mf})," - ",t.mw.toFixed(2)))}))),Object(b.c)(Xa,{open:a,onClose:C,selectedMolecule:c})))},nr=n(690),ar={width:"100%",height:"100%",padding:"0px",display:"flex",flexDirection:"column"},rr=function(e){var t=e.children,n=e.className,a=e.style;return h.a.createElement("div",{className:n,style:Object(d.a)({},ar,{style:a})},t)},ir={width:"100%",display:"flex",padding:"0px 5px",color:"#424242",backgroundColor:"#d8d8d8",borderBottom:"0.55px solid #d8d8d8",fontSize:11,fontWeight:"bold"},or=function(e){var t=e.children,n=e.className,a=e.style;return h.a.createElement("div",{className:n,style:Object(d.a)({},ir,{style:a})},t)},cr={width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",padding:"5px 0px",color:"gray"},lr=function(e){var t=e.children,n=e.className,a=e.style;return h.a.createElement("div",{className:n,style:Object(d.a)({},cr,{style:a})},h.a.Children.map(t,(function(e){return h.a.cloneElement(e,{style:{borderBottom:"0.55px solid #d8d8d8"}})})))},ur={width:"100%",display:"flex",padding:"5px 0px"},sr=function(e){var t=e.children,n=e.className,a=e.style;return h.a.createElement("div",{className:n,style:Object(d.a)({},ur,{},a)},t)},fr={width:"100%",display:"flex",alignItems:"flex-start"};function dr(e){return"top"===e.toLowerCase()?"flex-start":"bottom"===e.toLowerCase()?"flex-end":"center"}var pr=function(e){var t=e.children,n=e.className,a=e.style,r=e.align,i=void 0===r?"center":r,o=e.vAlign,c=void 0===o?"center":o,l=e.size,u=void 0===l?1:l;return h.a.createElement("div",{className:n,style:Object(d.a)({},fr,{alignItems:dr(c),textAlign:i,flex:u},a)},t)},br=function(e){var t=e.checked,n=e.onChange,a=Object(g.useState)(t),r=Object(p.a)(a,2),i=r[0],o=r[1],c=Object(g.useCallback)((function(){var e=!i;o(e),n(e)}),[i,n]);return h.a.createElement("input",{type:"checkbox",onChange:c,defaultChecked:i})};br.defaultProps={onChange:function(){return null}};var mr=br,gr={button:{backgroundColor:"transparent",border:"none",height:25,width:25}},hr=Yn(Object(g.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=Rt(),r=Object(g.useCallback)((function(e,t){a({type:"ENABLE_FILTER",id:e,checked:t})}),[a]),i=Object(g.useCallback)((function(e){a({type:"DELETE_FILTER",id:e})}),[a]),o=Object(g.useMemo)((function(){var e=t&&n&&t.find((function(e){return e.id===n.id}));return e&&e.filters&&e.filters.map((function(e){return h.a.createElement(sr,{key:e.id},h.a.createElement(pr,{align:"center",size:"2"},e.label),h.a.createElement(pr,{align:"left",size:"3"},h.a.createElement(nr.a,{data:e.error?e.error:e.value})),h.a.createElement(pr,{align:"center",vAlign:"center",size:"1"},h.a.createElement(mr,{checked:e.flag,onChange:function(t){return r(e.id,t)}}),e.isDeleteAllow&&h.a.createElement("button",{style:gr.button,type:"button",onClick:function(){return i(e.id)}},h.a.createElement(Lt.r,null))))}))}),[n,t,i,r]);return o&&o.length>0?h.a.createElement(rr,null,h.a.createElement(or,null,h.a.createElement(sr,null,h.a.createElement(pr,{align:"center",size:"1"},"Label"),h.a.createElement(pr,{align:"center",size:"2"},"Properties"))),h.a.createElement(lr,null,o)):h.a.createElement(Ea,null)})),et),vr=function(e){var t=e.data,n=e.columns,a=Object(oa.d)({columns:n,data:t},oa.c,oa.b),r=a.getTableProps,i=a.getTableBodyProps,o=a.headerGroups,c=a.rows,l=a.prepareRow;return Object(b.c)("table",Object.assign({},r(),{css:fa}),Object(b.c)("thead",null,o.map((function(e){return Object(b.c)("tr",Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e){return Object(b.c)("th",Object.assign({key:e.getHeaderProps().key},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),Object(b.c)("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""))})))}))),Object(b.c)("tbody",Object.assign({},i(),{style:{display:"block",height:"100%",overflowY:"auto"}}),c.map((function(e){return l(e),Object(b.c)("tr",Object.assign({key:e.getRowProps().key},e.getRowProps()),e.cells.map((function(e){return Object(b.c)("td",Object.assign({key:e.getCellProps().key},e.getCellProps(),{style:Object(d.a)({},e.getCellProps().style,{padding:"0px"})}),e.render("Cell"))})))}))))},yr={searchInput:{width:"100%",borderRadius:"5px",border:"0.55px solid gray",padding:"5px",marginBottom:"2px"}},Or=Yn(Object(g.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=Object(g.useState)([]),r=Object(p.a)(a,2),i=r[0],o=r[1],c=Object(g.useState)([]),l=Object(p.a)(c,2),u=l[0],s=l[1],f=Object(g.useCallback)((function(e){var t=Object.keys(i).filter((function(t){return t.toLowerCase().includes(e.target.value)}));s(t)}),[i]);Object(g.useEffect)((function(){if(t&&n){var e=t.find((function(e){return e.id===n.id}));if(e){var a=Object.keys(e.info).concat(Object.keys(e.meta));s(a),o(Object(d.a)({},e.info,{},e.meta))}}}),[n,t]);var b=[{Header:"Parameter",sortType:"basic",minWidth:100,width:20,maxWidth:20,Cell:function(e){var t=e.row;return h.a.createElement("p",{style:{padding:"5px",backgroundColor:"white"}},t.original)}},{Header:"Value",sortType:"basic",resizable:!0,Cell:function(e){var t=e.row;return h.a.createElement("p",{style:{backgroundColor:"#efefef",width:"100%",height:"100%",padding:"5px",fontFamily:"monospace",whiteSpace:"pre"}},i[t.original])}}];return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",null,h.a.createElement("input",{type:"text",style:yr.searchInput,placeholder:"Search for parameter...",onChange:f})),h.a.createElement(vr,{data:u,columns:b}))})),et),xr=n(223),jr=function(e){var t=e.columns,n=e.data,a=e.renderRowSubComponent,r=Object(oa.d)({columns:t,data:n},oa.a,oa.c),i=r.getTableProps,o=r.getTableBodyProps,c=r.headerGroups,l=r.rows,u=r.prepareRow,s=r.flatColumns;return Object(b.c)("table",Object.assign({},i(),{css:fa}),Object(b.c)(ca,{headerGroups:c}),Object(b.c)("tbody",Object.assign({key:o().key},o()),l.map((function(e){return u(e),Object(b.c)(g.Fragment,{key:e.index},Object(b.c)(da,Object.assign({key:e.key,row:e},e.getRowProps())),e.isExpanded?Object(b.c)("tr",null,Object(b.c)("td",{colSpan:s.length},e&&e.original&&e.original.id&&a({row:e}))):null)}))))};jr.defaultProps={renderRowSubComponent:function(){return null}};var kr=jr;function Er(){var e=Object(f.a)(["\n  overflow: auto;\n  width: 400px;\n  .innerContainer {\n    padding: 5px;\n    width: 100%;\n    height: 180px;\n    border: none;\n  }\n\n  .mainButtonsContainer {\n    padding: 5px 0px;\n    border-bottom: 0.55px solid #ebebeb;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  button:focus {\n    outline: none;\n  }\n\n  button {\n    background-color: transparent;\n    border: none;\n  }\n"]);return Er=function(){return e},e}var Cr=Object(b.b)(Er()),wr=function(e){var t=e.text,n=e.onClose,a=e.onCopyClick;return Object(b.c)("div",{css:Cr},Object(b.c)("div",{className:"mainButtonsContainer"},Object(b.c)("button",{type:"button",onClick:function(){return a(t)}},Object(b.c)(Lt.d,null)),Object(b.c)("button",{type:"button",onClick:n},Object(b.c)(Lt.u,null))),Object(b.c)("div",{className:"innerContainer",dangerouslySetInnerHTML:{__html:t}}))},Sr={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},button:{backgroundColor:"transparent",border:"none"}},Pr=Yn(Object(g.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=Rt(),r=Cn(),i=Object(x.d)(),o=Object(g.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;a({type:"DELETE_RANGE",rangeID:n.id})}),[a]),c=Object(g.useMemo)((function(){var e=n&&t?t[n.index]:null;return e&&e.ranges&&e.ranges.values?e.ranges.values.map((function(e){return{from:e.from,to:e.to,integral:e.integral,signal:e.signal,id:e.id}})):[]}),[t,n]),l=Object(g.useCallback)((function(e){lt(e)?i.show("Coped to clipboard"):i.error("Coped to clipboard failed")}),[i]),u=Object(g.useCallback)((function(){r.close()}),[r]),s=Object(g.useCallback)((function(){var e=Object(xr.b)(c);r.show(h.a.createElement(wr,{text:e,onCopyClick:l,onClose:u}),{})}),[u,c,r,l]),f=[{Header:function(){return null},id:"expander",Cell:function(e){var t=e.row;return h.a.createElement("span",t.getExpandedToggleProps(),t.isExpanded?"\u25bc":"\u25b6")}},{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"From",accessor:"from",Cell:function(e){return e.row.original.from.toFixed(2)}},{Header:"To",accessor:"to",Cell:function(e){return e.row.original.to.toFixed(2)}},{Header:"Integral",accessor:"integral",Cell:function(e){return e.row.original.integral.toFixed(1)}},{Header:"#Signals",Cell:function(e){return e.row.original.signal.length}},{Header:"",id:"delete-button",Cell:function(e){var t=e.row;return h.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return o(e,t)}},h.a.createElement(Lt.r,null))}}],d=[{Header:"Signals",columns:[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"Multiplicity",accessor:"multiplicity"},{Header:"Delta",accessor:"delta",Cell:function(e){return e.row.original.delta.toFixed(3)}},{Header:"#Peaks",Cell:function(e){return e.row.original.peak.length}}]}],p=[{Header:function(){return null},id:"expanderSignals",Cell:function(e){var t=e.row;return h.a.createElement("span",t.getExpandedToggleProps(),t.isExpanded?"\u25bc":"\u25b6")}}].concat(d),b=[{Header:"Couplings",columns:[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"Multiplicity",accessor:"multiplicity"},{Header:"Coupling",accessor:"coupling",Cell:function(e){return e.row.original.coupling.toFixed(3)}}]}],m=function(e){var t=e.row;return t&&t.original&&t.original.j&&t.original.j.length>0?h.a.createElement(pa,{data:t.original.j,columns:b}):null},v=Object(g.useCallback)((function(){a({type:"DELETE_RANGE",rangeID:null})}),[a]),y=Object(g.useCallback)((function(){r.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:v})}),[r,v]);return h.a.createElement("div",{style:Sr.container},h.a.createElement(ta,{onDelete:y,counter:c&&c.length,deleteToolTip:"Delete All Ranges"},h.a.createElement(Kt,{title:"Preview publication string",popupPlacement:"right"},h.a.createElement("button",{style:Sr.button,type:"button",onClick:s},h.a.createElement(Lt.k,null)))),c&&c.length>0?h.a.createElement(kr,{columns:f,data:c,renderRowSubComponent:function(e){var t=e.row;return t&&t.original&&t.original.signal&&t.original.signal.find((function(e){return e.j&&e.j.length>0}))?h.a.createElement(kr,{columns:p,data:t.original.signal,renderRowSubComponent:m}):h.a.createElement(pa,{columns:d,data:t.original.signal})}}):h.a.createElement(Ea,null))})),et),Dr={"1h":{peakLabelNumberDecimals:2},"13c":{peakLabelNumberDecimals:1}};function Ir(e){return Dr[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1h";if(e=e.toLowerCase(),!Dr[e])return"1h";return e}(e)].peakLabelNumberDecimals}var Tr={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%"},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},Ar=Object(g.forwardRef)((function(e,t){var n=et(),a=n.data,r=n.preferences,i=Rt(),o=Object(x.d)(),c=Object(g.useState)([]),l=Object(p.a)(c,2),u=l[0],s=l[1],f=Object(g.useState)(null),b=Object(p.a)(f,2),m=b[0],v=b[1],y=Object(g.useRef)(),O=Object(g.useCallback)((function(e){return e.reduce((function(e,t){return e=Object(d.a)({},e,Object(tt.a)({},t,Ta))}),{})}),[]);Object(g.useEffect)((function(){if(a&&Array.isArray(a)){var e=pt("nucleus"),t=Object.keys(e(a));s(t)}}),[a,O,m]),Object(g.useEffect)((function(){var e=Xt.a.get(r,"panels.peaks");e&&v(e)}),[r]);var j=Object(g.useCallback)((function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name.split("-");v((function(e){var t=e&&Object.prototype.hasOwnProperty.call(e,a[0])?e[a[0]]:{};return Object(d.a)({},e,Object(tt.a)({},a[0],Object(d.a)({},t,Object(tt.a)({},a[1],n))))}))}),[]),k=Object(g.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i({type:"SET_PREFERENCES",data:{type:"peaks",values:e}}),t&&o.success("Peaks preferences saved successfully")}),[o,i]);Object(g.useImperativeHandle)(t,(function(){return{saveSetting:function(){y.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var w=[{id:1,label:"Peak Number :",checkController:"showPeakNumber",formatController:"peakNumberFormat",defaultFormat:""},{id:2,label:"Peak Index : ",checkController:"showPeakIndex",formatController:"peakIndexFormat",defaultFormat:""},{id:3,label:"\u03b4 (ppm) :",checkController:"showDeltaPPM",formatController:"deltaPPMFormat",defaultFormat:"00.00"},{id:4,label:"\u03b4 (Hz) :",checkController:"showDeltaHz",formatController:"deltaHzFormat",defaultFormat:"00.00"},{id:5,label:"Peak Width",checkController:"showPeakWidth",formatController:"peakWidthFormat",defaultFormat:"00.0000"},{id:6,label:"Intensity :",checkController:"showIntensity",formatController:"intensityFormat",defaultFormat:"00.00"}],S=function(){var e=Object(C.a)(E.a.mark((function e(t){var n,a,r,i,o,c,l,u,s,f,p;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.target,a=new FormData(n),r={},i=!0,o=!1,c=void 0,e.prev=6,l=a.entries()[Symbol.iterator]();!(i=(u=l.next()).done);i=!0)s=u.value,f=s[0].split("-"),p=n.elements[s[0]].checked?!!s[1]:s[1],r=Object(d.a)({},r,Object(tt.a)({},f[0],Object(d.a)({},r[f[0]],Object(tt.a)({},f[1],p))));e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),o=!0,c=e.t0;case 14:e.prev=14,e.prev=15,i||null==l.return||l.return();case 17:if(e.prev=17,!o){e.next=20;break}throw c;case 20:return e.finish(17);case 21:return e.finish(14);case 22:k(r,!0);case 23:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}();return h.a.createElement("div",{style:Tr.container},h.a.createElement("form",{onSubmit:S,ref:y},u&&u.map((function(e){return h.a.createElement("div",{key:e,style:Tr.groupContainer},h.a.createElement("p",{style:Tr.header},e),w.map((function(t){return h.a.createElement(Da,{key:t.id,label:t.label,data:m,defaultData:Ta,checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e,defaultFormat:t.defaultFormat,inputChangeHandler:function(e,t){return j(e,t)}})})))}))))})),Rr={container:{display:"flex",flexDirection:"column",height:"100%"},toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},button:{backgroundColor:"transparent",border:"none"}},Fr=Yn(Object(g.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=e.preferences,r=e.activeTab,i=Rt(),o=Cn(),c=Object(g.useState)(!1),l=Object(p.a)(c,2),u=l[0],s=l[1],f=Object(g.useState)(!0),d=Object(p.a)(f,2),b=d[0],m=d[1],v=Object(g.useRef)(),y=[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"peak index",accessor:"xIndex",sortType:"basic"},{Header:"Intensity ",accessor:"yValue",sortType:"basic"},{Header:"",id:"delete-button",Cell:function(e){var t=e.row;return h.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return x(e,t)}},h.a.createElement(Lt.r,null))}}],O=[{index:20,Header:"",id:"delete-button",Cell:function(e){var t=e.row;return h.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return x(e,t)}},h.a.createElement(Lt.r,null))}}],x=Object(g.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;i({type:"DELETE_PEAK_NOTATION",data:{id:n.id,xIndex:n.xIndex}})}),[i]),j=Object(g.useMemo)((function(){var e=function(e,t,n,a){e.push({index:t,Header:n,sortType:"basic",Cell:function(e){var t=e.row;return a(t)}})},t=Xt.a.get(a,"panels.peaks.[".concat(r,"]"));if(t){var n=[].concat(O);return t.showPeakNumber&&e(n,1,"#",(function(e){return ka(e.index+1,t.peakNumberFormat)})),t.showPeakIndex&&e(n,2,"index",(function(e){return ka(e.original.xIndex,t.peakIndexFormat)})),t.showDeltaPPM&&e(n,3,"\u03b4 (ppm)",(function(e){return ka(e.original.value,t.deltaPPMFormat)})),t.showDeltaHz&&e(n,4,"\u03b4 (Hz)",(function(e){return ka(e.original.value,t.deltaHzFormat)})),t.showIntensity&&e(n,5,"Intensity",(function(e){return ka(e.original.yValue,t.intensityFormat)})),t.showPeakWidth&&e(n,5,"Peak Width",(function(e){return ka(e.original.peakWidth,t.peakWidthFormat)})),n.sort((function(e,t){return e.index-t.index}))}return y}),[r,y,O,a]),k=Object(g.useMemo)((function(){var e=n&&t?t[n.index]:null;if(e&&e.peaks&&e.peaks.values){var a=Ir(e.info.nucleus);return e.peaks.values.map((function(t){return{xIndex:t.xIndex,value:e.x[t.xIndex].toFixed(a),id:t.id,yValue:e.y[t.xIndex],peakWidth:t.width?t.width:""}}))}return[]}),[t,n]),E=Object(g.useCallback)((function(){i({type:"DELETE_PEAK_NOTATION",data:null})}),[i]),C=Object(g.useCallback)((function(){o.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:E})}),[o,E]),w=Object(g.useCallback)((function(){s(!u),u?m(!0):setTimeout((function(){m(!1)}),400,u)}),[u]),S=Object(g.useCallback)((function(){v.current.saveSetting(),s(!1),m(!0)}),[]);return h.a.createElement("div",{style:Rr.container},!u&&h.a.createElement(ta,{onDelete:C,counter:k&&k.length,deleteToolTip:"Delete All Peaks",showSettingButton:"true",onSettingClick:w}),u&&h.a.createElement(Sa,{onSave:S,onClose:w}),h.a.createElement(ia.a,{isFlipped:u,infinite:!0,containerStyle:{height:"100%"}},h.a.createElement("div",{style:b?{}:{display:"none"}},k&&k.length>0?h.a.createElement(pa,{data:k,columns:j}):h.a.createElement(Ea,null)),h.a.createElement(Ar,{data:t,ref:v})))})),et),Lr=[{title:"Spectra",component:h.a.createElement(aa,null),openWhen:null,style:"",hidePreferenceKey:"hideSpectraPanel"},{title:"Information",component:h.a.createElement(Or,null),openWhen:null,style:{overflow:"hidden"},hidePreferenceKey:"hideInformationPanel"},{title:"Peaks",component:h.a.createElement(Fr,null),openWhen:[ot.peakPicking.id],style:"",hidePreferenceKey:"hidePeaksPanel"},{title:"Filters",component:h.a.createElement(hr,null),openWhen:null,style:"",hidePreferenceKey:"hideFiltersPanel"},{title:"Integrals",component:h.a.createElement(Ma,null),openWhen:[ot.integral.id],style:"",hidePreferenceKey:"hideIntegralsPanel"},{title:"Ranges",component:h.a.createElement(Pr,null),openWhen:[ot.autoRangesPicking.id],style:"",hidePreferenceKey:"hideRangesPanel"},{title:"Structures",component:h.a.createElement(tr,null),openWhen:[ot.autoRangesPicking.id],style:"",hidePreferenceKey:"hideStructuresPanel"}],Nr=Yn(Object(g.memo)((function(e){var t=e.preferences,n=e.selectedTool,a=Object(g.useState)(0),r=Object(p.a)(a,2),i=r[0],o=r[1],c=Object(g.useCallback)((function(){var e=Lr.findIndex((function(e){return e.openWhen&&e.openWhen.includes(n)}));return-1===e?i:e}),[i,n]);return Object(g.useEffect)((function(){n&&o(c())}),[c,n]),h.a.createElement(zn,{defaultOpenIndex:i},Lr.map((function(e){return Xt.a.get(t,"panels.".concat(e.hidePreferenceKey))?h.a.createElement("span",null):h.a.createElement(Bn,{key:e.title,title:e.title,style:e.style},e.component)})))})),et),_r={container:{padding:"5px",height:"100%",display:"flex"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}};function Mr(e){return e>=1048576?"".concat(e/1048576,"M"):e>=1024?"".concat(e/1024,"K"):e}var zr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,n=[],a=e;a<=t;a++){var r=Math.pow(2,a);n.push({key:r,label:Mr(r),value:r})}return n}(),Vr=function(){var e=Rt(),t=et(),n=t.data,a=t.activeSpectrum,r=Object(g.useRef)(),i=Object(g.useState)(1),o=Object(p.a)(i,2),c=o[0],l=o[1],u=Object(g.useCallback)((function(){e({type:"APPLY_ZERO_FILLING_FILTER",value:{zeroFillingSize:Number(r.current.value),lineBroadeningValue:c}})}),[e,c]),s=Object(g.useCallback)((function(){if(n&&a){var e=n.find((function(e){return e.id===a.id}));return Math.pow(2,Math.round(Math.log2(e.x.length)))}return""}),[a,n]),f=Object(g.useCallback)((function(e){if(e.target){var t=e.target.validity.valid?Number(e.target.value):c;l(t)}}),[c]),d=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return h.a.createElement("div",{style:_r.container},h.a.createElement("span",{style:_r.label},"Size: "),h.a.createElement(ga,{ref:r,data:zr,style:{marginLeft:10,marginRight:10},defaultValue:s()}),h.a.createElement("span",{style:_r.label},"Line Broadening: "),h.a.createElement("input",{name:"line-broadening",style:_r.input,type:"number",value:c,onInput:f,pattern:"^\\d*(\\.\\d{0,2})?$",step:"any"}),h.a.createElement("button",{type:"button",style:_r.actionButton,onClick:u},"Apply"),h.a.createElement("button",{type:"button",style:_r.actionButton,onClick:d},"Cancel"))},Hr={container:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",border:"0.55px solid #c7c7c7",borderRadius:"5px",userSelect:"none",backgroundColor:"#18ce0f14",fontSize:"10px",color:"#00801d",margin:"0px 5px",cursor:"ew-resize"},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}},Br={step:"initial"},Yr=null,Gr=1,Ur=0,Xr=!0;function Wr(e){Xr?(Ur=e.clientX,Xr=!1):(Gr=e.clientX-Ur,Ur=e.clientX,clearTimeout(Yr),Yr=setTimeout((function(){Gr=0}),50))}var Kr=function(e){var t=e.name,n=e.minValue,a=e.maxValue,r=e.value,i=e.onChange,o=e.label,c=e.style,l=e.className,u=e.noPropagation,s=Object(g.useCallback)((function(){"moving"!==Br.step&&"start"!==Br.step||(Br=Object(d.a)({},Br,{step:"start"===Br.step?"initial":"end"}))}),[]),f=Object(g.useCallback)((function(e){u&&e.stopPropagation();var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;return"initial"!==Br.step&&"end"!==Br.step||(Br={startX:n,startY:a,startScreenX:e.screenX,startScreenY:e.screenY,boundingRect:e.currentTarget.getBoundingClientRect(),step:"start",clientX:e.clientX,clientY:e.clientY}),!1}),[u]);return h.a.createElement("div",{style:Object(d.a)({},Hr.container,{},c),className:l,onMouseMove:function(e){if("start"===Br.step||"moving"===Br.step){var o=e.screenX,c=e.screenY;Br=Object(d.a)({},Br,{step:"moving",endX:Br.startX+o-Br.startScreenX,endY:Br.startY+c-Br.startScreenY}),Wr(e);var l=a-n,u=Br.endX-Br.startX,s=Math.abs(u)*(Math.abs(Gr)>3?l:5)/Br.boundingRect.width;i({value:Gr>=0?r+Math.abs(s):r-s,name:t})}},onMouseUp:function(){"moving"!==Br.step&&"start"!==Br.step||(Br=Object(d.a)({},Br,{step:"start"===Br.step?"initial":"end"}))},onMouseDown:f,onMouseEnter:s},h.a.createElement("span",{style:Hr.label},o))};Kr.defaultProps={name:"",minValue:0,maxValue:50,value:0,onChange:function(){return null},label:"Drag to Change the value",noPropagation:!0};var Zr=Kr,qr={lineHeight:2,userSelect:"none"},Jr={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},$r=Object(g.forwardRef)((function(e,t){var n=e.label,a=e.value,r=e.name,i=e.style,o=e.onChange;return h.a.createElement(g.Fragment,null,h.a.createElement("span",{style:Object(d.a)({},qr,{},i.label)},n),h.a.createElement("input",{ref:t,name:r,style:Object(d.a)({},Jr,{},i.input),type:"text",value:a,onChange:o}))}));$r.defaultProps={style:{label:{},input:{}},value:"",onChange:function(){return null}};var Qr=$r,ei={container:{padding:"5px",height:"100%",display:"flex"},input:{width:"100px"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}},ti=function(){var e=Rt(),t=Object(g.useState)({ph0:0,ph1:0,pivotIndex:1}),n=Object(p.a)(t,2),a=n[0],r=n[1],i=Object(g.useCallback)((function(){e({type:"APPLY_MANUAL_PHASE_CORRECTION_FILTER",value:a})}),[e,a]),o=Object(g.useCallback)((function(t){var n=t.target.name;if(t.target){var i=parseFloat(t.target.value)||"-"===t.target.value.trim()?t.target.value:0;r((function(t){var r=Object(d.a)({},t,Object(tt.a)({},n,i));if("-"!==i){var o=Object(d.a)({},a,Object(tt.a)({},n,i-t[n]));for(var c in t)t[c]===o[c]&&(o[c]-=t[c]);e({type:"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",value:o})}return r}))}}),[e,a]),c=Object(g.useCallback)((function(t){var n=Object(d.a)({},a,Object(tt.a)({},t.name,t.value)),i={};for(var o in a)i[o]=n[o]-a[o];e({type:"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",value:i}),r(n)}),[e,a]),l=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return h.a.createElement("div",{style:ei.container},h.a.createElement(Qr,{label:"PH0:",name:"ph0",style:{input:ei.input},onChange:o,value:a.ph0}),h.a.createElement(Qr,{label:"PH1:",name:"ph1",style:{input:ei.input},onChange:o,value:a.ph1}),h.a.createElement(Zr,{name:"ph0",value:a.ph0,label:"Change Ph0 By mouse click and drag",style:{width:"20%"},onChange:c}),h.a.createElement(Zr,{name:"ph1",value:a.ph1,label:"Change Ph1 By mouse click and drag",style:{width:"20%"},onChange:c}),h.a.createElement("button",{type:"button",style:ei.actionButton,onClick:i},"Apply"),h.a.createElement("button",{type:"button",style:ei.actionButton,onClick:l},"Cancel"))},ni={lineHeight:2,userSelect:"none"},ai={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},ri=Object(g.forwardRef)((function(e,t){var n=e.label,a=e.name,r=e.defaultValue,i=e.style,o=e.onChange,c=e.onInput,l=e.pattern,u=e.step;return h.a.createElement(g.Fragment,null,h.a.createElement("span",{style:Object(d.a)({},ni,{},i.label)},n),h.a.createElement("input",{ref:t,name:a,style:Object(d.a)({},ai,{},i.input),type:"number",pattern:l,step:u,defaultValue:r,onChange:o,onInput:c}))}));ri.defaultProps={pattern:"^d*(.d{0,2})?$",step:"any",style:{label:{},input:{}},defaultValue:0,onChange:function(){return null},onInput:function(){return null}};var ii=ri,oi={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}},ci=function(){var e=Rt(),t=Object(g.useRef)(),n=Object(g.useRef)(),a=Object(g.useCallback)((function(){e({type:"AUTO_PEAK_PICKING",options:{maxNumberOfPeaks:n.current.value,minMaxRatio:t.current.value}})}),[e]),r=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return h.a.createElement("div",{style:oi.container},h.a.createElement(ii,{ref:n,label:"Max Number Of Peaks:",name:"maxNumberOfPeaks",style:{input:oi.input},defaultValue:50}),h.a.createElement(ii,{ref:t,label:"Min Max Ratio:",name:"minMaxRatio",style:{input:oi.input},defaultValue:.1,step:"0.1"}),h.a.createElement("button",{type:"button",style:oi.actionButton,onClick:a},"Apply"),h.a.createElement("button",{type:"button",style:oi.actionButton,onClick:r},"Cancel"))},li={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}},ui=function(){var e=Rt(),t=Object(g.useCallback)((function(){e({type:"AUTO_RANGES_DETECTION",options:{minMaxRatio:.05,nH:100,compile:!0,frequencyCluster:16,clean:null,keepPeaks:!0}})}),[e]),n=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return h.a.createElement("div",{style:li.container},h.a.createElement("button",{type:"button",style:li.actionButton,onClick:t},"Apply"),h.a.createElement("button",{type:"button",style:li.actionButton,onClick:n},"Cancel"))},si={container:{padding:"5px",height:"100%",display:"flex"},label:{lineHeight:2,userSelect:"none"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}},fi=function(){var e=Rt(),t=Object(g.useRef)(),n=Object(g.useRef)(),a=Object(g.useRef)(),r=Object(g.useRef)(),i=Object(g.useState)("polynomial"),o=Object(p.a)(i,2),c=o[0],l=o[1],u=Object(g.useCallback)((function(){var i={};switch(c){case"airpls":i={algorithm:t.current.value,maxIterations:n.current.value,tolerance:a.current.value};break;case"polynomial":i={algorithm:t.current.value,degree:r.current.value}}e({type:"APPLY_BASE_LINE_CORRECTION_FILTER",options:i})}),[c,e]),s=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]),f=Object(g.useCallback)((function(){return Object.keys(q).map((function(e){return{key:e,label:q[e],value:e}}))}),[]),d=Object(g.useCallback)((function(e){l(e)}),[]);return h.a.createElement("div",{style:si.container},h.a.createElement("span",{style:si.label},"Algorithm: "),h.a.createElement(ga,{ref:t,data:f(),style:{marginLeft:10,marginRight:10},onChange:d,defaultValue:"polynomial"}),c&&"airpls"===c&&h.a.createElement(g.Fragment,null,h.a.createElement(ii,{label:"maxIterations:",ref:n,name:"maxIterations",defaultValue:100}),h.a.createElement(ii,{label:"tolerance:",ref:a,name:"tolerance",defaultValue:.001})),c&&"autoPolynomial"===c&&h.a.createElement(ii,{label:"degree:",ref:r,name:"degree",defaultValue:3}),c&&"polynomial"===c&&h.a.createElement(ii,{label:"degree:",ref:r,name:"degree",defaultValue:3}),h.a.createElement("button",{type:"button",style:si.actionButton,onClick:u},"Apply"),h.a.createElement("button",{type:"button",style:si.actionButton,onClick:s},"Cancel"))};function di(){var e=Object(f.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  height: 36px;\n  min-height: 36px;\n  border-width: 1px 1px 0px 1px;\n  border-style: solid;\n  border-color: rgb(213, 213, 213);\n  outline: none;\n  transition: background-color 0.2s ease-in 0s;\n  box-shadow: rgb(255, 255, 255) 0px 1px 0px 0px inset;\n  background: linear-gradient(rgb(255, 255, 255) 5%, rgb(246, 246, 246) 100%)\n    rgb(255, 255, 255);\n  color: rgb(102, 102, 102);\n  font-family: Arial;\n  font-weight: bold;\n  text-decoration: none;\n  text-shadow: rgb(255, 255, 255) 0px 1px 0px;\n\n  .toolOptionsPanel {\n    flex: 10;\n    padding: 0px;\n    margin: 0px;\n    height: 100%;\n  }\n\n  .windowButtonsContainer {\n    flex: 0.5;\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n  }\n\n  .windowButton {\n    width: 40px !important;\n    min-width: 40px !important;\n    background-color: transparent;\n    border: none;\n  }\n  button:focus {\n    outline: 0;\n  }\n"]);return di=function(){return e},e}var pi=Object(b.b)(di()),bi=function(e){var t=e.isFullscreen,n=e.onMaximize,a=et().selectedOptionPanel,r=Object(g.useMemo)((function(){return a===ot.zeroFilling.id?Object(b.c)(Vr,null):a===ot.phaseCorrection.id?Object(b.c)(ti,null):a===ot.peakPicking.id?Object(b.c)(ci,null):a===ot.autoRangesPicking.id?Object(b.c)(ui,null):a===ot.baseLineCorrection.id?Object(b.c)(fi,null):void 0}),[a]);return Object(b.c)("div",{css:pi},Object(b.c)("div",{className:"toolOptionsPanel"},r),Object(b.c)("div",{className:"windowButtonsContainer"},t?"":Object(b.c)("button",{type:"button",onClick:n,className:"windowButton"},Object(b.c)(Lt.s,null))))};bi.defaultProps={onMaximize:function(){return null}};var mi=bi,gi=!1,hi=function(e){var t=e.parentRef,n=et().keysPreferences,a=Rt(),r=Object(x.d)(),i=Object(g.useCallback)((function(e){"input"!==e.target.localName&&e.keyCode>=49&&e.keyCode<=57&&(gi?e.shiftKey?(a({type:"SET_KEY_PREFERENCES",keyCode:e.keyCode}),r.show("Configuration Reset")):n&&n[e.keyCode]?a({type:"APPLY_KEY_PREFERENCES",keyCode:e.keyCode}):(a({type:"SET_KEY_PREFERENCES",keyCode:e.keyCode}),r.show("Configuration saved")):r.show("The mouse cursor must be over the NMR displayer to use save configuration shortcuts  "))}),[a,n,r]),o=Object(g.useCallback)((function(){gi=!0}),[]),c=Object(g.useCallback)((function(){gi=!1}),[]);return Object(g.useEffect)((function(){var e=t?t.current:null;return t&&(e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",c)),function(){e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",c)}}),[o,c,t]),Object(g.useEffect)((function(){return document.addEventListener("keydown",i,!1),function(){document.removeEventListener("keydown",i,!1)}}),[i]),null},vi=n(29),yi=n(14),Oi=n(20),xi={container:{margin:"25px"},header:{backgroundColor:"#ffffff",padding:"20px",borderRadius:"10px",fontSize:"30px",textAlign:"center"},body:{whiteSpace:"pre-wrap",backgroundColor:"white",padding:"20px",borderRadius:"10px",color:"red"}},ji=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(vi.a)(this,Object(yi.a)(t).call(this,e))).state={error:null,errorInfo:null},n}return Object(Oi.a)(t,e),Object(S.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?h.a.createElement("div",{style:xi.container},h.a.createElement("p",{style:xi.header},"Something went wrong."),h.a.createElement("details",{style:xi.body},this.state.error&&this.state.error.toString(),h.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),t}(h.a.Component),ki=n(707),Ei=n(708),Ci=Object(g.createContext)();function wi(e){var t=e.children,n=e.className,a=e.style,r=e.noPropagation,i=Object(g.useState)(null),o=Object(p.a)(i,2),c=o[0],l=o[1],u=Object(g.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;l({x:n,y:a}),r&&e.stopPropagation()}),[r]),s=Object(g.useCallback)((function(e){l(null),r&&e.stopPropagation()}),[r]);return h.a.createElement(Ci.Provider,{value:c},h.a.createElement("div",{className:n,style:a,onMouseMove:u,onMouseLeave:s},t))}var Si=Object(g.createContext)(),Pi={step:"initial",brush:{start:null,end:null}},Di=[],Ii=1;function Ti(e){var t=e.children,n=e.className,a=e.style,r=e.onBrush,i=e.onZoom,o=e.onDoubleClick,c=e.onClick,l=e.noPropagation,u=et(),s=u.zoomFactor,f=u.integralZoomFactor,d=u.selectedTool,b=Object(g.useReducer)(Ai,Pi),m=Object(p.a)(b,2),v=m[0],y=m[1],O=Object(g.useState)(),x=Object(p.a)(O,2),j=x[0],k=x[1];Object(g.useEffect)((function(){Ii=d===ot.integral.id?f.scale:s.scale}),[d]);var E=Object(g.useCallback)((function(e){return l&&e.stopPropagation(),y({type:"DOWN",shiftKey:e.shiftKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,boundingRect:e.currentTarget.getBoundingClientRect()}),k(e.timeStamp),!1}),[l]),C=Object(g.useCallback)((function(e){var t=e.timeStamp,n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.x,r=e.clientY-n.y,i=Xt.a.debounce((function(){t-j<=150&&1===Di.length&&c({x:a,y:r}),Di=[]}),200);Di.push(i),i(),Di.length>1&&(Xt.a.map(Di,(function(e){return e.cancel()})),Di=[],o(e))}),[j,c,o]),w=Object(g.useCallback)((function(e){return((e=+e)||1/e)<0}),[]),S=Object(g.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t=1===Math.abs(e.deltaY)?Math.abs(e.deltaY):Math.abs(e.deltaY)/100,n=1===e.deltaMode?t<=3?.01:.05*e.deltaMode:e.deltaMode?1:t<=3?.01:.05*t,a=w(e.deltaY)?"up":"down",r=Ii;(r="up"===a?Ii+n:Ii-n)>=0||0===r?(i({scale:r}),Ii=r):(i({scale:0}),Ii=r)}),[w,i]);return Object(g.useEffect)((function(){"end"===v.step&&(r(v),y({type:"DONE"}))}),[r,v]),Object(g.useEffect)((function(){var e=function(e){y({type:"MOVE",screenX:e.screenX,screenY:e.screenY})},t=function(e){return y({type:"UP",screenX:e.screenX,screenY:e.screenY}),!1};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[]),h.a.createElement(Si.Provider,{value:v},h.a.createElement("div",{className:n,style:a,onMouseDown:E,onClick:C,onWheel:S},t))}function Ai(e,t){switch(t.type){case"UP":if("brushing"===e.step||"start"===e.step){var n=t.screenX,a=t.screenY;return Object(d.a)({},e,{endX:e.startX+n-e.startScreenX,endY:e.startY+a-e.startScreenY,step:"start"===e.step?"initial":"end"})}return e;case"DOWN":if("initial"===e.step||"end"===e.step){var r=t.screenX,i=t.screenY,o=t.clientX,c=t.clientY,l=t.boundingRect,u=t.shiftKey,s=o-l.x,f=c-l.y;return Object(d.a)({},e,{shiftKey:u,startX:s,startY:f,startScreenX:r,startScreenY:i,step:"start"})}return e;case"MOVE":if("start"===e.step||"brushing"===e.step){var p=t.screenX,b=t.screenY;return Object(d.a)({},e,{step:"brushing",endX:e.startX+p-e.startScreenX,endY:e.startY+b-e.startScreenY})}return e;case"DONE":if("end"===e.step)return Object(d.a)({},e,{step:"initial"});break;default:return e}}var Ri={line:{stroke:"black",strokeOpacity:"1",shapeRendering:"crispEdges",strokeWidth:"1",willChange:"transform"}},Fi=[ot.zoom.id,ot.equalizerTool.id,ot.baseLineCorrection.id],Li=function(){var e=et(),t=e.height,n=e.width,a=e.margin,r=e.selectedTool,i=Object(g.useContext)(Ci),o=Object(g.useContext)(Si);return!Fi.includes(r)||"brushing"===o.step||!i||i.y<a.top||i.left<a.left||i.x>n-a.right||i.y>t-a.bottom||!n||!t?null:h.a.createElement("div",{className:"moving-element",key:"crossLine",style:{cursor:"crosshair",transform:"translate(".concat(-n+i.x,"px, ").concat(-t+i.y,"px)"),position:"absolute",top:0,left:0,pointerEvents:"none",overflow:"visible",width:2*n,height:2*t}},h.a.createElement("svg",{width:2*n,height:2*t},h.a.createElement("line",{style:Ri.line,x1:n,y1:"0",x2:n,y2:2*t,key:"vertical_line"}),h.a.createElement("line",{style:Ri.line,x1:"0",y1:t,x2:2*n,y2:t,key:"horizontal_line"})))},Ni={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px"},_i=[ot.zoom.id,ot.zeroFilling.id,ot.peakPicking.id,ot.integral.id,ot.phaseCorrection.id,ot.baseLineCorrection.id];function Mi(){var e=et(),t=e.width,n=e.height,a=e.selectedTool,r=Object(g.useContext)(Si),i=r.startX,o=r.endX,c=r.step;if(!_i.includes(a)||"brushing"!==c)return null;var l=(o-i)/t;return h.a.createElement("div",{style:Object(d.a)({},Ni,{transform:"translate(".concat(i,"px, 0px) scaleX(").concat(l,")")}),className:"moving-element"},h.a.createElement("svg",{width:t,height:n},h.a.createElement("line",{x1:"0",y1:"0",x2:"0",y2:n,strokeWidth:"8",stroke:"red"}),h.a.createElement("line",{x1:t,y1:"0",x2:t,y2:n,strokeWidth:"8",stroke:"red"}),h.a.createElement("rect",{x:"0",y:"0",width:t,height:n,fill:"gray",opacity:"0.2"})))}var zi={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-30px",pointerEvents:"none",overflow:"visible",userSelect:"none"},Vi=function(){var e=et(),t=e.height,n=e.width,a=e.margin,r=e.scaleX,i=e.data,o=e.activeSpectrum,c=Object(g.useContext)(Ci),l=Object(g.useContext)(Si),u=Object(g.useCallback)((function(e){var t=i.find((function(e){return e.id===o.id}));if(t)return r.invert(e).toFixed(Ir(t.info.nucleus))}),[i,o,r]);return!o||"brushing"===l.step||!c||c.y<a.top||c.left<a.left||c.x>n-a.right||c.y>t-a.bottom?null:h.a.createElement("div",{key:"xLabelPointer",style:Object(d.a)({},zi,{transform:"translate(".concat(c.x,"px, ").concat(c.y,"px)")})},h.a.createElement("span",null,u(c.x)))},Hi=10,Bi="#1f1f1f",Yi=1,Gi=0,Ui=1,Xi=function(){var e=et(),t=e.height,n=e.width,a=e.margin,r=e.activeSpectrum,i=e.scaleX,o=e.scaleY,c=e.data,l=e.mode,u=e.selectedTool,s=e.verticalAlign,f=Object(g.useContext)(Ci),d=Object(g.useContext)(Si),b=Object(g.useState)(),m=Object(p.a)(b,2),v=m[0],y=m[1];return Object(g.useEffect)((function(){var e=function(e,t){if(r&&f&&u===ot.peakPicking.id){var n=[i.invert(t.x-e),i.invert(t.x+e)].sort((function(e,t){return e-t})),a=c.find((function(e){return e.id===r.id})),l=a.x.findIndex((function(e){return e>=n[1]}))-1,d=a.x.findIndex((function(e){return e>=n[0]})),p=a.y.slice(d,l);if(p&&p.length>0){var b=Object(F.a)(p),m=p.findIndex((function(e){return e===b})),g=a.x[d+m];return{x:i(g),y:o(r.id)(b)-(r?s.flag?s.stacked?(r.index+1)*s.value:0:s.value:0),xIndex:d+m}}}return null}(10,f);y(e)}),[r,c,l,f,i,o,u,s]),u!==ot.peakPicking.id||!v||!r||"brushing"===d.step||!f||f.y<a.top||f.left<a.left||f.x>n-a.right||f.y>t-a.bottom?null:h.a.createElement("div",{key:"peakPointer",style:{cursor:"crosshair",transform:"translate(".concat(v.x,"px, ").concat(v.y,"px)"),transformOrigin:"top left",position:"absolute",top:-(Hi+Ui),left:-(Hi+Ui),pointerEvents:"none",overflow:"visible"}},h.a.createElement("svg",{width:2*Hi+2*Ui,height:2*Hi+2*Ui},h.a.createElement("circle",{cx:Hi+Ui,cy:Hi+Ui,r:Hi,stroke:Bi,strokeWidth:Yi,fillOpacity:Gi}),h.a.createElement("line",{x1:Hi+Ui,y1:Ui,x2:Hi+Ui,y2:2*Hi+Ui,stroke:Bi,strokeWidth:Yi}),h.a.createElement("line",{x1:Ui,y1:Hi+Ui,x2:2*Hi+Ui,y2:Hi+Ui,stroke:Bi,strokeWidth:Yi})))},Wi={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",width:1,backgroundColor:"red"},Ki=function(){var e=et(),t=e.height,n=e.selectedTool,a=e.pivot,r=e.scaleX;return ot.phaseCorrection.id!==n?null:h.a.createElement("div",{style:Object(d.a)({},Wi,{transform:"translate(".concat(r(a),"px, 0px)"),height:t})})};function Zi(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  outline: 10px dashed rgba(0, 0, 0, 0.3);\n  outline-offset: -10px;\n\n  p {\n    padding: 15px 30px;\n    background-color:rgba(0, 0, 0, 0.5);\n    border-radius: 39px;\n    color: white;\n    font-size: x-large;\n    font-weight: bold;\n\n  }\n}\n"]);return Zi=function(){return e},e}var qi=Object(b.b)(Zi()),Ji=function(e){var t=e.isEmpty;return void 0===t||t?Object(b.c)("div",{css:qi},Object(b.c)("p",null,"Drag and drop here a Jcamp or NMRium file")):null};function $i(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return $i=function(){return e},e}var Qi=Object(b.b)($i()),eo=function(e){var t=e.isLoading,n=void 0===t||t,a=et().data,r=Object(g.useState)(!1),i=Object(p.a)(r,2),o=i[0],c=i[1];return n||setTimeout((function(){c(!0)}),500),Object(b.c)(g.Fragment,null,n&&Object(b.c)("div",{css:Qi},Object(b.c)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3"},Object(b.c)("g",{fill:"#61DAFB"},Object(b.c)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(b.c)("path",{d:"M520.5 78.1z"}))),Object(b.c)("p",null,"Loading ...")),o&&!n&&Object(b.c)(Ji,{isEmpty:a&&0===a.length}))};function to(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n  }\n"]);return to=function(){return e},e}var no=Object(b.b)(to()),ao=Object(g.memo)((function(e){var t=e.frequency,n=Object(g.useContext)(Ci),a=et(),r=a.scaleX,i=a.scaleY,o=a.margin,c=a.width,l=a.height,u=a.activeSpectrum;if(!u||!n||n.y<o.top||n.left<o.left||n.x>c-o.right||n.y>l-o.bottom)return Object(b.c)("div",{css:no});var s=t;return Object(b.c)("div",{css:no},Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," X :"),Object(b.c)("span",{className:"value"},r.invert(n.x).toFixed(2)),Object(b.c)("span",{className:"unit"},"ppm")),s&&Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," X :"),Object(b.c)("span",{className:"value"},(r.invert(n.x)*s).toFixed(2)),Object(b.c)("span",{className:"unit"},"Hz")),Object(b.c)("div",null,Object(b.c)("span",{className:"label"}," Y :"),Object(b.c)("span",{className:"value"},i(u.id).invert(n.y).toFixed(2))))})),ro=n(1),io=n.n(ro);function oo(){var e=Object(f.a)(["\n  -webkit-clip-path: url('#clip');\n  clip-path: url('#clip');\n\n  path {\n    stroke-width: 1.5;\n    fill: none;\n    // stroke-linejoin: round;\n    // stroke-linecap: round;\n    // will-change: transform;\n  }\n"]);return oo=function(){return e},e}var co=Object(b.b)(oo()),lo=function(){var e=et(),t=e.xDomain,n=e.scaleX,a=e.scaleY,r=e.verticalAlign,i=e.activeSpectrum,o=e.data,c=Object(g.useMemo)((function(){function e(e){var r=e.id,i=e.x,o=e.y;if(i&&o){var c=T.c.reduce(e,{from:t[0],to:t[1]}),l=a(r),u="M ".concat(n(c.x[0])," ").concat(l(c.y[0])," ");return u+=c.x.slice(1).reduce((function(e,t,a){return e+=" L ".concat(n(t)," ").concat(l(c.y[a+1]))}),"")}return null}function c(e){return r.flag?r.stacked?e*r.value:0:r.value}return o&&o.filter((function(e){return!0===e.isVisible&&!0===e.isVisibleInDomain})).map((function(t,n){return Object(b.c)("path",{className:"line",key:t.id,stroke:t.color,fill:"none",style:{opacity:(a=t.id,null===i||a===i.id?1:.2)},d:e(t),transform:"translate(0,-".concat(c(n+1),")")});var a}))}),[i,o,n,a,r.flag,r.stacked,r.value,t]);return Object(b.c)("g",{css:co,clipPath:"url(#clip)"},c)};lo.whyDidYouRender=!0;var uo=lo;lo.contextTypes={width:io.a.number,height:io.a.number,data:io.a.object,margin:io.a.shape({top:io.a.number.isRequired,right:io.a.number.isRequired,bottom:io.a.number.isRequired,left:io.a.number.isRequired}),xDomain:io.a.array,yDomain:io.a.array,getScale:io.a.func};var so=n(694),fo=n.n(so);function po(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  fill: #ff6f0057;\n\n  .target {\n    visibility: visible;\n  }\n"]);return po=function(){return e},e}function bo(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n\n  :hover .target {\n    visibility: visible !important;\n    cursor: pointer;\n  }\n  .highlight {\n    fill: transparent;\n  }\n  .target {\n    visibility: hidden;\n  }\n"]);return bo=function(){return e},e}var mo=Object(b.b)(bo()),go=Object(b.b)(po()),ho=function(e){var t=et(),n=t.scaleX,a=t.height,r=t.margin,i=t.mode,o=e.spectrumID,c=e.integralData,l=e.from,u=e.to,s=e.integralID,f=Object(g.useState)(!1),d=Object(p.a)(f,2),h=d[0],v=d[1],y=Object(g.useState)(!1),O=Object(p.a)(y,2),x=O[0],j=O[1],k=Object(Je.b)([s]),E=Object(g.useMemo)((function(){return c?m.c(c.x):[]}),[c]),C=Rt(),w=Object(g.useCallback)((function(){C({type:"DELETE_INTEGRAL",integralID:s,spectrumID:o})}),[C,s,o]);var S=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),v(!0)}),[]),P=Object(g.useCallback)((function(){}),[]),D=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),v(!1);var t="RTL"===i?[n.invert(e.layerX),u]:[u,n.invert(e.layerX)];t[1]>t[0]?C({type:"RESIZE_INTEGRAL",integral:{from:t[0],to:t[1],id:s}}):C({type:"RESIZE_INTEGRAL",integral:{from:l,to:u,id:s}})}),[C,l,n,s,i,u]),I=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),j(!0)}),[]),T=Object(g.useCallback)((function(){}),[]),A=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),j(!1);var t="RTL"===i?[l,n.invert(e.layerX)]:[n.invert(e.layerX),l];t[1]>t[0]?C({type:"RESIZE_INTEGRAL",integral:{from:t[0],to:t[1],id:s}}):C({type:"RESIZE_INTEGRAL",integral:{from:l,to:u,id:s}})}),[C,l,n,s,i,u]);return Object(b.c)(g.Fragment,null,Object(b.c)("svg",Object.assign({css:k.isActive?go:mo,"data-no-export":"true"},k.onHover),Object(b.c)("rect",{x:n(E[1]),y:"0",width:n(E[0])-n(E[1]),height:"100%",className:"highlight"}),Object(b.c)(fo.a,{axis:"x",defaultPosition:{x:n(E[0]),y:0},position:{x:n(E[0]),y:0},scale:1,onStart:S,onDrag:P,onStop:D},Object(b.c)("rect",{cursor:"ew-resize",width:h?1:6,fill:"red",height:a+r.top,style:{fillOpacity:h?1:0}})),Object(b.c)(fo.a,{axis:"x",defaultPosition:{x:n(E[1]),y:0},position:{x:n(E[1]),y:0},scale:1,onStart:I,onDrag:T,onStop:A},Object(b.c)("rect",{cursor:"ew-resize",width:x?1:6,fill:"red",height:a+r.top,style:{fillOpacity:x?1:0}})),Object(b.c)((function(){return Object(b.c)("svg",{className:"target",x:n(E[1])-20,y:a-r.bottom-20,onClick:w,"data-no-export":"true"},Object(b.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(b.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"}))}),null)))},vo=function(e){var t=e.x,n=e.y,a=e.from,r=e.to,i=e.xDomain,o=e.scaleY,c=e.scaleX,l=e.isActive,u=e.integralID,s=e.spectrumID,f=Object(g.useState)(),d=Object(p.a)(f,2),b=d[0],m=d[1];Object(g.useEffect)((function(){var e=T.c.integral({x:t,y:n},{from:a,to:r,reverse:!0});m(e)}),[a,r,t,n]);var v=Object(g.useCallback)((function(){if(b&&o){var e=T.c.reduce(b,{from:i[0],to:i[1],nbPoints:200,optimize:!0}),t="M ".concat(c(e.x[0])," ").concat(o(e.y[0]));return t+=e.x.slice(1).map((function(t,n){return" L ".concat(c(t)," ").concat(o(e.y[n]))})).join("")}return""}),[b,c,o,i]);return h.a.createElement(g.Fragment,null,h.a.createElement("path",{className:"line",stroke:"black",fill:"none",style:{transformOrigin:"center top",opacity:l?1:.2},d:v()}),h.a.createElement(ho,{spectrumID:s,integralID:u,integralData:b,from:a,to:r,scaleY:o}))};function yo(){var e=Object(f.a)(["\n  -webkit-clip-path: url('#clip');\n  clip-path: url('#clip');\n\n  path {\n    stroke-width: 1.5;\n    fill: none;\n    // stroke-linejoin: round;\n    // stroke-linecap: round;\n    // will-change: transform;\n  }\n"]);return yo=function(){return e},e}var Oo=Object(b.b)(yo()),xo=function(){var e=et(),t=e.xDomain,n=e.scaleX,a=e.activeSpectrum,r=e.data,i=e.height,o=e.margin,c=e.integralsYDomains,l=Object(g.useMemo)((function(){return a&&c[a.id]?m.e(c[a.id],[i-(o.bottom+.3*i),o.top]):null}),[a,i,c,o]),u=Object(g.useMemo)((function(){return r&&r[0]&&r.filter((function(e){return!0===e.isVisible&&!0===e.isVisibleInDomain})).map((function(e){return e.integrals&&e.integrals.values&&e.integrals.values.map((function(r){return Object(b.c)("g",{key:r.id},Object(b.c)(vo,{spectrumID:e.id,integralID:r.id,from:r.from,to:r.to,x:e.x,y:e.y,isActive:(i=e.id,null===a||i===a.id),xDomain:t,scaleY:l,scaleX:n}));var i}))}))}),[a,r,n,l,t]);return Object(b.c)("g",{css:Oo,clipPath:"url(#clip)"},u)},jo=xo;function ko(){var e=Object(f.a)(["\n  user-select: none;\n\n  line {\n    stroke: rgb(104, 104, 104);\n    stroke-opacity: 0.2;\n    shape-rendering: crispEdges;\n    stroke-dasharray: 3;\n    stroke-width: 1;\n    user-select: none;\n  }\n\n  path {\n    stroke-width: 0;\n  }\n"]);return ko=function(){return e},e}function Eo(){var e=Object(f.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"]);return Eo=function(){return e},e}xo.contextTypes={width:io.a.number,height:io.a.number,data:io.a.object,margin:io.a.shape({top:io.a.number.isRequired,right:io.a.number.isRequired,bottom:io.a.number.isRequired,left:io.a.number.isRequired}),xDomain:io.a.array,yDomain:io.a.array,getScale:io.a.func};var Co=Object(b.b)(Eo()),wo=Object(b.b)(ko()),So=function(e){var t=e.label,n=e.show,a=e.showGrid,r=e.mode,i=et(),o=i.xDomain,c=i.scaleX,l=i.height,u=i.width,s=i.margin,f=Object(g.useRef)(),d=Object(g.useRef)();t=t||("RTL"===r?"\u03b4 [ppm]":"time [s]");var p=m.a().ticks(8).tickFormat(m.d("0")),v=m.a().ticks(10).tickSize(-(l-s.top-s.bottom)).tickFormat("");Object(g.useEffect)((function(){if(n){var e="RTL"===r?[u-s.right,s.left]:[s.left,u-s.right],t=m.e([o[0],o[1]],e);m.f(f.current).call(p.scale(t)),m.f(d.current).call(v.scale(t))}}),[v,s.left,s.right,r,n,u,p,o]),Object(g.useEffect)((function(){n&&(m.f(f.current).call(p.scale(c.domain(o))),m.f(d.current).call(v.scale(c.domain(o))))}),[v,c,n,p,o]);var y=Object(g.useMemo)((function(){return n&&!0===n&&Object(b.c)("g",{className:"x",css:Co,transform:"translate(0,".concat(l-s.bottom,")"),ref:f},Object(b.c)("text",{fill:"#000",x:u-60,y:"20",dy:"0.71em",textAnchor:"end"},t))}),[l,t,s.bottom,n,u]),O=Object(g.useMemo)((function(){return a&&!0===a&&Object(b.c)("g",{css:wo,className:"grid",ref:d,transform:"translate(0,".concat(l-s.bottom,")")})}),[a,l,s.bottom]);return u&&l?Object(b.c)(h.a.Fragment,null,y,O):null},Po=So;function Do(){var e=Object(f.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n"]);return Do=function(){return e},e}So.contextTypes={width:io.a.number,height:io.a.number,margin:io.a.shape({top:io.a.number.isRequired,right:io.a.number.isRequired,bottom:io.a.number.isRequired,left:io.a.number.isRequired}),showGrid:io.a.bool,show:io.a.bool,label:io.a.string,isFID:io.a.bool},So.defaultProps={showGrid:!1,show:!0,label:"",isFID:!0};var Io=Object(b.b)(Do()),To=function(e){var t=e.show,n=e.label,a=Object(g.useRef)(),r=et(),i=r.yDomain,o=r.scaleY,c=r.getScale,l=r.margin,u=r.verticalAlign;return Object(g.useEffect)((function(){if(t&&i){var e=m.b().ticks(10).tickFormat(m.d("~s"));m.f(a.current).call(e.scale(o))}}),[t,i,c,o]),Object(g.useMemo)((function(){return t&&!0===t&&Object(b.c)(g.Fragment,null,Object(b.c)("g",{className:"y",css:Io,transform:"translate(".concat(l.left+50,",-").concat(u,")"),ref:a},Object(b.c)("text",{fill:"#000",x:-(l.top+20),y:-(l.left-5),dy:"0.71em",transform:"rotate(-90)",textAnchor:"end"},n)))}),[n,l.left,l.top,t,u])},Ao=To;function Ro(){var e=Object(f.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  text,\n  input {\n    -webkit-user-select: none; /* Safari 3.1+ */\n    -moz-user-select: none; /* Firefox 2+ */\n    -ms-user-select: none; /* IE 10+ */\n    user-select: none; /* Standard syntax */\n  }\n\n  input[type='number']::-webkit-outer-spin-button,\n  input[type='number']::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  .delete-bt {\n    background-color: red;\n    color: white;\n    border: 0px;\n    border-radius: 15px;\n    padding: 0px;\n    width: 15px;\n    height: 15px;\n    border: 15px;\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .notification-input {\n    width: calc(100% - 10px) !important;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n\n  .notification-input-normal {\n    opacity: 1;\n    left: 4px;\n    position: absolute;\n    font-size: 10px;\n    outline: none;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n    background-color: transparent;\n  }\n\n  .notification-input-normal input:focus {\n    outline: none;\n    background-color: white;\n  }\n\n  .input-over {\n    background-color: white;\n    outline: none;\n  }\n\n  .notification-label {\n    display: none;\n  }\n\n  .notification-group-over {\n    z-index: 9999999999;\n  }\n\n  .notification-group {\n    z-index: 1;\n  }\n\n  .notifcate-selected {\n    opacity: 0;\n  }\n\n  input[type='number']::-webkit-inner-spin-button,\n  input[type='number']::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"]);return Ro=function(){return e},e}To.contextTypes={showGrid:io.a.bool,show:io.a.bool,label:io.a.string},To.defaultProps={showGrid:!1,show:!0,label:""};var Fo=Object(b.b)(Ro()),Lo=function(e){var t=e.xIndex,n=e.id,a=e.spectrumID,r=e.x,i=e.y,o=e.value,c=e.color,l=e.isActive,u=e.decimalFraction,s=Object(g.useRef)(),f=Object(g.useState)(!1),d=Object(p.a)(f,2),m=d[0],h=d[1],v=Object(g.useState)(o),y=Object(p.a)(v,2),O=y[0],x=y[1],j=Object(g.useState)({width:0,height:0}),k=Object(p.a)(j,2),E=k[0],C=k[1],w=Object(g.useState)({id:null,flag:!1}),S=Object(p.a)(w,2),P=S[0],D=S[1],I=Object(Je.b)([n]),T=Rt(),A=Object(g.useCallback)((function(e){return T({type:"SHIFT_SPECTRUM",shiftValue:e.shiftValue})}),[T]),R=Object(g.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation(),T({type:"DELETE_PEAK_NOTATION",data:t})}),[T]);Object(g.useLayoutEffect)((function(){var e=s.current.getBBox();C({width:e.width,height:e.height})}),[m]),Object(g.useEffect)((function(){x(o)}),[o]);var F=Object(g.useCallback)((function(e){if("Enter"===e.key){var n=parseFloat(e.target.value),a=parseFloat(o),r=parseFloat(e.target.value)-parseFloat(o);A({id:t,value:n,oldValue:a,shiftValue:r}),e.target.blur(),h(!1)}else 27===e.keyCode&&(x(o),e.target.blur(),h(!1))}),[o,A,t]),L=Object(g.useCallback)((function(e){x(e.target.value)}),[]),N=Object(g.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),h(!0),!1}),[]),_=Object(g.useCallback)((function(e){D({id:e,flag:!0})}),[]),M=Object(g.useCallback)((function(){setTimeout((function(){D({id:null,flag:!1})}),200)}),[]);return Object(b.c)(g.Fragment,null,Object(b.c)(b.a,{styles:Fo}),Object(b.c)("g",{id:t,transform:"translate(".concat(r,", ").concat(i,")"),onMouseEnter:function(){_(t),I.show()},onMouseLeave:function(){M(),I.hide()}},Object(b.c)("line",{x1:"0",x2:"0",y1:"0",y2:"-18",stroke:c,strokeWidth:I.isActive?"7px":"1px"}),Object(b.c)("text",{className:"regular-text",ref:s,x:"0",y:-10,dy:"0.1em",dx:"0.35em",fill:"transparent"},m?o:parseFloat(o).toFixed(u)),Object(b.c)("foreignObject",{x:"0",y:-20,dy:"0.1em",dx:"0.35em",width:E.width+20,height:E.height+30,"data-no-export":"true"},Object(b.c)("div",{style:{width:E.width+20,height:E.height,paddingRight:5},xmlns:"http://www.w3.org/1999/xhtml"},Object(b.c)("input",{onClick:N,className:m?"notification-input input-over":"notification-input-normal",style:{width:"inherit",border:m?"1px solid ".concat(c):"0",opacity:l?1:.2,userSelect:"none",color:c},value:m?O:parseFloat(O).toFixed(u),onKeyDown:F,onChange:L,type:"number",disabled:!l}),P.id&&!0===P.flag&&Object(b.c)("button",{type:"button",onClick:function(e){return R(e,{xIndex:t,id:a})},className:"delete-bt",style:{left:E.width,top:E.height+7}},Object(b.c)(Lt.n,null))))))},No=function(){var e=et(),t=e.scaleX,n=e.scaleY,a=e.data,r=e.activeSpectrum,i=e.verticalAlign,o=Object(g.useMemo)((function(){var e=function(e){var t=a.findIndex((function(t){return t.id===e}));return i.flag?i.stacked?(t+1)*i.value:0:i.value};return a&&function(){var e=Object(nt.a)(a);return r?e.sort((function(e,t){return e.id===r.id?1:t.id===r.id?-1:0})):e}().filter((function(e){return!0===e.isVisible&&!0===e.isVisibleInDomain})).map((function(a){return a.peaks&&a.peaks.values&&a.isPeaksMarkersVisible&&h.a.createElement("g",{key:a.id,transform:"translate(0,-".concat(e(a.id),")")},a.peaks.values.map((function(e){var i=e.xIndex,o=e.xShift,c=e.id;return h.a.createElement(Lo,{key:c,x:t(a.x[i]-(o||0)),y:n(a.id)(a.y[i])-5,xIndex:i,id:c,spectrumID:a.id,value:a.x[i],color:"#730000",decimalFraction:Ir(a.info.nucleus),isActive:null!=r&&r.id===a.id})})))}))}),[a,i,r,t,n]);return h.a.createElement("g",{className:"peaks",clipPath:"url(#clip)"},o)};function _o(){var e=Object(f.a)(["\n  .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    display: none;\n    cursor: pointer;\n  }\n  :hover .delete-button {\n    display: block;\n  }\n"]);return _o=function(){return e},e}function Mo(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  :hover .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n    cursor: pointer;\n  }\n  .delete-button {\n    display: none;\n    cursor: pointer;\n  }\n  :hover .delete-button {\n    display: block;\n  }\n"]);return Mo=function(){return e},e}var zo=Object(b.b)(Mo()),Vo=Object(b.b)(_o()),Ho=function(e){var t=e.id,n=e.from,a=e.to,r=e.integral,i=Object(Je.b)([t]),o=et().scaleX,c=Rt(),l=Object(g.useCallback)((function(){c({type:"DELETE_RANGE",rangeID:t})}),[c,t]);return Object(b.c)("g",Object.assign({css:i.isActive?Vo:zo,key:t,transform:"translate(".concat(o(a),",10)")},i.onHover),Object(b.c)((function(){return Object(b.c)(g.Fragment,null,Object(b.c)("svg",{className:"delete-button",x:-20,y:10,onClick:function(){return l()},"data-no-export":"true"},Object(b.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(b.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"})))}),null),Object(b.c)("rect",{x:"0",width:"".concat(o(n)-o(a)),height:"6",className:"range-area",fill:"green"}),Object(b.c)("text",{textAnchor:"middle",x:(o(n)-o(a))/2,y:"20",fontSize:"10",fill:"red"},r.toFixed(1)))},Bo=function(){var e=et().data;return h.a.createElement("g",{clipPath:"url(#clip)"},e&&e[0]&&e.filter((function(e){return!0===e.isVisible&&e.ranges&&e.ranges.values})).map((function(e){return h.a.createElement("g",{key:e.id},e.ranges.values.map((function(e){return h.a.createElement(Ho,{key:e.id,id:e.id,from:e.from,to:e.to,integral:e.integral})})))})))};function Yo(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .zone-area {\n    height: 100%;\n    fill: #b8b8b857;\n    cursor: pointer;\n  }\n  .delete-button {\n    display: none;\n    cursor: pointer;\n  }\n  :hover .delete-button {\n    display: block;\n  }\n"]);return Yo=function(){return e},e}var Go=Object(b.b)(Yo()),Uo=function(){var e=et().baseLineZones,t=et().scaleX,n=Rt(),a=Object(g.useCallback)((function(e){n({type:"DELETE_BASE_LINE_ZONE",id:e})}),[n]),r=function(e){var t=e.id;return Object(b.c)(g.Fragment,null,Object(b.c)("svg",{className:"delete-button",x:-20,y:10,onClick:function(){return a(t)},"data-no-export":"true"},Object(b.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(b.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"})))};return e&&Array.isArray(e)&&e.length>0&&Object(b.c)("g",null,e.map((function(e){return Object(b.c)("g",{key:e.id,transform:"translate(".concat(t(e.to),",0)"),css:Go},Object(b.c)(r,{id:e.id}),Object(b.c)("rect",{x:"0",width:"".concat(t(e.from)-t(e.to)),className:"zone-area"}))})))};var Xo=h.a.forwardRef((function(e){var t=e.mode,n=e.width,a=e.height,r=e.margin;return n&&a?h.a.createElement("svg",{viewBox:"0 0 ".concat(n," ").concat(a),width:n,height:a,id:"nmrSVG"},h.a.createElement("defs",null,h.a.createElement("clipPath",{id:"clip"},h.a.createElement("rect",{width:"".concat(n-r.left-r.right),height:"".concat(a),x:"".concat(r.left),y:"".concat(0)}))),h.a.createElement(uo,null),h.a.createElement(jo,null),h.a.createElement(No,null),h.a.createElement(Bo,null),h.a.createElement(Uo,null),h.a.createElement("g",{className:"container",style:{pointerEvents:"none"}},h.a.createElement(Po,{showGrid:!0,mode:t}),h.a.createElement(Ao,{label:"PPM",show:!1}))):null})),Wo=Object(g.memo)((function(){var e=et(),t=e.selectedTool,n=e.isLoading,a=e.data,r=e.mode,i=e.width,o=e.height,c=e.margin,l=e.activeSpectrum,u=Rt(),s=Object(g.useCallback)((function(e){if(e.shiftKey)switch(t){case ot.integral.id:u(Object(d.a)({type:"ADD_INTEGRAL"},e));break;case ot.peakPicking.id:u(Object(d.a)({type:"ADD_PEAKS"},e))}else switch(t){case ot.baseLineCorrection.id:u({type:"ADD_BASE_LINE_ZONE",zone:{from:e.startX,to:e.endX}});break;default:return void u(Object(d.a)({type:"BRUSH_END"},e))}}),[u,t]),f=Object(g.useCallback)((function(){u({type:"FULL_ZOOM_OUT"})}),[u]),b=Object(g.useCallback)((function(e){switch(t){case ot.integral.id:u({type:"CHANGE_INTEGRAL_ZOOM",zoomFactor:e});break;default:return void u({type:"SET_ZOOM_FACTOR",zoomFactor:e})}}),[u,t]),m=Object(g.useCallback)((function(e){t===ot.peakPicking.id?u({type:"ADD_PEAK",mouseCoordinates:e}):t===ot.phaseCorrection.id&&u({type:"SET_VERTICAL_INDICATOR_X_POSITION",position:e.x})}),[u,t]),v=Object(g.useMemo)((function(){return l?Xt.a.get(a[l.index],"info.frequency"):0}),[l,a]),y=Object(ki.a)((function(){return h.a.createElement(g.Fragment,null,h.a.createElement(eo,{isLoading:n}),a&&a.length>0&&h.a.createElement(Ti,{onBrush:s,onDoubleClick:f,onClick:m,onZoom:b,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"}},h.a.createElement(wi,{style:{width:"100%",height:"100%",position:"absolute"}},h.a.createElement(Li,null),h.a.createElement(Mi,null),h.a.createElement(Vi,null),h.a.createElement(Xi,null),h.a.createElement(Ki,null),h.a.createElement(ao,{frequency:v}),h.a.createElement(Xo,{width:i,height:o,margin:c,mode:r}))))}),[]),O=Object(p.a)(y,2),x=O[0],j=O[1],k=j.width,E=j.height,C=Object(g.useState)(),w=Object(p.a)(C,2),S=w[0],P=w[1];return Object(Ei.a)((function(){return P({width:k,height:E})}),400,[k,E]),Object(g.useEffect)((function(){S&&u(Object(d.a)({type:"SET_DIMENSIONS"},S))}),[u,S]),x}));function Ko(){var e=Object(f.a)(["\n                    background-color: white;\n                    height: 100%;\n                    display: flex;\n                    flex-direction: column;\n                    div:focus {\n                      outline: none !important;\n                    }\n                    button:active,\n                    button:hover,\n                    button:focus,\n                    [type='button']:focus,\n                    button {\n                      outline: none !important;\n                    }\n                  "]);return Ko=function(){return e},e}var Zo={position:x.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:x.c.SCALE,containerStyle:{fontSize:"18px"}},qo={container:{position:"relative",height:"none"},pane1:{maxWidth:"80%",minWidth:"50%"},resizer:{width:10,backgroundColor:"#f7f7f7",cursor:"ew-resize"},pane:{overflow:"hidden"}},Jo=function(e){var t=e.data,n=e.height,a=e.width,r=e.preferences,i=Object(g.useRef)(),o=Object(y.a)(!1),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(O.a)(i,l,{onClose:function(){u(!1)}}),f=Object(g.useState)(!1),h=Object(p.a)(f,2),k=h[0],E=h[1],C=Object(g.useReducer)(It,Dt),w=Object(p.a)(C,2),S=w[0],P=w[1],D=S.xDomain,I=S.yDomain,T=S.width,A=S.height,R=S.yDomains,F=S.mode,L=S.margin,N=S.verticalAlign;Object(g.useEffect)((function(){P({type:"SET_LOADING_FLAG",isLoading:!0}),qe.build(t||{}).then((function(e){P({type:"INITIATE",data:{AnalysisObj:e}})}))}),[t]);var _=Object(g.useMemo)((function(){var e="RTL"===F?[T-L.right,L.left]:[L.left,T-L.right];return m.e(D,e)}),[L.left,L.right,F,T,D]),M=Object(g.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=N.flag&&!N.stacked?A/2:A,n=[];return n=null===e?[0,I[1]]:[0,R[e][1]],m.e(n,[t-L.bottom,L.top])}}),[A,L,N,I,R]),z=Object(g.useCallback)((function(e){E(!1),P({type:"SET_WIDTH",width:e})}),[]);return Object(b.c)(ji,null,Object(b.c)(En,null,Object(b.c)(x.a,Object.assign({template:j.a},Zo),Object(b.c)(At,{value:P},Object(b.c)(Qe,{value:Object(d.a)({height:n,width:a},S,{scaleX:_,scaleY:M,isResizeEventStart:k})},Object(b.c)(hi,{parentRef:i}),Object(b.c)(Je.a,null,Object(b.c)("div",{ref:i,css:Object(b.b)(Ko())},Object(b.c)(mi,{isFullscreen:s,onMaximize:u}),Object(b.c)("div",{style:{flex:1}},Object(b.c)(Gt,null,Object(b.c)(_n,{preferences:r}),Object(b.c)(v.a,{style:qo.container,paneStyle:qo.pane,resizerStyle:qo.resizer,pane1Style:qo.pane1,split:"vertical",defaultSize:"80%",minSize:"80%",onDragFinished:z,onDragStarted:function(){E(!0)}},Object(b.c)(Wo,{tools:!k}),Object(b.c)(Nr,{preferences:r})))))))))))};Jo.defaultProps={height:600,width:800,preferences:{}};t.a=Jo},417:function(e,t){},419:function(e,t){}}]);
//# sourceMappingURL=2.088baff9.chunk.js.map