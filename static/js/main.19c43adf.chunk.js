/*! For license information please see main.19c43adf.chunk.js.LICENSE */
(this["webpackJsonpnmr-displayer"]=this["webpackJsonpnmr-displayer"]||[]).push([[0],{196:function(e){e.exports=JSON.parse('[{"file":"empty","title":"blank"},{"groupName":"General","children":[{"file":"./json-files/1HSpectrum.json","title":"1H spectrum test"},{"file":"./json-files/13CFID.json","title":"13C Spectrum"},{"file":"./json-files/Big13C.json","title":"Big 13C"},{"file":"./json-files/XTC.json","title":"XTC"},{"file":"./json-files/Coffee.json","title":"Coffee"},{"file":"./json-files/CoupledDecoupled13C.json","title":"13C Coupled / Decoupled"},{"file":"./json-files/Dept.json","title":"DEPT"}]},{"groupName":"Simulate","children":[{"file":"./tests/simulated/d1-2-3-4-5-6-7-8.json","title":"\u03b4=1,2,3,4,5,6,7,8"},{"file":"./tests/simulated/d1-2-3-4-5-6-7-8HR.json","title":"\u03b4=1,2,3,4,5,6,7,8 HR"},{"file":"./tests/simulated/d1-1.2_j7.json","title":"\u03b4=1,1.2 J=7"},{"file":"./tests/simulated/d1-2_j7.json","title":"\u03b4=1,2 J=7"},{"file":"./tests/simulated/d1-2-3_j16-10-2.json","title":"\u03b4=1,2,3 J=2,10,16"},{"file":"./tests/simulated/d1-7_j7.json","title":"\u03b4=1,7 J=7"},{"file":"./tests/triangle/low-res.json","title":"Test low resolution"},{"file":"./tests/triangle/high-res.json","title":"Test high resolution"}]}]')},259:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(4),r=n(3),i=n(0),o=n.n(i),l=Object(i.createContext)();function c(e,t){switch(t.type){case"SHOW":var n=Object(r.a)({},e,{highlights:Object(r.a)({},e.highlights)}),a=!0,i=!1,o=void 0;try{for(var l,c=t.payload[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;u in n.highlights?n.highlights[u]++:n.highlights[u]=1}}catch(h){i=!0,o=h}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n.highlighted=Object.keys(n.highlights),n;case"HIDE":var s=Object(r.a)({},e,{highlights:Object(r.a)({},e.highlights)}),d=!0,f=!1,p=void 0;try{for(var b,m=t.payload[Symbol.iterator]();!(d=(b=m.next()).done);d=!0){var g=b.value;g in s.highlights&&(s.highlights[g]--,0===s.highlights[g]&&delete s.highlights[g])}}catch(h){f=!0,p=h}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}return s.highlighted=Object.keys(s.highlights),s;default:throw new Error("unknown action type: ".concat(t.type))}}var u={highlights:{},highlighted:[]};function s(e){var t=Object(i.useReducer)(c,u),n=Object(a.a)(t,2),r=n[0],s=n[1],d=Object(i.useMemo)((function(){return{highlight:r,dispatch:s}}),[r]);return o.a.createElement(l.Provider,{value:d},e.children)}function d(e){if(!Array.isArray(e))throw new Error("highlights must be an array");var t=Object(i.useMemo)((function(){var t=[],n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;if("string"!==typeof l&&"number"!==typeof l)throw new Error("highlight key must be a string or number");t.push(String(l))}}catch(c){a=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return t}),[e]),n=Object(i.useContext)(l),a=Object(i.useMemo)((function(){return n.highlight.highlighted.some((function(e){return t.includes(e)}))}),[n.highlight.highlighted,t]),r=Object(i.useCallback)((function(){n.dispatch({type:"SHOW",payload:t})}),[n,t]),o=Object(i.useCallback)((function(){n.dispatch({type:"HIDE",payload:t})}),[n,t]);return{isActive:a,show:r,hide:o,onHover:{onMouseEnter:r,onMouseLeave:o}}}},302:function(e,t,n){e.exports=n.p+"static/media/logo-white.eec7c7f6.svg"},332:function(e,t,n){e.exports=n(673)},428:function(e,t){},430:function(e,t){},670:function(e,t,n){},671:function(e,t,n){},672:function(e,t,n){},673:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"id",(function(){return oe})),n.d(a,"name",(function(){return le})),n.d(a,"apply",(function(){return ce})),n.d(a,"isApplicable",(function(){return ue})),n.d(a,"reduce",(function(){return se}));var r={};n.r(r),n.d(r,"id",(function(){return de})),n.d(r,"name",(function(){return fe})),n.d(r,"apply",(function(){return pe})),n.d(r,"isApplicable",(function(){return be})),n.d(r,"reduce",(function(){return me}));var i={};n.r(i),n.d(i,"id",(function(){return he})),n.d(i,"name",(function(){return ve})),n.d(i,"apply",(function(){return ye})),n.d(i,"isApplicable",(function(){return Oe})),n.d(i,"reduce",(function(){return xe}));var o={};n.r(o),n.d(o,"id",(function(){return je})),n.d(o,"name",(function(){return ke})),n.d(o,"apply",(function(){return Ee})),n.d(o,"isApplicable",(function(){return Ce})),n.d(o,"reduce",(function(){return we}));var l={};n.r(l),n.d(l,"id",(function(){return Se})),n.d(l,"name",(function(){return De})),n.d(l,"apply",(function(){return Te})),n.d(l,"isApplicable",(function(){return Pe})),n.d(l,"reduce",(function(){return Ae}));var c={};n.r(c),n.d(c,"id",(function(){return Ie})),n.d(c,"name",(function(){return Re})),n.d(c,"apply",(function(){return Fe})),n.d(c,"isApplicable",(function(){return Le})),n.d(c,"reduce",(function(){return Me}));var u={};n.r(u),n.d(u,"id",(function(){return Ne})),n.d(u,"name",(function(){return _e})),n.d(u,"apply",(function(){return ze})),n.d(u,"isApplicable",(function(){return He})),n.d(u,"reduce",(function(){return Ve}));var s={};n.r(s),n.d(s,"id",(function(){return Be})),n.d(s,"name",(function(){return Ye})),n.d(s,"apply",(function(){return Ue})),n.d(s,"isApplicable",(function(){return Ge})),n.d(s,"reduce",(function(){return Xe}));var d=n(0),f=n.n(d),p=n(13),b=n.n(p),m=n(101),g=n(60);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var h=n(3),v=n(10),y=n(11),O=n(30),x=n(25),j=n(45),k=n(129),E=n(128),C=n(89);function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t,i=[];for(var o in-1!==a&&r[a]&&(r[a]=f.a.cloneElement(r[a],{},i)),e){if(e[o].children&&Array.isArray(e[o].children)){var l=f.a.createElement(C.b,{key:o+n,title:e[o].groupName});return r.push(l),w(e[o].children,r,n,0)}i.push(f.a.createElement(C.a,Object(h.a)({key:o+n},e[o]),e[o].title))}return r}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;l.children&&Array.isArray(l.children)?t=t.concat(D([l],[])):t.push(l)}}catch(c){a=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return t}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t,a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;if(c.children&&Array.isArray(c.children))return D(c.children,n);t.push(c)}}catch(u){r=!0,i=u}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}function T(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\.|\s|\//g,"")}var P,A=n(302),I=n.n(A),R=(n(387),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(O.a)(this,Object(x.a)(t).call(this,e))).state={routes:[]},n.activeRoute.bind(Object(E.a)(n)),n}return Object(j.a)(t,e),Object(y.a)(t,[{key:"activeRoute",value:function(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}},{key:"componentDidMount",value:function(){navigator.platform.indexOf("Win")>-1&&(P=new k.a(this.refs.sidebar,{suppressScrollX:!0,suppressScrollY:!1}));var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value,c=Math.random().toString(36).replace("0.","");l.children&&Array.isArray(l.children)?t.push(w([l],[],c)):t.push(f.a.createElement(C.a,Object(h.a)({key:l.title},l),l.title))}}catch(u){a=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return t}(this.props.routes,[]);this.setState({routes:e})}},{key:"componentWillUnmount",value:function(){navigator.platform.indexOf("Win")>-1&&P.destroy()}},{key:"render",value:function(){var e=this;return f.a.createElement("div",{className:"sidebar","data-color":this.props.backgroundColor},f.a.createElement("div",{className:"logo"},f.a.createElement("a",{className:"simple-text logo-mini"},f.a.createElement("div",{className:"logo-img"},f.a.createElement("img",{src:I.a,alt:"react-logo"}))),f.a.createElement("a",{className:"simple-text logo-normal"},"nmr Team")),f.a.createElement("div",{className:"sidebar-wrapper",ref:"sidebar"},f.a.createElement(C.c,{onClick:function(t){e.props.history.push("/admin/".concat(T(t.item.props.file)))},mode:"inline"},this.state.routes)))}}]),t}(f.a.Component)),F=n(196),L=n(4),M=n(47),N=n(12),_=n.n(N),z=n(5),H=n(2),V=n(9),B=n(303),Y=n(678),U=n(679),G=n(680),X=n(681),W=n(90),J=n(304),K=(n(390),n(131)),q=n(71);function $(e){var t,n={dimension:1,nucleus:[],isFid:!1,isFt:!1,isComplex:!1};if(Z(n,"title",e.TITLE),Z(n,"solvent",e[".SOLVENTNAME"]),Z(n,"pulse",e[".PULSESEQUENCE"]||e[".PULPROG"]||e.$PULPROG),Z(n,"experiment",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===e&&(e={}),"string"===typeof e&&(e={pulse:e});var n=(Array.isArray(t.$SPECTYP)?t.$SPECTYP[0]:t.$SPECTYP||"").replace(/^<(.*)>$/,"$1").toLowerCase();if(n)return n;var a=e.pulse;return"string"!==typeof a?"":(a=a.toLowerCase()).includes("zg")?"1d":a.includes("hsqct")||a.includes("invi")&&(a.includes("ml")||a.includes("di"))?"hsqctocsy":a.includes("hsqc")||a.includes("invi")?"hsqc":a.includes("hmbc")||a.includes("inv4")&&a.includes("lp")?"hmbc":a.includes("cosy")?"cosy":a.includes("jres")?"jres":a.includes("tocsy")||a.includes("mlev")||a.includes("dipsi")?"tocsy":a.includes("noesy")?"noesy":a.includes("roesy")?"roesy":a.includes("dept")?"dept":a.includes("jmod")||a.includes("apt")?"aptjmod":""}(n,e)),Z(n,"temperature",parseFloat(e.$TE||e[".TE"])),Z(n,"frequency",parseFloat(e[".OBSERVEFREQUENCY"])),Z(n,"type",e.DATATYPE),Z(n,"probe",e.$PROBHD),Z(n,"bf1",e.$BF1),Z(n,"sfo1",e.$SFO1),Z(n,"sw",e.$SW),Z(n,"dspfvs",e.$DSPFVS),Z(n,"decim",e.$DECIM),Z(n,"grpdly",e.$GRPDLY),void 0!==e.$FNTYPE&&Z(n,"acquisitionMode",parseInt(e.$FNTYPE,10)),Z(n,"expno",parseInt(e.$EXPNO,10)),n.type&&(n.type.toUpperCase().indexOf("FID")>=0?n.isFid=!0:n.type.toUpperCase().indexOf("SPECTRUM")>=0&&(n.isFt=!0)),e[".NUCLEUS"]?n.nucleus=e[".NUCLEUS"].split(",").map((function(e){return e.trim()})):e[".OBSERVENUCLEUS"]?n.nucleus=[e[".OBSERVENUCLEUS"].replace(/[^A-Za-z0-9]/g,"")]:n.nucleus="string"!==typeof(t=n.experiment)?[]:(t=t.toLowerCase()).includes("jres")?["1H"]:t.includes("hmbc")||t.includes("hsqc")?["1H","13C"]:["1H","1H"],n.dimension=n.nucleus.length,e.SYMBOL){var a=e.SYMBOL.split(/[, ]+/);a.includes("R")&&a.includes("I")&&(n.isComplex=!0)}return e.$DATE&&(n.date=new Date(1e3*e.$DATE).toISOString()),n}function Z(e,t,n){void 0!==n&&("string"===typeof n?(n.startsWith("<")&&n.endsWith(">")&&(n=n.substring(1,n.length-2)),e[t]=n.trim()):e[t]=n)}var Q=n(19),ee=n(37),te=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var a=0;a<e.length;a++){var r=e.charAt(a),i=r.charCodeAt(0);if(255!==t[i])throw new TypeError("".concat(r," is ambiguous"));t[i]=a}var o=e.length,l=e.charAt(0),c=Math.log(256)/Math.log(o);return{encode:function(t){if(0===t.length)return"";for(var n=0,a=0,r=0,i=t.length;r!==i&&0===t[r];)r++,n++;for(var u=(i-r)*c+1>>>0,s=new Uint8Array(u);r!==i;){for(var d=t[r],f=0,p=u-1;(0!==d||f<a)&&-1!==p;p--,f++)d+=256*s[p]>>>0,s[p]=d%o>>>0,d=d/o>>>0;if(0!==d)throw new Error("Non-zero carry");a=f,r++}for(var b=u-a;b!==u&&0===s[b];)b++;for(var m=l.repeat(n);b<u;++b)m+=e.charAt(s[b]);return m}}}("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),ne=8,ae=new Uint8Array(ne);function re(){for(var e=0;e<ne;e++)ae[e]=Math.floor(256*Math.random());return te.encode(ae).substring(0,8)}var ie=n(137);var oe="absolute",le="absolute";function ce(e){if(!ue(e))throw new Error("absolute not applicable on this data");e.data.re=Q.a.absolute(e.data),e.data.im=new Float64Array(0),e.info.isComplex=!1}function ue(e){return!(!e.info.isComplex||e.info.isFid)}function se(){return{once:!1,reduce:null}}var de="baselineCorrection",fe="baseline correction";function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!be(e))throw new Error("baselineCorrection not applicable on this data");var n=t.algorithm,a=void 0===n?"airpls":n;switch(a.toLowerCase()){case"airpls":break;default:throw new Error("baselineCorrection: algorithm unknown: ".concat(a))}}function be(e){return!e.info.isFid}function me(){return{once:!1,reduce:null}}var ge=n(59),he="fft",ve="FFT";function ye(e){if(!Oe(e))throw new Error("fft not applicable on this data");var t=new Float64Array(e.data.re),n=new Float64Array(e.data.im),a=t.length;ge.FFT.init(a),ge.FFT.fft(t,n);var r=new Float64Array(t),i=new Float64Array(n);r.set(t.slice(0,(a+1)/2),(a+1)/2),r.set(t.slice((a+1)/2)),i.set(n.slice(0,(a+1)/2),(a+1)/2),i.set(n.slice((a+1)/2)),e.data.re=r,e.data.im=i,e.data.x=function(e){var t=e.info,n=parseFloat(t.bf1),a=parseFloat(t.sfo1),r=parseFloat(t.sw),i=(a-n)/n*1e6,o=.5*r*a/n,l=e.data.x.length,c=i-o;o=2*o/(l-1);for(var u=new Array(l),s=0;s<l;s++)u[s]=c,c+=o;return u}(e),e.info=Object(h.a)({},e.info,{isFid:!1})}function Oe(e){return!(!e.info.isComplex||!e.info.isFid)}function xe(){return{once:!0,reduce:void 0}}var je="lineBroadening",ke="line broadening";function Ee(e,t){if(!Ce(e))throw new Error("lineBroadening not applicable on this data");for(var n=e.data.re,a=e.data.im,r=e.data.x,i=n.length,o=new Float64Array(i),l=new Float64Array(i),c=(r[i-1]-r[0])/(i-1),u=-t*Math.exp(1),s=Math.exp(u*c),d=Math.exp(u*r[0]),f=0;f<i;f++)o[f]=n[f]*d,l[f]=a[f]*d,d*=s;e.data=Object(h.a)({},e.data,{},{re:o,im:l})}function Ce(e){return!(!e.info.isComplex||!e.info.isFid)}function we(e,t){return{once:!0,reduce:e+t}}var Se="phaseCorrection",De="phase correction";function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Pe(e))throw new Error("phaseCorrection not applicable on this data");var n=t.ph0,a=t.ph1;n*=Math.PI/180,a*=Math.PI/180,Object.assign(e.data,Q.a.phaseCorrection(e.data,n,a))}function Pe(e){return!(!e.info.isComplex||e.info.isFid)}function Ae(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var Ie="shiftX",Re="shift X";function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.x=e.data.x.map((function(e){return e+t}))}function Le(){return!0}function Me(){return{once:!1,reduce:null}}var Ne="zeroFilling",_e="Zero Filling";function ze(e,t){if(!He(e))throw new Error("zeroFilling not applicable on this data");for(var n=e.data,a=n.re,r=n.im,i=n.x,o=new Float64Array(t),l=new Float64Array(t),c=new Float64Array(t),u=Math.min(t,a.length),s=0;s<u;s++)o[s]=a[s],l[s]=r[s],c[s]=i[s];for(var d=i[1]-i[0],f=i[u-1],p=u;p<c.length;p++)f+=d,c[p]=f;e.data=Object(h.a)({},e.data,{},{re:o,im:l,x:c})}function He(e){return!(!e.info.isComplex||!e.info.isFid)}function Ve(e,t){return{once:!0,reduce:e+t}}var Be="digitalFilter",Ye="Digital Filter";function Ue(e){if(!Ge(e))throw new Error("Digital Filter is not applicable on this data");var t=e.info,n=t.grpdly;n||(n=0);var a,r=t.dspfvs,i=t.decim,o=new Float64Array(e.data.re),l=new Float64Array(e.data.im);if(n>0)a=n;else if(r>14)a=0;else{if(!We[r])throw new Error("dspfvs not in lookup table");var c=We[r];if(!c[i])throw new Error("decim not in lookup table");a=c[i]}var u=Math.floor(a+2),s=Math.floor(Math.max(u-6,0)),d=new Float64Array(o.length),f=new Float64Array(l.length);d.set(o.slice(u)),d.set(o.slice(u-s,u),o.length-u),f.set(l.slice(u)),f.set(l.slice(u-s,u),l.length-u),e.data.re=d,e.data.im=f}function Ge(e){return!(!e.info.isComplex||!e.info.isFid)}function Xe(){return{once:!0,reduce:void 0}}var We={10:{2:44.75,3:33.5,4:66.625,6:59.083333333333336,8:68.5625,12:60.375,16:69.53125,24:61.020833333333336,32:70.015625,48:61.34375,64:70.2578125,96:61.505208333333336,128:70.37890625,192:61.5859375,256:70.439453125,384:61.626302083333336,512:70.4697265625,768:61.646484375,1024:70.48486328125,1536:61.656575520833336,2048:70.492431640625},11:{2:46,3:36.5,4:48,6:50.166666666666664,8:53.25,12:69.5,16:72.25,24:70.16666666666667,32:72.75,48:70.5,64:73,96:70.66666666666667,128:72.5,192:71.33333333333333,256:72.25,384:71.66666666666667,512:72.125,768:71.83333333333333,1024:72.0625,1536:71.91666666666667,2048:72.03125},12:{2:46,3:36.5,4:48,6:50.166666666666664,8:53.25,12:69.5,16:71.625,24:70.16666666666667,32:72.125,48:70.5,64:72.375,96:70.66666666666667,128:72.5,192:71.33333333333333,256:72.25,384:71.66666666666667,512:72.125,768:71.83333333333333,1024:72.0625,1536:71.91666666666667,2048:72.03125},13:{2:2.75,3:2.8333333333333335,4:2.875,6:2.9166666666666665,8:2.9375,12:2.9583333333333335,16:2.96875,24:2.9791666666666665,32:2.984375,48:2.9895833333333335,64:2.9921875,96:2.9947916666666665}},Je={absolute:a,baselineCorrection:r,lineBroadening:o,fft:i,phaseCorrection:l,shiftX:c,zeroFilling:u,digitalFilter:s},Ke=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,null,[{key:"applyFilter",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!1,r=!0,i=!1,o=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,s={name:u.name,label:Je[u.name].name,value:u.options},d=e.lookupForFilter(t,u.name);if(d){var f=Je[u.name].reduce(d.value,s.value);f.once?(a||(a=!0),null!=f.reduce&&void 0!==f.reduce&&e.replaceFilter(t,d.id,f.reduce)):e.addFilter(t,s)}else e.addFilter(t,s)}}catch(y){i=!0,o=y}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}if(a)1===n.length&&e.isLastFilter(t,n[0].name)?Je[n[0].name].apply(t,n[0].options):e.reapplyFilters(t);else{var p=!0,b=!1,m=void 0;try{for(var g,h=n[Symbol.iterator]();!(p=(g=h.next()).done);p=!0){var v=g.value;Je[v.name].apply(t,v.options)}}catch(y){b=!0,m=y}finally{try{p||null==h.return||h.return()}finally{if(b)throw m}}}}},{key:"isLastFilter",value:function(e,t){var n=e.filters.findIndex((function(e){return e.name===t}));return e.filters.length===n+1}},{key:"lookupForFilter",value:function(e,t){return e.filters.find((function(e){return e.name===t}))}},{key:"reapplyFilters",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=e.filters[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value,l=o.id,c=o.flag;this.enableFilter(e,l,c)}}catch(u){n=!0,a=u}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}},{key:"enableFilter",value:function(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));for(var r in e.filters[a]=Object(h.a)({},e.filters[a],{flag:n}),e.data=Object(h.a)({},e.data,{},e.source.original),e.info=Object(h.a)({},e.info,{},e.originalInfo),e.filters){var i=e.filters[r];if(e.filters[r]=Object(h.a)({},e.filters[r],{error:null}),i.flag)try{Je[i.name].apply(e,i.value)}catch(o){e.filters[r]=Object(h.a)({},e.filters[r],{error:o.message})}}}},{key:"deleteFilter",value:function(e,t){for(var n in e.filters=e.filters.slice(0),e.filters=e.filters.filter((function(e){return e.id!==t})),e.data=Object(h.a)({},e.data,{},e.source.original),e.info=Object(h.a)({},e.info,{},e.originalInfo),e.filters){var a=e.filters[n];if(e.filters[n]=Object(h.a)({},e.filters[n],{error:null}),a.flag)try{Je[a.name].apply(e,a.value)}catch(r){e.filters[n]=Object(h.a)({},e.filters[n],{error:r.message})}}}},{key:"addFilter",value:function(e,t){var n=re();e.filters=e.filters.slice(0),e.filters.push(Object(h.a)({},t,{id:n,flag:!0}))}},{key:"replaceFilter",value:function(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));e.filters[a]=Object(h.a)({},e.filters[a],{value:n})}}]),e}(),qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(v.a)(this,e),this.id=t.id||re(),this.source=Object.assign({jcamp:null,jcampURL:null,original:[]},t.source),this.display=Object.assign({name:t.display.name||re(),color:"black",isVisible:!0,isPeaksMarkersVisible:!0,isRealSpectrumVisible:!0},t.display),this.info=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1},t.info),this.originalInfo=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1},t.info),this.meta=Object.assign({},t.meta),this.data=Object.assign({x:[],re:[],im:[]},t.data),this.peaks=Object.assign([],t.peaks),this.integrals=Object.assign([],t.integrals),this.filters=Object.assign([],t.filters),this.ranges=Object.assign([],t.ranges),this.preprocessing(),Ke.reapplyFilters(this)}return Object(y.a)(e,[{key:"preprocessing",value:function(){this.info.isFid&&this.applyFilter([{name:Je.digitalFilter.id,options:{}}])}},{key:"setIsRealSpectrumVisible",value:function(e){this.isRealSpectrumVisible=e}},{key:"setPeaks",value:function(e){this.peaks=e}},{key:"getPeaks",value:function(){return this.peaks}},{key:"setRanges",value:function(e){this.ranges=e}},{key:"getRanges",value:function(){return this.ranges}},{key:"addIntegral",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.integrals=this.integrals.slice(0);var t=Q.c.integral({x:this.data.x,y:this.data.re},{from:e[0],to:e[1],reverse:!0}),n=Q.c.integration({x:this.data.x,y:this.data.re},{from:e[0],to:e[1],reverse:!0});this.integrals.push(Object(h.a)({id:re(),from:e[0],to:e[1]},t,{value:n,signalKind:"signal"}))}},{key:"setIntegrals",value:function(e){this.integrals=Object.assign([],e)}},{key:"setIntegral",value:function(e){this.integrals=this.integrals.slice(0);var t=this.integrals.findIndex((function(t){return t.id===e.id}));-1!==t&&(this.integrals[t]=e)}},{key:"getIntegrals",value:function(){return this.integrals}},{key:"getInfo",value:function(){return this.info}},{key:"baseline",value:function(){}},{key:"applyAutoPeakPicking",value:function(e){var t=function(e,t){var n=t.minMaxRatio,a=t.maxNumberOfPeaks,r=e.data.re.map((function(e){return Math.abs(e)})).sort()[Math.floor(e.data.re.length/2)],i=ie.a.fromXY(e.data.x,e.data.re).createPeaks({noiseLevel:3*r,minMaxRatio:n,realTopDetection:!0,maxCriteria:!0,smoothY:!1,sgOptions:{windowSize:7,polynomial:3}});return i.sort((function(e,t){return t.y-e.y})),a&&(i=i.slice(0,a)),i.map((function(t){return{id:re(),xIndex:t.index,xShift:e.data.x[t.index]-t.xShift}}))}(this,e);return this.peaks=t,this.peaks}},{key:"detectRanges",value:function(e){var t=function(e,t){var n=t.minMaxRatio,a=void 0===n?.1:n,r=t.nH,i=void 0===r?100:r,o=t.compile,l=void 0===o||o,c=t.frequencyCluster,u=void 0===c?16:c,s=t.clean,d=void 0===s?null:s,f=t.keepPeaks,p=void 0===f||f,b=e.data.re.map((function(e){return Math.abs(e)})).sort()[Math.floor(e.data.re.length/2)];return ie.a.fromXY(e.data.x,e.data.re).createRanges({noiseLevel:3*b,minMaxRatio:a,realTopDetection:!0,maxCriteria:!0,smoothY:!1,nH:i,compile:l,frequencyCluster:u,clean:d,keepPeaks:p,sgOptions:{windowSize:7,polynomial:3}})}(this,e);return this.ranges=t.map((function(e){return Object(h.a)({id:re()},e)})),this.ranges}},{key:"deletePeak",value:function(e){this.peaks=null==e?[]:this.peaks.filter((function(t){return t.xIndex!==e.xIndex}))}},{key:"deleteRange",value:function(e){this.ranges=null==e?[]:this.ranges.filter((function(t){return t.id!==e}))}},{key:"deleteIntegral",value:function(e){this.integrals=null==e?[]:this.integrals.filter((function(t){return t.id!==e}))}},{key:"applyFilter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ke.applyFilter(this,e)}},{key:"enableFilter",value:function(e,t){Ke.enableFilter(this,e,t)}},{key:"deleteFilter",value:function(e){Ke.deleteFilter(this,e)}},{key:"getReal",value:function(){return{x:this.data.x,y:this.data.re}}},{key:"getImaginary",value:function(){return{x:this.data.x,y:this.data.im}}},{key:"lookupPeak",value:function(e,t){var n=this.data.x.findIndex((function(t){return t>=e})),a=this.data.x.findIndex((function(e){return e>=t}))-1;n>a&&(a=n=a);var r=this.data.re.slice(n,a);if(r&&r.length>0){var i=Object(ee.a)(r),o=r.findIndex((function(e){return e===i}));return{x:this.data.x[n+o+1],y:i,xIndex:n+o+1}}return null}},{key:"checkPeakIsExists",value:function(e){return!!this.peaks.map((function(e){return e.xIndex})).includes(e.xIndex)}},{key:"addPeak",value:function(e){this.peaks=this.peaks.slice(0),this.checkPeakIsExists(e)||this.peaks.push(Object(h.a)({id:re()},e))}},{key:"addPeaks",value:function(e,t){if(e!==t){this.peaks=this.peaks.slice(0);var n=this.lookupPeak(e,t);n&&!this.checkPeakIsExists(n)&&(this.peaks=this.peaks.concat(Object(h.a)({id:re()},n)))}return this.peaks}},{key:"addFilter",value:function(e){Ke.addFilter(this,e)}},{key:"getFilters",value:function(){return this.filters}},{key:"toJSON",value:function(){return{data:this.data,id:this.id,source:{jcamp:this.source.jcamp,jcampURL:this.source.jcampURL,original:this.source.jcampURL?[]:this.source.original},display:this.display,info:this.originalInfo,meta:this.meta,peaks:this.peaks,integrals:this.integrals,ranges:this.ranges,filters:this.filters}}}]),e}(),$e=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,null,[{key:"checkStatus",value:function(e){if(!e.ok)throw new Error("HTTP ".concat(e.status," - ").concat(e.statusText));return e}}]),e}();$e.fromJSON=function(){var e,t,n,a,r=arguments;return _.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:for(e=r.length>0&&void 0!==r[0]?r[0]:[],t=[],n=function(n){var a=e[n];if(null!=a.source.jcamp){var r=$e.fromJcamp(a.source.jcamp,a);t.push(r)}else null!=a.source.jcampURL?t.push($e.loadFileFromURL(a.source.jcampURL).then((function(e){return $e.fromJcamp(e,a)}))):t.push(new qe(Object(h.a)({},a,{data:a.source.original})))},a=0;a<e.length;a++)n(a);return i.abrupt("return",Promise.all(t));case 5:case"end":return i.stop()}}))},$e.loadFileFromURL=function(e){return _.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e).then((function(e){return $e.checkStatus(e)&&e.text()})));case 1:case"end":return t.stop()}}))},$e.fromJcamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(K.convert)(e,{xy:!0,keepRecordsRegExp:/.*/}),a=n.spectra[0]&&n.spectra[0].data&&n.spectra[0].data[0]&&n.spectra[0].data[0].x?n.spectra[0].data[0].x:[],r=n.spectra[0]&&n.spectra[0].data&&n.spectra[0].data[0]&&n.spectra[0].data[0].y?n.spectra[0].data[0].y:[],i=n.spectra[1]&&n.spectra[1].data&&n.spectra[1].data[0]&&n.spectra[1].data[0].y?n.spectra[1].data[0].y:new Array(r.length),o=i?Q.b.sortX({x:a,re:r,im:i}):Q.c.sortX({x:a,re:r}),l=$(n.info);Array.isArray(l.nucleus)&&(l.nucleus=l.nucleus[0]);var c=new qe(Object(h.a)({},t,{info:l,meta:n.info,data:o,source:{jcamp:null,jcampURL:null,original:o}}));return c};var Ze=n(309),Qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(v.a)(this,e),this.key=t.key||re(),this.molfile=t.molfile||"";var n=new q.Molecule.fromMolfile(this.molfile),a=n.getMolecularFormula();this.mf=a.formula,this.em=a.absoluteWeight,this.mw=a.relativeWeight,this.svg=n.toSVG(50,50);var r=new Ze.MF(this.mf);this.atoms=r.getInfo().atoms}return Object(y.a)(e,[{key:"toJSON",value:function(){return{molfile:this.molfile}}}]),e}(),et=function e(){Object(v.a)(this,e)};et.fromJSON=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++){var a=q.Molecule.fromMolfile(e[n].molfile),r=a.getFragments(),i=!0,o=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value;t.push(new Qe({molfile:s.toMolfileV3()}))}}catch(d){o=!0,l=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}}return t};var tt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(v.a)(this,e),this.data1d=[],this.molecules=[],this.data1d=t.slice(),this.data2d=[],this.molecules=n.slice(),this.preferences={display:{}}}return Object(y.a)(e,[{key:"addJcampFromURL",value:function(e,t,n){var a;return _.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.a.awrap(fetch(t).then((function(e){return e.text()})));case 2:a=r.sent,this.addJcamp(e,a,n);case 4:case"end":return r.stop()}}),null,this)}},{key:"addJcamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(K.convert)(e,{withoutXY:!0,keepRecordsRegExp:/.*/}),a=$(n.info);1===a.dimension&&this.data1d.push($e.fromJcamp(e,t))}},{key:"addMolfileFromURL",value:function(e){var t;return _.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_.a.awrap(fetch(e).then((function(e){return e.text()})));case 2:t=n.sent,this.addMolfile(t);case 4:case"end":return n.stop()}}),null,this)}},{key:"getMolecules",value:function(){return this.molecules}},{key:"removeMolecule",value:function(e){this.molecules=this.molecules.filter((function(t){return t.key!==e}))}},{key:"addMolfile",value:function(e){var t=q.Molecule.fromMolfile(e).getFragments();this.molecules=Object.assign([],this.molecules);var n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;this.molecules.push(new Qe({molfile:l.toMolfileV3(),svg:l.toSVG(150,150),mf:l.getMolecularFormula().formula,em:l.getMolecularFormula().absoluteWeight,mw:l.getMolecularFormula().relativeWeight}))}}catch(c){a=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}}},{key:"setMolecules",value:function(e){this.molecules=e}},{key:"setMolfile",value:function(e,t){var n=q.Molecule.fromMolfile(e).getFragments();this.molecules=this.molecules.filter((function(e){return e.key!==t}));var a=!0,r=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;this.molecules.push(new Qe({molfile:c.toMolfileV3(),svg:c.toSVG(150,150),mf:c.getMolecularFormula().formula,em:c.getMolecularFormula().absoluteWeight,mw:c.getMolecularFormula().relativeWeight}))}}catch(u){r=!0,i=u}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return this.molecules}},{key:"toJSON",value:function(){return{data1d:this.data1d.map((function(e){return Object(h.a)({},e.toJSON(),{data:{}})})),molecules:this.molecules.map((function(e){return e.toJSON()}))}}},{key:"pushDatum1D",value:function(e){this.data1d.push(e)}},{key:"getDatum1D",value:function(e){return this.data1d.find((function(t){return t.id===e}))}},{key:"getData1d",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.data1d?this.data1d.map((function(t){return{id:t.id,x:t.data.x,y:e?t.data.re:t.data.im,im:t.data.im,name:t.display.name,color:t.display.color,isVisible:t.display.isVisible,isPeaksMarkersVisible:t.display.isPeaksMarkersVisible,isRealSpectrumVisible:t.display.isRealSpectrumVisible,info:t.info,meta:t.meta,peaks:t.peaks,integrals:t.integrals,filters:t.filters}})):[]}},{key:"deleteDatum1DByID",value:function(e){var t=this.data1d.filter((function(t){return t.id!==e}));this.data1d=t.length>0?t:null}}],[{key:"build",value:function(){var t,n,a,r,i=arguments;return _.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},o.next=3,_.a.awrap($e.fromJSON(t.data1d));case 3:return n=o.sent,a=t.data1d?n:[],r=t.molecules?et.fromJSON(t.molecules):[],o.abrupt("return",new e(a,r));case 7:case"end":return o.stop()}}))}}]),e}(),nt=n(259),at=f.a.createContext(),rt=at.Provider;function it(){return Object(d.useContext)(at)}var ot=n(22),lt=n(6),ct=["#FFB300","#803E75","#FF6800","#A6BDD7","#C10020","#CEA262","#817066","#007D34","#F6768E","#00538A","#FF7A5C","#53377A","#FF8E00","#B32851","#F4C800","#7F180D","#93AA00","#593315","#F13A13","#232C16"],ut=function(e){var t=ct.filter((function(t){return!e.includes(t)}));if(t.length>0)return t[0];var n=String("#".concat(Math.random().toString(16).slice(2,8).toUpperCase())).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var a,r,i="#";for(r=0;r<3;r++)a=parseInt(n.substr(2*r,2),16),a=Math.round(Math.min(Math.max(0,a+-.25*a),255)).toString(16),i+="00".concat(a).substr(a.length);return i},st={zoom:{id:"zoom",label:"Zoom",hasOptionPanel:!1,isFilter:!1},peakPicking:{id:"peakPicking",label:"Peak Tool",hasOptionPanel:!0,isFilter:!1},integral:{id:"integral",label:"integral Tool",hasOptionPanel:!1,isFilter:!1},HMove:{id:"HMove",label:"move spectrum horizontal",hasOptionPanel:!1,isFilter:!1},equalizerTool:{id:"equalizerTool",label:"Equalizer Tool",hasOptionPanel:!1,isFilter:!1},autoRangesPicking:{id:"autoRangesPicking",label:"Auto Ranges Picking",hasOptionPanel:!0,isFilter:!1},zeroFilling:{id:Je.zeroFilling.id,label:Je.zeroFilling.name,hasOptionPanel:!0,isFilter:!0},phaseCorrection:{id:Je.phaseCorrection.id,label:Je.phaseCorrection.name,hasOptionPanel:!0,isFilter:!0}},dt=n(48),ft=n(141);function pt(){var e=document.getElementById("svg-container").cloneNode(!0),t=e.getAttribute("width"),n=e.getAttribute("height");e.querySelectorAll('[data-no-export="true"]').forEach((function(e){return e.remove()}));var a="<svg  viewBox='0 0 ".concat(t," ").concat(n,"' width=\"").concat(t,'"  height="').concat(n,'" title="experiments" version="1.1" xmlns="http://www.w3.org/2000/svg">'),r="".concat(a+"<style>.grid line,.grid path{stroke:none;} .regular-text{fill:black} .x path{stroke-width:1px} .x text{\n    font-size: 12px;\n    font-weight: bold;\n  } </style>"+e.innerHTML,"</svg>");return{blob:new Blob([r],{type:"image/svg+xml"}),width:t,height:n}}var bt="ADD_PEAK",mt="ADD_PEAKS",gt="SET_DIMENSIONS",ht="ADD_INTEGRAL",vt="SET_ZOOM_FACTOR",yt="BRUSH_END",Ot="RESET_X_DOMAIN",xt="CHANGE_INTEGRAL_ZOOM",jt="SET_VERTICAL_INDICATOR_X_POSITION",kt=new tt,Et=20;function Ct(e){var t=e.reduce((function(e,t){return e.concat([t.x[0],t.x[t.x.length-1]])}),[]),n=[],a=e.reduce((function(e,t,a){var r=V.c(t.y);return n[a]=r,e.concat(r)}),[]);return{x:V.c(t),y:V.c(a),yDomains:n}}var wt=function(e){var t=e.xDomain,n=e.yDomain,a=e.width,r=e.height,i=e.margin,o="RTL"===e.mode?[a-i.right,i.left]:[i.left,a-i.right];return{x:V.e(t,o),y:V.e(n,[r-i.bottom,i.top])}};function St(e,t,n){if(e&&e.length>0)if(e[0].info.isFid){var a=n/2;t.verticalAlign.flag=!0,t.verticalAlign.value=a,t.verticalAlign.stacked=!1}else t.verticalAlign.flag=!1,t.verticalAlign.value=Et,t.verticalAlign.stacked=!1}var Dt=function(e,t){switch(t.exportType){case"json":!function(e){var t=JSON.stringify(e,void 0,2),n=new Blob([t],{type:"text/plain"});Object(ft.saveAs)(n,"experiment.nmrium")}(kt.toJSON());break;case"svg":!function(){var e=pt().blob;Object(ft.saveAs)(e,"experiments.svg")}();break;case"png":!function(){var e=pt(),t=e.blob,n=e.width,a=e.height;try{var r=document.createElement("canvas");r.width=n,r.height=a;var i=r.getContext("2d");i.fillStyle="white",i.fillRect(0,0,r.width,r.height);var o=new Image,l=URL.createObjectURL(t);o.onload=function(){var e;return _.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:i.drawImage(o,0,0),e=r.toDataURL("image/png",1),Object(ft.saveAs)(e,"experiments.png"),URL.revokeObjectURL(e);case 4:case"end":return t.stop()}}))},o.src=l}catch(c){console.log(c)}}();break;case"copy":!function(){var e=pt(),t=e.blob,n=e.width,a=e.height;try{var r=document.createElement("canvas");r.width=n,r.height=a;var i=r.getContext("2d");i.fillStyle="white",i.fillRect(0,0,r.width,r.height);var o=new Image,l=URL.createObjectURL(t);o.onload=function(){var e;return _.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:i.drawImage(o,0,0),e=r.toDataURL("image/png",1),r.toBlob((function(e){var t=new ClipboardItem(Object(dt.a)({},e.type,e));navigator.clipboard.write([t]).then((function(){console.log("experiment copied.")}),(function(e){console.log(e)}))})),URL.revokeObjectURL(e);case 4:case"end":return t.stop()}}))},o.src=l}catch(c){console.log(c)}}()}return e},Tt=function(e,t){return Object(lt.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum.id,r=e.data.findIndex((function(e){return e.id===a})),i=function(e,t,n){var a=wt(n),r=n.activeSpectrum,i=a.x.invert(t.x-e),o=a.x.invert(t.x+e),l=[];return i>o?(l[0]=o,l[1]=i):(l[0]=i,l[1]=o),kt.getDatum1D(r.id).lookupPeak(l[0],l[1])}(10,t,e);if(-1!==r){var o={xIndex:i.xIndex};e.data[r].peaks?n.data[r].peaks.push(o):n.data[r].peaks=[o],kt.getDatum1D(a).addPeak(o)}}}))};function Pt(e,t,n){var a=t.getReal(),r=e.data.findIndex((function(e){return e.id===n}));e.selectedOptionPanel=null,e.selectedTool=st.zoom.id,e.data[r].x=a.x,e.data[r].y=a.y,e.data[r].filters=t.getFilters(),e.data[r].info=t.getInfo()}var At=function(e,t){return Object(lt.a)(e,(function(n){t?(n.selectedTool=t,st[t].hasOptionPanel?n.selectedOptionPanel=t:n.selectedOptionPanel=null,st[t].isFilter&&function(e,t,n){if(e.tempData=t.data,n===Je.phaseCorrection.id){var a=function(e){var t=e.activeSpectrum,n=e.data,a=t.id,r=n.find((function(e){return e.id===a})),i=Object(ee.a)(r.y),o=r.y.findIndex((function(e){return e===i}));return{xValue:r.x[o],yValue:i,index:o}}(t).xValue;e.pivot=a}else if(e.selectedTool===st.phaseCorrection.id){var r=t.activeSpectrum.id,i=e.data.findIndex((function(e){return e.id===r})),o=kt.getDatum1D(r);o.data.x=t.tempData[i].x,o.data.re=t.tempData[i].y,o.data.im=t.tempData[i].im,e.data[i].x=t.tempData[i].x,e.data[i].y=t.tempData[i].y,e.tempData=null,e.selectedTool=null,Ft(e)}}(n,e,t)):(n.selectedTool=null,st[e.selectedTool].hasOptionPanel&&(n.selectedOptionPanel=null))}))};var It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e}));return n};function Rt(e){e.mode=e.data&&e.data[0]&&e.data[0].info.isFid?"LTR":"RTL"}function Ft(e){var t=Ct(e.data);e.xDomain=t.x,e.yDomain=t.y,e.originDomain=t,e.yDomains=t.yDomains,e.data=e.data.map((function(e){return Object(h.a)({},e,{integralsYDomain:t.y})}))}var Lt={data:null,tempData:null,xDomain:[],yDomain:[],yDomains:[],originDomain:{},selectedTool:st.zoom.id,selectedFilter:null,selectedOptionPanel:null,width:null,height:null,margin:{top:10,right:20,bottom:30,left:0},activeSpectrum:null,mode:"RTL",zoomFactor:null,molecules:[],verticalAlign:{flag:!1,stacked:!1,value:Et},history:{past:[],present:null,future:[],hasUndo:!1,hasRedo:!1},pivot:0,isLoading:!1},Mt=function(e,t){switch(t.type){case"INITIATE":return function(e,t){return Object(lt.a)(e,(function(n){var a=(kt=t.AnalysisObj).getData1d(),r=Ct(a);n.data=a,n.molecules=kt.getMolecules(),n.xDomain=r.x,n.yDomain=r.y,n.originDomain=r,n.yDomains=r.yDomains,n.isLoading=!1,St(a,n,e.height),Rt(n)}))}(e,t.data);case"SET_LOADING_FLAG":return function(e,t){return Object(h.a)({},e,{isLoading:t})}(e,t.isLoading);case"LOAD_JSON_FILE":return function(e,t){return Object(lt.a)(e,(function(e){kt=t.AnalysisObj,e.data=kt.getData1d(),e.molecules=kt.getMolecules(),Ft(e),Rt(e),e.isLoading=!1}))}(e,t.data);case"LOAD_JCAMP_FILE":return function(e,t){return Object(lt.a)(e,(function(e){for(var n=e.data.map((function(e){return e.color})),a=t.length,r=0;r<a;r++){var i=ut(n),o=$e.fromJcamp(t[r].binary.toString(),{display:{name:t[r].name,color:i,isVisible:!0,isPeaksMarkersVisible:!0}});n.push(i),kt.pushDatum1D(o)}e.data=kt.getData1d(),Ft(e),Rt(e),e.isLoading=!1}))}(e,t.files);case"LOAD_MOL_FILE":return function(e,t){return Object(lt.a)(e,(function(e){for(var n=t.length,a=0;a<n;a++)kt.addMolfile(t[a].binary.toString());e.molecules=kt.getMolecules(),e.isLoading=!1}))}(e,t.files);case"EXPORT_DATA":return Dt(e,t);case bt:return Tt(e,t.mouseCoordinates);case mt:return function(e,t){return Object(lt.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum.id,r=e.data.findIndex((function(e){return e.id===a})),i=wt(e),o=i.x.invert(t.startX),l=i.x.invert(t.endX),c=[];if(o>l?(c[0]=l,c[1]=o):(c[0]=o,c[1]=l),-1!==r){var u=kt.getDatum1D(a).addPeaks(c[0],c[1]);n.data[r].peaks=u}}}))}(e,t);case"DELETE_PEAK_NOTATION":return function(e,t){return Object(lt.a)(e,(function(n){var a=e.activeSpectrum,r=a.id,i=a.index,o=kt.getDatum1D(r);o.deletePeak(t),n.data[i].peaks=o.getPeaks()}))}(e,t.data);case ht:return function(e,t){var n=wt(e).x;return Object(lt.a)(e,(function(a){var r=n.invert(t.startX),i=n.invert(t.endX),o=[];if(o=r>i?[i,r]:[r,i],e.activeSpectrum){var l=e.activeSpectrum,c=l.id,u=l.index,s=kt.getDatum1D(c);s.addIntegral(o),a.data[u].integrals=s.getIntegrals(),e.data.integralsYDomain||(a.data[u].integralsYDomain=a.yDomain)}}))}(e,t);case"DELETE_INTEGRAL":return function(e,t){return Object(lt.a)(e,(function(n){var a=t.integralID,r=e.activeSpectrum,i=r.id,o=r.index,l=kt.getDatum1D(i);l.deleteIntegral(a),n.data[o].integrals=l.getIntegrals()}))}(e,t);case"CHANGE_INTEGRAL_DATA":return function(e,t){return Object(lt.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=kt.getDatum1D(r);o.setIntegral(t.data),n.data[i].integrals=o.getIntegrals()}}))}(e,t);case"RESIZE_INTEGRAL":return function(e,t){return Object(lt.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index,o=e.data[i],l=Q.c.integral(o,{from:t.from,to:t.to,reverse:!0}),c=Q.c.integration(o,{from:t.from,to:t.to,reverse:!0}),u=Object(h.a)({},t,{},l,{value:c});if(-1!==i&&o.integrals){var s=o.integrals.findIndex((function(e){return e.id===t.id}));n.data[i].integrals[s]=Object(h.a)({},e.data[i].integrals[s],{},u),kt.getDatum1D(r).setIntegrals(n.data[i].integrals[s])}}}))}(e,t.integral);case"SET_ORIGINAL_DOMAIN":return function(e,t){return Object(lt.a)(e,(function(e){e.originDomain=t}))}(e,t.domain);case"SET_X_DOMAIN":return function(e,t){return Object(lt.a)(e,(function(e){e.xDomain=t}))}(e,t.xDomain);case"SET_Y_DOMAIN":return function(e,t){if(null===e.activeSpectrum){var n=e.yDomains.map((function(e){return[e[0]+(t[0]-e[0]),e[1]+(t[1]-e[1])]}));return Object(h.a)({},e,{yDomain:t,yDomains:n})}var a=e.data.findIndex((function(t){return t.id===e.activeSpectrum.id})),r=Object(ot.a)(e.yDomains);return r[a]=t,Object(h.a)({},e,{yDomains:r})}(e,t.yDomain);case"SET_WIDTH":return function(e,t){return Object(h.a)({},e,{width:t})}(e,t.width);case gt:return function(e,t,n){return Object(h.a)({},e,{width:t,height:n})}(e,t.width,t.height);case"SET_POINTER_COORDINATES":return function(e,t){return Object(h.a)({},e,{pointerCoordinates:t})}(e,t.pointerCoordinates);case"SET_SELECTED_TOOL":return At(e,t.selectedTool);case"RESET_SELECTED_TOOL":return function(e){return Object(lt.a)(e,(function(t){t.selectedOptionPanel=null,t.selectedTool=st.zoom.id,e.tempData&&(t.data=e.tempData,t.tempData=null,Ft(t))}))}(e);case"SET_SELECTED_OPTIONS_PANEL":return function(e,t){return Object(h.a)({},e,{selectedOptionPanel:t})}(e,t.selectedOptionPanel);case"SET_DATA":return function(e,t){return Object(lt.a)(e,(function(e){var n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;kt.pushDatum1D(new qe(l))}}catch(c){a=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}e.data=kt.getData1d(),e.molecules=kt.getMolecules(),e.isLoading=!1,Ft(e),Rt(e)}))}(e,t.data);case"FULL_ZOOM_OUT":return function(e){return Object(lt.a)(e,(function(t){t.xDomain=e.originDomain.x,t.yDomain=e.originDomain.y}))}(e);case"SHIFT_SPECTRUM":return function(e,t){return Object(lt.a)(e,(function(n){var a=e.activeSpectrum.id,r=kt.getDatum1D(a);r.applyFilter([{name:Je.shiftX.id,options:t}]),Pt(n,r,a),Ft(n)}))}(e,t.shiftValue);case"APPLY_ZERO_FILLING_FILTER":return function(e,t){return Object(lt.a)(e,(function(n){var a=e.activeSpectrum.id,r=kt.getDatum1D(a);r.applyFilter([{name:Je.zeroFilling.id,options:t.zeroFillingSize},{name:Je.lineBroadening.id,options:t.lineBroadeningValue}]),Pt(n,r,a),Ft(n),Rt(n)}))}(e,t.value);case"APPLY_FFT_FILTER":return function(e){return Object(lt.a)(e,(function(t){var n=e.activeSpectrum.id,a=kt.getDatum1D(n);a.applyFilter([{name:Je.fft.id,options:{}}]),Pt(t,a,n),St([{info:a.getInfo()}],t,e.height),Ft(t),Rt(t)}))}(e);case"APPLY_MANUAL_PHASE_CORRECTION_FILTER":return function(e){return Object(lt.a)(e,(function(t){var n=e.activeSpectrum.id,a=kt.getDatum1D(n),r=e.tempData.findIndex((function(e){return e.id===n}));t.selectedOptionPanel=null,t.selectedTool=st.zoom.id,t.tempData=null,t.data[r].filters=a.getFilters(),Ft(t)}))}(e,t.value);case"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER":return function(e,t){return Object(lt.a)(e,(function(n){var a=e.data,r=e.activeSpectrum,i=r.id,o=r.index,l=t.ph0,c=t.ph1,u=kt.getDatum1D(i),s=It(a[o].x,e.pivot);l-=c*a[o].x.indexOf(s)/u.data.x.length,u.applyFilter([{name:Je.phaseCorrection.id,options:{ph0:l,ph1:c}}]);var d=u.getReal();n.data[o].x=d.x,n.data[o].y=d.y}))}(e,t.value);case"ENABLE_FILTER":return function(e,t,n){return Object(lt.a)(e,(function(a){var r=e.activeSpectrum.id,i=kt.getDatum1D(r);i.enableFilter(t,n);var o=i.getReal(),l=e.data.findIndex((function(e){return e.id===r}));a.data[l].x=o.x,a.data[l].y=o.y,a.data[l].filters=i.getFilters(),a.data[l].info.isFid=i.info.isFid,Ft(a),Rt(a)}))}(e,t.id,t.checked);case"DELETE_FILTER":return function(e,t){return Object(lt.a)(e,(function(n){var a=e.activeSpectrum.id,r=kt.getDatum1D(a);r.deleteFilter(t);var i=r.getReal(),o=e.data.findIndex((function(e){return e.id===a}));n.data[o].x=i.x,n.data[o].y=i.y,n.data[o].filters=r.getFilters(),n.data[o].info.isFid=r.info.isFid,Ft(n),Rt(n)}))}(e,t.id);case"CHANGE_VISIBILITY":return function(e,t){return Object(lt.a)(e,(function(e){var n=!0,a=!1,r=void 0;try{for(var i,o=function(){var e=i.value;t.some((function(t){return t.id===e.id}))?e.isVisible=!0:e.isVisible=!1},l=e.data[Symbol.iterator]();!(n=(i=l.next()).done);n=!0)o()}catch(c){a=!0,r=c}finally{try{n||null==l.return||l.return()}finally{if(a)throw r}}}))}(e,t.data);case"CHANGE_PEAKS_MARKERS_VISIBILITY":return function(e,t){return Object(lt.a)(e,(function(e){var n=!0,a=!1,r=void 0;try{for(var i,o=function(){var e=i.value;t.some((function(t){return t.id===e.id}))?(kt.getDatum1D(e.id).isPeaksMarkersVisible=!0,e.isPeaksMarkersVisible=!0):(kt.getDatum1D(e.id).isPeaksMarkersVisible=!1,e.isPeaksMarkersVisible=!1)},l=e.data[Symbol.iterator]();!(n=(i=l.next()).done);n=!0)o()}catch(c){a=!0,r=c}finally{try{n||null==l.return||l.return()}finally{if(a)throw r}}}))}(e,t.data);case"CHANGE_ACTIVE_SPECTRUM":return function(e,t){return Object(lt.a)(e,(function(e){if(t){kt.getDatum1D(t.id).isVisible=!0;var n=e.data.findIndex((function(e){return e.id===t.id}));-1!==n&&(e.data[n].isVisible=!0),t.index=n,e.activeSpectrum=t}else e.activeSpectrum=null}))}(e,t.data);case"CHANGE_SPECTRUM_COLOR":return function(e,t){var n=t.id,a=t.color;return Object(lt.a)(e,(function(e){var t=e.data.findIndex((function(e){return e.id===n}));-1!==t&&(e.data[t].color=a,kt.getDatum1D(n).display.color=a)}))}(e,t.data);case"TOGGLE_REAL_IMAGINARY_VISIBILITY":return function(e){return Object(lt.a)(e,(function(t){if(null!==e.activeSpectrum){var n=e.activeSpectrum.id,a=kt.getDatum1D(n);if(a){var r=a.getReal().y,i=a.getImaginary().y,o=e.data.findIndex((function(e){return e.id===n}));if(a.setIsRealSpectrumVisible(!t.data[o]),t.data[o].isRealSpectrumVisible=!t.data[o].isRealSpectrumVisible,a.setIsRealSpectrumVisible(),t.data[o].isRealSpectrumVisible){if(null!==r&&void 0!==r){t.data[o].y=r;var l=Ct(t.data);t.xDomain=l.x,t.yDomain=l.y,t.yDomains=l.yDomains}}else if(null!==i&&void 0!==i){t.data[o].y=i;var c=Ct(t.data);t.xDomain=c.x,t.yDomain=c.y,t.yDomains=c.yDomains}}}}))}(e);case vt:return function(e,t){return Object(lt.a)(e,(function(n){var a,r=e.originDomain,i=e.height,o=e.margin,l=e.data,c=e.yDomains,u=e.activeSpectrum,s=V.e(r.y,[i-o.bottom,o.top]);if(1===l.length){var d=It(l[0].y),f=wt(e).y(d);a=V.g.translate(0,f).scale(t.scale).translate(0,-f)}else a=V.g.translate(0,i-o.bottom).scale(t.scale).translate(0,-(i-o.bottom));n.zoomFactor=a;var p=a.rescaleY(s).domain();if(null===u)n.yDomains=c.map((function(e){return[e[0]+(p[0]-e[0]),e[1]+(p[1]-e[1])]}));else{var b=l.findIndex((function(e){return e.id===u.id})),m=Object(ot.a)(e.yDomains);m[b]=p,n.yDomains=m}}))}(e,t.zoomFactor);case"CHANGE_SPECTRUM_DISPLAY_VIEW_MODE":return function(e,t){var n=t.flag;return Object(lt.a)(e,(function(t){var a=e.activeSpectrum,r=e.data,i=e.height,o=Et;a&&(r[a.index].isFid&&(o=i/2));t.verticalAlign.flag=n,t.verticalAlign.stacked=n,t.verticalAlign.value=n?Math.floor(i/(e.data.length+2)):o}))}(e,t);case"ADD_MOLECULE":return function(e,t){return kt.addMolfile(t),Object(lt.a)(e,(function(e){e.molecules=kt.getMolecules()}))}(e,t.molfile);case"SET_MOLECULE":return function(e,t,n){return Object(lt.a)(e,(function(e){e.molecules=kt.setMolfile(t,n)}))}(e,t.molfile,t.key);case"DELETE_MOLECULE":return function(e,t){return Object(lt.a)(e,(function(e){kt.removeMolecule(t),e.molecules=kt.getMolecules()}))}(e,t.key);case"DELETE_SPECTRA":return function(e){return Object(lt.a)(e,(function(e){var t=e.activeSpectrum;t&&t.id?(kt.deleteDatum1DByID(t.id),e.activeSpectrum=null,e.data=kt.getData1d(),Ft(e),Rt(e)):(tt.build({}).then((function(e){kt=e})),e.data=[])}))}(e);case"SET_INTEGRAL_Y_DOMAIN":return function(e,t){return Object(lt.a)(e,(function(e){var n=e.activeSpectrum;if(n){var a=e.data.findIndex((function(e){return e.id===n.id}));e.data[a].integralsYDomain=t}}))}(e,t.yDomain);case xt:return function(e,t){return Object(lt.a)(e,(function(n){var a=e.originDomain,r=e.height,i=e.margin,o=V.e(a.y,[r-i.bottom,i.top]),l=V.g.translate(0,r-i.bottom).scale(10*t.scale).translate(0,-(r-i.bottom)),c=l.rescaleY(o).domain(),u=n.activeSpectrum;if(u){var s=n.data.findIndex((function(e){return e.id===u.id}));n.zoomFactor=l,n.data[s].integralsYDomain=c}}))}(e,t.zoomFactor);case yt:return function(e,t){var n=wt(e).x;return Object(lt.a)(e,(function(e){var a=n.invert(t.startX),r=n.invert(t.endX);e.xDomain=a>r?[r,a]:[a,r]}))}(e,t);case jt:return function(e,t){return Object(lt.a)(e,(function(n){var a=wt(e).x;n.pivot=a.invert(t)}))}(e,t.position);case"SET_SPECTRUMS_VERTICAL_AlIGN":return function(e,t){return Object(lt.a)(e,(function(n){var a=e.height;if(t){var r=a/2;n.verticalAlign.flag=!0,n.verticalAlign.value=r,n.verticalAlign.stacked=!1}else n.verticalAlign.flag=!1,n.verticalAlign.value=Et,n.verticalAlign.stacked=!1}))}(e,t.flag);case"AUTO_PEAK_PICKING":return function(e,t){return Object(lt.a)(e,(function(n){n.selectedTool=st.zoom.id,n.selectedOptionPanel=null;var a=e.activeSpectrum.id,r=kt.getDatum1D(a).applyAutoPeakPicking(t),i=e.data.findIndex((function(e){return e.id===a}));-1!==i&&(n.data[i].peaks=r)}))}(e,t.options);case"AUTO_RANGES_DETECTION":return function(e,t){return Object(lt.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,r=a.id,i=a.index;n.selectedTool=st.zoom.id,n.selectedOptionPanel=null;var o=kt.getDatum1D(r).detectRanges(t);n.data[i].ranges=o}}))}(e,t.options);case"DELETE_RANGE":return function(e,t){return Object(lt.a)(e,(function(n){var a=e.activeSpectrum,r=a.id,i=a.index,o=kt.getDatum1D(r);o.deleteRange(t),n.data[i].ranges=o.getRanges()}))}(e,t.rangeID);case Ot:return function(e){return Object(lt.a)(e,(function(t){t.xDomain=e.originDomain.x,t.yDomain=e.originDomain.y}))}(e);case"undo":return function(e){var t=e.history,n=t.past,a=t.present,r=t.future,i=n[n.length-1],o=n.slice(0,n.length-1),l=[a].concat(Object(ot.a)(r)),c=0!==l.length,u=0!==n.length;kt.undoFilter(n);var s=kt.getData1d(),d=Ct(s),f={past:o,present:i,future:l,hasRedo:c,hasUndo:u};return Object(h.a)({},e,{data:s,xDomain:d.x,yDomain:d.y,originDomain:d,history:f})}(e);case"redo":return function(e){return Object(lt.a)(e,(function(e){var t=e.history,n=t.future[0],a=t.future.shift();t.past.push(t.present),t.present=a,t.hasUndo=!0,t.hasRedo=t.future.length>0,kt.redoFilter(n),e.data=kt.getData1d(),Ft(e)}))}(e);case"reset":return function(e,t){return Object(lt.a)(e,(function(e){e.history={past:[],present:t,future:[],hasRedo:!1,hasUndo:!1}}))}(e,t);default:return e}},Nt=Object(d.createContext)(),_t=Nt.Provider;function zt(){return Object(d.useContext)(Nt)}var Ht=n(319),Vt=n(8);function Bt(){var e=Object(z.a)(["\n  border: 0.55px #e6e6e6 solid;\n  display: flex;\n  flex: 1;\n  flex-direction: 'column';\n  height: 100%;\n"]);return Bt=function(){return e},e}function Yt(){var e=Object(z.a)(["\n  height: 100%;\n  background-color: #b5b5b599;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-flow: column;\n  z-index: 99999;\n\n  p {\n    color: white;\n    background-color: rgb(104, 104, 104);\n    padding: 1.5%;\n    border-radius: 30px;\n    margin: 0px;\n  }\n\n  svg {\n    stroke-width: 0;\n    font-size: 3rem !important;\n    fill: white;\n  }\n"]);return Yt=function(){return e},e}function Ut(e){return e.name.replace(/^.*\./,"").toLowerCase()}function Gt(e){return Promise.all([].map.call(e,(function(e){return new Promise((function(t,n){var a=new FileReader;a.onabort=function(e){return n(e)},a.onerror=function(e){return n(e)},a.onload=function(){if(a.result){var n=a.result,r=function(e){return e.name.substr(0,e.name.lastIndexOf("."))}(e),i=Ut(e);t({binary:n,name:r,extension:i})}},a.readAsBinaryString(e)}))})))}var Xt=Object(H.b)(Yt()),Wt=Object(H.b)(Bt()),Jt=function(e){var t=it(),n=t.width,a=t.height,r=zt(),i=Object(d.useCallback)((function(e){r({type:"SET_LOADING_FLAG",isLoading:!0});var t=Object(ot.a)(new Set(e.map((function(e){return Ut(e)})))),n=!0,a=!1,i=void 0;try{for(var o,l=function(){var t=o.value,n=e.filter((function(e){return Ut(e)===t}));switch(t){case"mol":Gt(n).then((function(e){r({type:"LOAD_MOL_FILE",files:e})}),(function(e){alert(e)}));break;case"nmrium":case"json":1===n.length?Gt(n).then((function(e){tt.build(JSON.parse(e[0].binary.toString())).then((function(e){r({type:"LOAD_JSON_FILE",data:{AnalysisObj:e}})}))}),(function(e){alert(e)})):alert("You can add only one json file");break;case"dx":case"jdx":Gt(n).then((function(e){r({type:"LOAD_JCAMP_FILE",files:e})}),(function(e){alert(e)}));break;default:alert("The file extesion must bedx, jdx, json, mol or nmrium.")}},c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)l()}catch(u){a=!0,i=u}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}}),[r]),o=Object(Ht.a)({onDrop:i,noClick:!0}),l=o.getRootProps,c=o.getInputProps,u=o.isDragActive;return Object(H.c)("div",Object.assign({},l(),{css:Wt}),Object(H.c)("input",c()),u&&Object(H.c)("div",{css:Xt,style:{width:"".concat(n+41,"px"),height:"".concat(a,"px")}},Object(H.c)(Vt.p,null),Object(H.c)("p",null,"Drop your files here")),e.children)},Kt={position:"fixed",top:0,left:0,pointerEvents:"none",backgroundColor:"gray",padding:"3px",borderRadius:"2px",color:"white",whiteSpace:"nowrap",fontSize:"10px"},qt=function(e){var t=e.style,n=e.className,a=e.popupPlacement,r=void 0===a?"right":a,i=e.children,o=e.title,l=e.offset,c=void 0===l?{x:0,y:0}:l,u=Object(d.useRef)(),s=Object(d.useRef)(),p=Object(d.useState)({x:0,y:0}),b=Object(L.a)(p,2),m=b[0],g=b[1],v=Object(d.useState)(!1),y=Object(L.a)(v,2),O=y[0],x=y[1];Object(d.useLayoutEffect)((function(){if(O){var e=function(){var e,t,n=u.current.getBoundingClientRect(),a=s.current.getBoundingClientRect();switch(r){case"left":e=-a.width,t=n.height/2-n.height/2*a.height/n.height;break;case"right":e=n.width,t=n.height/2-n.height/2*a.height/n.height;break;case"top":e=n.width/2-n.width/2*a.width/n.width,t=-n.height;break;case"bottom":e=n.width/2-n.width/2*a.width/n.width,t=n.height;break;default:e=0,t=0}return{x:e+n.x,y:t+n.y}}();g(e)}}),[r,O]);var j=Object(d.useCallback)((function(){x(!0)}),[]),k=Object(d.useCallback)((function(){x(!1)}),[]);return f.a.createElement("div",{style:{position:"relative",height:"100%"}},f.a.createElement("div",{ref:u,onMouseOver:j,onMouseOut:k,style:{width:"inherit",height:"inherit"}},i),f.a.createElement("div",{ref:s,style:Object(h.a)({},Kt,{transform:"translate(".concat(m.x,"px,").concat(m.y,"px)"),zIndex:999999999,left:c.x,top:c.y,display:O?"block":"none"},t),className:n},f.a.createElement("span",{style:{pointerEvents:"none"}},o)))};function $t(){var e=Object(z.a)(["\n  color: black;\n  background-color: #f3f3f3 !important;\n"]);return $t=function(){return e},e}function Zt(){var e=Object(z.a)(["\n  width: 35px;\n  height: 35px;\n  background-color: white;\n  padding: 5px;\n  margin: 0px;\n  border: none;\n  outline: none;\n\n  :focus {\n    outline: none !important;\n  }\n"]);return Zt=function(){return e},e}var Qt=Object(H.b)(Zt()),en=Object(H.b)($t()),tn=function(e){var t=e.children,n=e.value,a=e.disabled,r=e.isActive,i=e.onChange,o=e.className,l=e.style,c=e.isVisible,u=Object(d.useState)(r),s=Object(L.a)(u,2),f=s[0],p=s[1],b=Object(d.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=!f;p(t),i(t?n:null)}),[f,i,n]);return Object(d.useEffect)((function(){p(r)}),[r]),c?Object(H.c)("button",{type:"button",onClick:b,css:[Qt,f&&en],style:l,className:" ".concat(o,f?"  active":" "),disabled:a},Object(d.cloneElement)(t,{style:{fontSize:"10px"}})):null};tn.defaultProps={isActive:!1,disabled:!1,isVisible:!0,value:null,className:"",onChange:function(){return null},onValueReady:function(){return null}};var nn=tn,an={display:"flex",flexDirection:"column"},rn=function(e){var t=e.children,n=e.value,a=e.onChange,r=Object(d.useState)([]),i=Object(L.a)(r,2),o=i[0],l=i[1],c=Object(d.useCallback)((function(e){var t=Object(ot.a)(o).map((function(t){return{value:t.value,isActive:t.value===e}}));l(t),a(e)}),[a,o]),u=Object(d.useMemo)((function(){return f.a.Children.map(t,(function(e,t){return e&&f.a.cloneElement(e,{onChange:c,isActive:o[t]&&o[t].isActive&&o[t].isActive,index:t})}))}),[t,c,o]);return Object(d.useEffect)((function(){var e=f.a.Children.map(t,(function(e){if(e)return{value:e.props.value,isActive:e.props.value===n}}));l(e)}),[t,n]),f.a.createElement("div",{style:an}," ",u," ")};rn.defaultProps={onChange:function(){return null}};var on=rn,ln={icon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"18px 18px"},button:{backgroundColor:"transparent",border:"none",width:"35px",height:"35px",outline:"outline"}},cn=function(e){var t=e.defaultValue,n=Object(d.useState)(),a=Object(L.a)(n,2),r=a[0],i=a[1],o=Object(d.useState)(),l=Object(L.a)(o,2),c=l[0],u=l[1],s=zt(),p=Object(d.useCallback)((function(e){return s({type:"SET_SELECTED_TOOL",selectedTool:e})}),[s]),b=it(),m=b.activeSpectrum,g=b.data,v=Object(d.useCallback)((function(e){i(e),p(e)}),[p]),y=Object(d.useCallback)((function(e){if("input"!==e.target.localName&&!e.shiftKey&&!e.metaKey)switch(e.key){case"z":case"Escape":i(st.zoom.id),p(st.zoom.id);break;case"r":i(st.autoRangesPicking.id),p(st.autoRangesPicking.id);break;case"p":i(st.peakPicking.id),p(st.peakPicking.id);break;case"i":i(st.integral.id),p(st.integral.id)}}),[p]);Object(d.useEffect)((function(){return i(t),document.addEventListener("keydown",y,!1),function(){document.removeEventListener("keydown",y,!1)}}),[t,y]),Object(d.useEffect)((function(){if(g&&m){var e=g.find((function(e){return e.id===m.id})).info;u({info:e})}else u({info:{isComplex:!1,isFid:!1}})}),[m,g]);var O=Object(d.useCallback)((function(){s({type:"APPLY_FFT_FILTER",value:""}),s({type:"SET_SELECTED_FILTER",selectedFilter:null})}),[s]);return f.a.createElement(f.a.Fragment,null,f.a.createElement(on,{value:r,onChange:v},f.a.createElement(nn,{key:st.zoom.id,value:st.zoom.id},f.a.createElement(qt,{title:"".concat(st.zoom.label," ( Press z )"),popupPlacement:"right",offset:{x:10,y:0}},f.a.createElement(Vt.o,null))),f.a.createElement(nn,{key:st.peakPicking.id,value:st.peakPicking.id,className:"ci-icon-nmr-peak-picking",style:ln.icon,isVisible:m&&c&&!c.info.isFid},f.a.createElement(qt,{title:"".concat(st.peakPicking.label," ( Press p )"),popupPlacement:"right",offset:{x:10,y:0}})),f.a.createElement(nn,{key:st.integral.id,value:st.integral.id,className:"ci-icon-nmr-integrate",style:ln.icon,isVisible:m&&c&&!c.info.isFid},f.a.createElement(qt,{title:"".concat(st.integral.label," ( Press i )"),popupPlacement:"right",offset:{x:10,y:0}})),f.a.createElement(nn,{key:st.autoRangesPicking.id,value:st.autoRangesPicking.id,className:"ci-icon-nmr-range-picking",style:ln.icon,isVisible:m&&c&&!c.info.isFid},f.a.createElement(qt,{title:st.autoRangesPicking.label,popupPlacement:"right",offset:{x:10,y:0}})),f.a.createElement(nn,{key:st.zeroFilling.id,value:st.zeroFilling.id,className:"ci-icon-nmr-zero-filling",style:ln.icon,isVisible:c&&Je.zeroFilling.isApplicable(c)},f.a.createElement(qt,{title:st.zeroFilling.label,popupPlacement:"right",offset:{x:10,y:0}})),f.a.createElement(nn,{key:st.phaseCorrection.id,value:st.phaseCorrection.id,className:"ci-icon-nmr-phase-correction",style:ln.icon,isVisible:m&&c&&Je.phaseCorrection.isApplicable(c)},f.a.createElement(qt,{title:st.phaseCorrection.label,popupPlacement:"right",offset:{x:10,y:0}}))),c&&Je.fft.isApplicable(c)&&f.a.createElement("button",{className:"ci-icon-nmr-fourier-transform",style:Object(h.a)({},ln.icon,{},ln.button),type:"button",onClick:O},f.a.createElement(qt,{title:"FFT Filter",popupPlacement:"right",offset:{x:10,y:0}})))},un=Object(d.memo)(cn);function sn(){var e=Object(z.a)(["\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\n  padding: 0px;\n  margin: 0px;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  z-index: 99999;\n  padding: 2px;\n  transform: translate(40px, -26px);\n  background-color: white;\n"]);return sn=function(){return e},e}cn.defaultProps={defaultValue:st.zoom.id};var dn=Object(H.b)(sn()),fn=function(e){var t=e.style,n=e.component,a=e.toolTip,r=void 0===a?"":a,i=e.children,o=Object(d.useState)(!1),l=Object(L.a)(o,2),c=l[0],u=l[1],s=Object(d.useCallback)((function(){u(!1)}),[]),f=Object(d.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),u(!0),document.addEventListener("click",s)}),[s]),p=Object(d.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),!1}),[]);return Object(d.useEffect)((function(){c||document.removeEventListener("click",s)}),[s,c]),Object(H.c)("div",null,Object(H.c)("button",{type:"button",css:t,onClick:f,onContextMenu:p},Object(H.c)(qt,{title:r,popupPlacement:"right"},n)),c?Object(H.c)("div",{className:"menu",css:dn},i):null)};function pn(){var e=Object(z.a)(["\n  background-color: transparent;\n  border: none;\n  border-bottom: 0.55px solid whitesmoke;\n  height: 35px;\n  outline: outline;\n  display: flex;\n  justify-content: flex-start;\n\n  :focus {\n    outline: none !important;\n  }\n  span {\n    font-size: 10px;\n    padding: 0px 10px;\n  }\n"]);return pn=function(){return e},e}function bn(){var e=Object(z.a)(["\n  background-color: transparent;\n  border: none;\n  width: 35px;\n  height: 35px;\n  min-height: 35px;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: outline;\n  :focus {\n    outline: none !important;\n  }\n"]);return bn=function(){return e},e}var mn=Object(H.b)(bn()),gn=Object(H.b)(pn()),hn=function(e){var t=e.isFullZoomButtonVisible,n=void 0===t||t,a=e.isFullZoomButtonEnabled,r=void 0===a||a,i=e.isViewButtonVisible,o=void 0===i||i,l=zt(),c=it(),u=c.data,s=c.activeSpectrum,f=c.verticalAlign,p=Object(d.useState)(!1),b=Object(L.a)(p,2),m=b[0],g=b[1],h=Object(d.useState)(0),v=Object(L.a)(h,2),y=v[0],O=v[1],x=Object(d.useState)(),j=Object(L.a)(x,2),k=j[0],E=j[1],C=Object(d.useState)(!1),w=Object(L.a)(C,2),S=w[0],D=w[1],T=Object(W.d)(),P=Object(d.useCallback)((function(){l({type:"FULL_ZOOM_OUT"})}),[l]),A=Object(d.useCallback)((function(){l({type:"EXPORT_DATA",exportType:"svg"})}),[l]),I=Object(d.useCallback)((function(){return l({type:"EXPORT_DATA",exportType:"png"})}),[l]),R=Object(d.useCallback)((function(){l({type:"EXPORT_DATA",exportType:"copy"}),T.show("Spectrum copied to clipboard")}),[T,l]),F=Object(d.useCallback)((function(){return l({type:"EXPORT_DATA",exportType:"json"})}),[l]),M=Object(d.useCallback)((function(){var e=!S;D(e),l({type:"CHANGE_SPECTRUM_DISPLAY_VIEW_MODE",flag:e})}),[l,S]),N=Object(d.useCallback)((function(){l({type:"TOGGLE_REAL_IMAGINARY_VISIBILITY",isRealSpectrumVisible:!m}),g(!m)}),[l,m]),_=Object(d.useCallback)((function(){l({type:"SET_SPECTRUMS_VERTICAL_AlIGN",flag:!f.flag})}),[l,f.flag]),z=Object(d.useCallback)((function(e){if("input"!==e.target.localName&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey)switch(e.key){case"f":P();break;case"c":_();break;case"s":M()}if(!e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"c":R(),e.preventDefault();break;case"s":F(),e.preventDefault()}}),[P,_,M,F,R]);return Object(d.useEffect)((function(){return document.addEventListener("keydown",z,!1),function(){document.removeEventListener("keydown",z,!1)}}),[z]),Object(d.useEffect)((function(){if(u)if(O(u.length),s){var e=u.find((function(e){return e.id===s.id})).info;E(e)}else E({isComplex:!1,isFid:!1})}),[s,u]),Object(H.c)(d.Fragment,null,n&&Object(H.c)("button",{type:"button",css:mn,onClick:P,disabled:!r},Object(H.c)(qt,{title:"Full Zoom Out ( Press f )",popupPlacement:"right"},Object(H.c)(Vt.c,null))),Object(H.c)(fn,{style:mn,component:Object(H.c)(Vt.g,null),toolTip:"Export As"},Object(H.c)("button",{type:"button",css:gn,onClick:A},Object(H.c)(Vt.b,null),Object(H.c)("span",null,"Export as SVG")),Object(H.c)("button",{type:"button",css:gn,onClick:I},Object(H.c)(Vt.h,null),Object(H.c)("span",null,"Export as PNG")),Object(H.c)("button",{type:"button",css:gn,onClick:F},Object(H.c)(Vt.f,null),Object(H.c)("span",null,"Save data ( Press Ctrl + S )")),Object(H.c)("button",{type:"button",css:gn,onClick:R},Object(H.c)(Vt.a,null),Object(H.c)("span",null,"Copy image to Clipboard ( Press Ctrl + C )"))),o&&y>1&&Object(H.c)("button",{type:"button",css:[mn,{display:"block"}],onClick:M,className:S?"ci-icon-nmr-overlay3":"ci-icon-nmr-overlay3-aligned"},Object(H.c)(qt,{title:"Spectra alignment",popupPlacement:"right"},Object(H.c)("div",null))),k&&k.isComplex&&Object(H.c)("button",{css:mn,type:"button",onClick:N,className:"ci-icon-nmr-real-imag"},Object(H.c)(qt,{title:m?"Real Spectrum":"Imaginary Spectrum",popupPlacement:"right"})),Object(H.c)("button",{css:mn,type:"button",onClick:_},Object(H.c)(qt,{title:f.flag?"Bottom Align":"Align Center",popupPlacement:"right"},f.flag?"BA":"CA")))},vn={display:"flex",flexDirection:"column",alignItems:"start"},yn=function(){var e=it().selectedTool;return f.a.createElement("div",{style:vn},f.a.createElement(un,{defaultValue:e}),f.a.createElement(hn,null))},On={container:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},xn=function(e){var t=e.children,n=e.defaultOpenIndex,a=void 0===n?0:n,r=Object(d.useCallback)((function(){return Array(t.length).fill(!1).map((function(e,t){return t===a||e}))}),[t.length,a]),i=Object(d.useState)(r),o=Object(L.a)(i,2),l=o[0],c=o[1],u=Object(d.useRef)(),s=Object(d.useCallback)((function(e){var t=l.slice();t=t.map((function(t,n){return n===e})),c(t)}),[l]),p=Object(d.useMemo)((function(){return f.a.Children.map(t,(function(e,t){return f.a.cloneElement(e,{onOpen:s,index:t,isOpen:l[t]})}))}),[t,l,s]);return Object(d.useEffect)((function(){c(r)}),[r]),f.a.createElement("div",{ref:u,style:On.container},p)},jn={container:{display:"flex",flexDirection:"column",margin:"0px",userSelect:"none"},button:{cursor:"pointer",padding:"12px",display:"flex",alignItems:"center",border:"none",outline:"none",transition:"background-color 0.2s ease-in",boxShadow:"inset 0px 1px 0px 0px #ffffff",background:"linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%)",filter:'progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#f6f6f6",GradientType=0)',backgroundColor:"#ffffff",color:"#666666",fontFamily:"Arial",fontWeight:"bold",textDecoration:"none",textShadow:"0px 1px 0px #ffffff",borderTop:"0.55px  solid #d5d5d5"},buttonTitle:{padding:0,margin:0},content:{backgroundColor:"white",maxHeight:"0",overflow:"auto",flex:"1 1 1px"}},kn=function(e){var t=e.title,n=e.children,a=e.index,r=e.isOpen,i=e.onOpen,o=e.style,l=Object(d.useState)(null),c=Object(L.a)(l,2),u=c[0],s=c[1],p=Object(d.useRef)(),b=Object(d.useRef)();return Object(d.useEffect)((function(){s(r?{backgroundColor:"#ccc"}:null)}),[r]),Object(d.useEffect)((function(){!1===r&&s(null)}),[r]),f.a.createElement("div",{ref:b,style:Object(h.a)({},jn.container,{flex:null==u?0:"1 1 1px",transition:r?"":"flex 0.2s ease"}),className:"custom-accordion"},f.a.createElement("button",{type:"button",style:jn.button,onClick:function(){s(null==u?{backgroundColor:"#ccc"}:null),null==u&&i(a)}},f.a.createElement("p",{style:jn.buttonTitle},t)),f.a.createElement("div",{ref:p,style:Object(h.a)({},jn.content,{maxHeight:null==u?0:"100%"},o)},n))};kn.defaultProps={onOpen:function(){return null}};var En=kn,Cn={outerContainer:{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(255,255,255,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},innerContainer:{boxSizing:"initial",backgroundColor:"#fff",boxShadow:"0 0 0 0, 0 8px 16px rgba(0,0,0,.30)",display:"flex",flexDirection:"column",minWidth:"300px",minHeight:"140px",justifyContent:"space-between",borderRadius:"5px"}},wn=function(e){var t=e.children,n=e.open,a=e.onClose,r=e.style,i=Object(d.useCallback)((function(e){a(e)}),[a]);return Object(d.useEffect)((function(){!1===n&&i()}),[i,n]),n&&f.a.createElement("div",{style:Cn.outerContainer,onClick:i},f.a.createElement("div",{style:Object(h.a)({},Cn.innerContainer,{},r),onClick:function(e){e.preventDefault(),e.stopPropagation()}},t))};wn.defaultProps={onClose:function(){return null},open:!1};var Sn=wn;function Dn(){var e=Object(z.a)(["\n  display: flex;\n  align-items: flex-end;\n  justify-content: flex-end;\n  padding: 5px;\n  background-color: #ffffff52;\n\n  button:first-child {\n    border-radius: 5px 0 0 5px;\n    border-weight: 0 1px 0 0;\n  }\n  button:last-child {\n    border-radius: 0px 5px 5px 0px;\n    border-weight: 0 0 0 1px;\n  }\n  button {\n    border: 1px solid #dcdcdc;\n    background-color: white;\n    display: inline-block;\n    cursor: pointer;\n    color: #666666;\n    font-weight: bold;\n    padding: 6px 24px;\n    text-decoration: none;\n  }\n  button:hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"]);return Dn=function(){return e},e}function Tn(){var e=Object(z.a)(["\n  font-size: 16px;\n  text-align: center;\n  color: white;\n  text-align: center;\n  margin: 35px 10px;\n"]);return Tn=function(){return e},e}var Pn=Object(H.b)(Tn()),An=Object(H.b)(Dn()),In=Object(d.forwardRef)((function(e,t){var n=e.onYes,a=e.onNo,r=Object(d.useState)(!1),i=Object(L.a)(r,2),o=i[0],l=i[1];Object(d.useImperativeHandle)(t,(function(){return{present:function(){l(!0)},dismiss:function(){l(!1)}}}));var c=Object(d.useCallback)((function(e){n(e),l(!1)}),[n]),u=Object(d.useCallback)((function(e){a(e),l(!1)}),[a]);return Object(H.c)(Sn,{open:o,onClose:u,style:{backgroundColor:"#ff3636"}},Object(H.c)("p",{css:Pn},"All records will be deleted,\n       Are You sure?"),Object(H.c)("div",{css:An},Object(H.c)("button",{type:"button",onClick:u},"No"),Object(H.c)("button",{type:"button",onClick:c},"Yes")))}));In.defaultProps={onYes:function(){return null},onNo:function(){return null}};var Rn=In,Fn={button:{backgroundColor:"transparent",border:"none",width:"24px"},row:{display:"flex",alignContent:"center",height:"25px",borderBottom:"0.55px solid #f1f1f1"},name:{flex:1,height:"100%",display:"flex",alignItems:"center"},icon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"18px 18px"}},Ln=function(e){var t,n=e.visible,a=e.activated,r=e.markersVisible,i=e.data,o=e.onChangeVisibility,l=e.onChangeMarkersVisibility,c=e.onChangeActiveSpectrum,u=e.onOpenColorPicker;return f.a.createElement("div",{style:Fn.row,key:"slist".concat(i.id)},f.a.createElement("button",{style:Fn.button,type:"button",onClick:function(){return o(i)}},f.a.createElement(Vt.d,{style:(t=i.id,-1!==n.findIndex((function(e){return e.id===t}))?{opacity:1,strokeWidth:"1px",fill:i.color}:{opacity:.1,fill:i.color})})),f.a.createElement("div",{style:Fn.name,onClick:function(){return c(i)}},f.a.createElement("span",null,i.name)),f.a.createElement("button",{style:Object(h.a)({},Fn.button,{},Fn.icon,{opacity:function(e){return-1!==r.findIndex((function(t){return t.id===e}))}(i.id)&&i.peaks&&i.peaks.length>0?1:.1}),type:"button",onClick:function(){return l(i)},className:"ci-icon-nmr-peaks",disabled:i.peaks&&0===i.peaks.length}),f.a.createElement("button",{style:Fn.button,type:"button",onClick:function(){return c(i)}},f.a.createElement(Vt.i,{style:function(e){return a&&a.id===e}(i.id)?{fill:i.color,height:"15px"}:{fill:i.color,opacity:.1}})),f.a.createElement("button",{style:Fn.button,type:"button",className:"color-change-bt",onClick:function(e){return u(i,e)}},f.a.createElement(Vt.j,null)))},Mn=n(311),Nn={position:"fixed",zIndex:999999999};var _n=Object(d.memo)((function(e){var t=e.colorPickerPosition,n=e.selectedSpectrumData,a=e.onColorChanged,r=e.onMouseLeave;return f.a.createElement("div",{style:Object(h.a)({},Nn,{left:t.x-200,top:t.y}),onMouseLeave:r},f.a.createElement(Mn.SketchPicker,{color:n.color,presetColors:ct,onChangeComplete:a}))}),(function(){return!0})),zn={button:{backgroundColor:"transparent",border:"none"},container:{display:"flex",flexDirection:"column",flexGrow:"1",height:"100%"},toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},counterLabel:{margin:0,textAlign:"right",width:"100%",lineHeight:"22px",padding:"0px 10px"}},Hn=function(e){var t=e.counter,n=e.onDelete,a=e.deleteToolTip,r=e.children;return f.a.createElement("div",{style:zn.toolbar},f.a.createElement(qt,{title:a,popupPlacement:"left"},f.a.createElement("button",{style:zn.button,type:"button",onClick:n,disabled:0===t},f.a.createElement(Vt.m,null))),r,f.a.createElement("p",{style:zn.counterLabel},"[ ",t," ]"))},Vn={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},button:{backgroundColor:"transparent",border:"none"}},Bn=function(){var e=Object(d.useState)(null),t=Object(L.a)(e,2),n=t[0],a=t[1],r=Object(d.useState)([]),i=Object(L.a)(r,2),o=i[0],l=i[1],c=Object(d.useState)([]),u=Object(L.a)(c,2),s=u[0],p=u[1],b=Object(d.useState)(!1),m=Object(L.a)(b,2),g=m[0],h=m[1],v=Object(d.useState)(null),y=Object(L.a)(v,2),O=y[0],x=y[1],j=Object(d.useState)(null),k=Object(L.a)(j,2),E=k[0],C=k[1],w=it().data,S=Object(d.useRef)(),D=zt(),T=Object(d.useCallback)((function(e){var t=o.findIndex((function(t){return t.id===e.id})),n=Object(ot.a)(o);-1===t?n.push({id:e.id}):n.splice(t,1),D({type:"CHANGE_VISIBILITY",data:n}),l(n)}),[D,o]),P=Object(d.useCallback)((function(e){var t=s.findIndex((function(t){return t.id===e.id})),n=Object(ot.a)(s);-1===t?n.push({id:e.id}):n.splice(t,1),D({type:"CHANGE_PEAKS_MARKERS_VISIBILITY",data:n}),p(n)}),[D,s]),A=Object(d.useCallback)((function(e){n&&n.id===e.id?(D({type:"CHANGE_ACTIVE_SPECTRUM",data:null}),a(null)):(D({type:"CHANGE_ACTIVE_SPECTRUM",data:{id:e.id}}),a({id:e.id}))}),[n,D]),I=Object(d.useCallback)((function(e){null!==O&&D({type:"CHANGE_SPECTRUM_COLOR",data:{id:O.id,color:e.hex}})}),[D,O]);Object(d.useEffect)((function(){var e=w?w.filter((function(e){return!0===e.isVisible})):[],t=w?w.filter((function(e){return!0===e.isPeaksMarkersVisible})):[];l(e),p(t),w&&1===w.length&&null==n&&A(w[0])}),[w,A,n]);var R=Object(d.useCallback)((function(e,t){C({x:t.nativeEvent.clientX,y:t.nativeEvent.clientY}),x(e),h(!0)}),[]),F=Object(d.useCallback)((function(){h(!1)}),[]),M=Object(d.useMemo)((function(){return w&&w.map((function(e){return f.a.createElement(Ln,{key:e.id,visible:o,activated:n,markersVisible:s,data:e,onChangeVisibility:T,onChangeMarkersVisibility:P,onChangeActiveSpectrum:A,onOpenColorPicker:R})}))}),[w,A,P,T,R,n,s,o]),N=Object(d.useCallback)((function(){n?(a(null),D({type:"DELETE_SPECTRA"})):S.current.present()}),[n,D]),_=Object(d.useCallback)((function(){D({type:"DELETE_SPECTRA"})}),[D]),z=Object(d.useCallback)((function(){var e=w.map((function(e){return{id:e.id}}));D({type:"CHANGE_VISIBILITY",data:e}),l(e)}),[w,D]),H=Object(d.useCallback)((function(){D({type:"CHANGE_VISIBILITY",data:[]}),l([])}),[D]);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{style:Vn.container},f.a.createElement(Hn,{onDelete:N,counter:w&&w.length,deleteToolTip:"Delete All Spectrums"},f.a.createElement(qt,{title:"Hide all spectrums",popupPlacement:"right"},f.a.createElement("button",{style:Vn.button,type:"button",onClick:H},f.a.createElement(Vt.e,null))),f.a.createElement(qt,{title:"Show all spectrums",popupPlacement:"right"},f.a.createElement("button",{style:Vn.button,type:"button",onClick:z},f.a.createElement(Vt.d,null)))),f.a.createElement("div",{style:{overflow:"auto"}},M,g?f.a.createElement(_n,{onMouseLeave:F,selectedSpectrumData:O,colorPickerPosition:E,onColorChanged:I}):null)),f.a.createElement(Rn,{onYes:_,ref:S}))},Yn=n(42);function Un(){var e=Object(z.a)(["\n    border-spacing: 0;\n    border: 1px solid #dedede;\n    width: 100%;\n    font-size:12px;\n    height: 100%;\n        \n \n\n    tr {\n    :last-child {\n        td {\n        border-bottom: 0;\n        }\n    }\n    }\n    th,\n    td {\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n        border-right: 0;\n    }\n\n    button{\n        background-color: transparent;\n        border: none;\n\n    }\n\n"]);return Un=function(){return e},e}var Gn=Object(H.b)(Un()),Xn=function(e){var t=e.data,n=e.columns,a=Object(Yn.d)({columns:n,data:t},Yn.c),r=a.getTableProps,i=a.getTableBodyProps,o=a.headerGroups,l=a.rows,c=a.prepareRow;return Object(H.c)("table",Object.assign({},r(),{css:Gn}),Object(H.c)("thead",null,o.map((function(e){return Object(H.c)("tr",Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e){return Object(H.c)("th",Object.assign({key:e.getHeaderProps().key},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),Object(H.c)("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""))})))}))),Object(H.c)("tbody",i(),l.map((function(e){return c(e),Object(H.c)("tr",Object.assign({key:e.getRowProps().key},e.getRowProps()),e.cells.map((function(e){return Object(H.c)("td",Object.assign({key:e.getCellProps().key},e.getCellProps()),e.render("Cell"))})))}))))};function Wn(){var e=Object(z.a)(["\n      position: relative;\n      padding: 0px 5px;\n      border: 0.55px solid #cacaca;\n      font-size: 14px;\n      width: ","px;\n      margin: 0;\n      height: 100%;\n      background: url(../img/br_down.png) no-repeat right white;\n      -webkit-appearance: none;\n      background-position-x: ","px;\n      background-size: 10px 10px;\n      border-radius: 5px;\n      margin: 0px 5px;\n      :focus,\n      input:focus {\n        outline: none;\n      }\n    "]);return Wn=function(){return e},e}var Jn=f.a.forwardRef((function(e,t){var n=e.data,a=e.style,r=e.onChange,i=e.defaultValue,o=Object(d.useCallback)((function(e){r(e.target.value)}),[r]),l=Object(H.b)(Wn(),a.width?a.width-5:115,a.width?a.width-18:97);return Object(H.c)("select",{css:[l,a],ref:t,onChange:o,defaultValue:i},n.map((function(e){return Object(H.c)("option",{key:"".concat(e.key),value:e.value},e.label)})))}));Jn.defaultProps={onChange:function(){return null},ref:null};var Kn=Jn,qn=function(){return f.a.createElement("p",{style:{textAlign:"center",width:"100%",fontSize:"11px",padding:"5px",color:"gray"}},"No Data")},$n={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"}},Zn=[{key:"signal",label:"Signal",value:"signal"},{key:"reference",label:"Reference",value:"reference"},{key:"solvent",label:"Solvent",value:"solvent"},{key:"impurity",label:"Impurity",value:"impurity"},{key:"standard",label:"Standard",value:"standard"},{key:"p1",label:"P1",value:"p1"},{key:"p2",label:"P2",value:"p2"},{key:"p3",label:"P3",value:"p3"}],Qn={marginLeft:10,marginRight:10,border:"none"},ea=function(){var e=Object(d.useRef)(),t=Object(d.useContext)(at),n=t.activeSpectrum,a=t.data,r=t.molecules,i=zt(),o=Object(d.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;i({type:"DELETE_INTEGRAL",integralID:n.id})}),[i]),l=Object(d.useCallback)((function(e,t){var n=Object(h.a)({},t.original,{signalKind:e});i({type:"CHANGE_INTEGRAL_DATA",data:n})}),[i]),c=[{Header:"#",Cell:function(e){return e.row.index+1},width:10},{Header:"From",accessor:"from",sortType:"basic",resizable:!0,Cell:function(e){return e.row.original.from.toFixed(2)}},{Header:"To",accessor:"to",sortType:"basic",resizable:!0,Cell:function(e){return e.row.original.to.toFixed(2)}},{Header:"Integral",accessor:"value",sortType:"basic",resizable:!0,Cell:function(e){return e.row.original.value.toFixed(2)}},{Header:"signal kind",accessor:"signalKind",sortType:"basic",resizable:!0,Cell:function(e){var t=e.row;return f.a.createElement(Kn,{onChange:function(e){return l(e,t)},data:Zn,style:Qn,defaultValue:t.original.signalKind})}},{Header:"",id:"delete-button",Cell:function(e){var t=e.row;return f.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return o(e,t)}},f.a.createElement(Vt.m,null))}}],u=Object(d.useMemo)((function(){var e=n&&a?a[n.index]:null;return e&&e.integrals?("1H"===e.info.nucleus&&r&&r.length>0&&c.splice(c.length-2,0,{Header:"nbH",sortType:"basic",resizable:!0,Cell:function(){return r[0].atoms.H}}),e.integrals):[]}),[a,n,c,r]),s=Object(d.useCallback)((function(){e.current.present()}),[]),p=Object(d.useCallback)((function(){i({type:"DELETE_INTEGRAL",integralID:null})}),[i]);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{style:$n.container},f.a.createElement(Hn,{onDelete:s,counter:u&&u.length,deleteToolTip:"Delete All Integrals"}),u&&u.length>0?f.a.createElement(Xn,{data:u,columns:c}):f.a.createElement(qn,null)),f.a.createElement(Rn,{onYes:p,ref:e}))},ta=n(320),na=n(321),aa=n(314),ra=n.n(aa),ia=(n(663),n(322));function oa(){var e=Object(z.a)(["\n  -moz-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  -webkit-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  box-shadow: inset 0px 1px 0px 0px #ffffff;\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0.05, #ffffff),\n    color-stop(1, #f6f6f6)\n  );\n  background: -moz-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -webkit-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -o-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -ms-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0);\n  background-color: #ffffff;\n  border: 0.55px solid #dcdcdc;\n  display: inline-block;\n  cursor: pointer;\n  color: #666666;\n  font-weight: bold;\n  padding: 6px 24px;\n  text-decoration: none;\n  text-shadow: 0px 1px 0px #ffffff;\n\n  :hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"]);return oa=function(){return e},e}var la=Object(H.b)(oa()),ca=function(e){var t=e.onClose,n=e.open,a=e.selectedMolecule,r=Object(d.useState)(null),i=Object(L.a)(r,2),o=i[0],l=i[1],c=zt();Object(d.useEffect)((function(){l(a?a.molfile:null)}),[a,n]);var u=Object(d.useCallback)((function(e){l(e)}),[l]),s=Object(d.useCallback)((function(){t()}),[t]),f=Object(d.useCallback)((function(){a?(c({type:"SET_MOLECULE",molfile:o,key:a.key}),t("replace")):(c({type:"ADD_MOLECULE",molfile:o}),t("new"))}),[c,a,o,t]);return Object(H.c)(Sn,{open:n,onClose:s},Object(H.c)(ia.a,{initialMolfile:a&&a.molfile,svgMenu:!0,fragment:!1,onChange:u}),Object(H.c)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",margin:5}},Object(H.c)("button",{type:"button",css:la,onClick:s},"Close"),Object(H.c)("button",{type:"button",css:la,onClick:f},"Save")))};function ua(){var e=Object(z.a)(["\n  .slider {\n    height: 180px;\n    padding: 0px;\n  }\n  .slider p {\n    width: 100%;\n    margin: 0 auto;\n    display: block;\n    position: relative;\n  }\n\n  .slider svg polygon {\n    fill: gray !important;\n  }\n"]);return ua=function(){return e},e}function sa(){var e=Object(z.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n\n  button svg {\n    fill: #4e4e4e;\n  }\n\n  button {\n    width: 40px !important;\n    padding: 5px 0px !important;\n    min-width: 10px !important;\n    background-color: transparent;\n    border: none;\n  }\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]);return sa=function(){return e},e}function da(){var e=Object(z.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]);return da=function(){return e},e}var fa=Object(H.b)(da()),pa=Object(H.b)(sa()),ba=Object(H.b)(ua()),ma=function(){var e=Object(d.useRef)(),t=f.a.useState(!1),n=Object(L.a)(t,2),a=n[0],r=n[1],i=Object(d.useState)(),o=Object(L.a)(i,2),l=o[0],c=o[1],u=Object(d.useState)(0),s=Object(L.a)(u,2),p=s[0],b=s[1],m=zt(),g=Object(d.useContext)(at).molecules,h=Object(d.useCallback)((function(e){r(!1),"new"===e&&b(g.length)}),[g.length]),v=Object(d.useCallback)((function(e,t,n){c(n?{molfile:n,key:t}:null),r(!0)}),[]),y=Object(d.useCallback)((function(){navigator.clipboard.readText().then((function(e){m({type:"ADD_MOLECULE",molfile:e})}))}),[m]),O=Object(d.useCallback)((function(){g[p]&&g[p].key&&(b(0),m({type:"DELETE_MOLECULE",key:g[p].key}))}),[m,g,p]);return Object(H.c)("div",{css:fa},Object(H.c)("div",{css:pa},Object(H.c)(qt,{title:"Paste Molecule",popupPlacement:"left"},Object(H.c)("button",{className:"bar-button",type:"button",onClick:y},Object(H.c)(Vt.k,null))),Object(H.c)(qt,{title:"Add Molecule",popupPlacement:"left"},Object(H.c)("button",{className:"bar-button",type:"button",onClick:v},Object(H.c)(Vt.l,null))),Object(H.c)(qt,{title:"Delete Molecule",popupPlacement:"left"},Object(H.c)("button",{className:"bar-button",type:"button",onClick:O},Object(H.c)(Vt.m,null))),Object(H.c)("p",null,g&&g.length>0&&"".concat(+(p+1)," / ").concat(g.length)," ")),Object(H.c)("div",{css:ba,ref:e},Object(H.c)(ra.a,{onSlideChange:function(e){return b(e.slideIndex)},slideIndex:p},g&&g.map((function(t){return Object(H.c)("div",{key:t.key,onDoubleClick:function(e){return v(e,t.key,t.molfile)}},Object(H.c)("div",null,Object(H.c)(ta.a,{width:e&&e.current.clientWidth-70,molfile:t.molfile})),Object(H.c)("p",null,Object(H.c)(na.a,{mf:t.mf})," - ",t.mw.toFixed(2)))}))),Object(H.c)(ca,{open:a,onClose:h,selectedMolecule:l})))},ga=n(315),ha={width:"100%",height:"100%",padding:"0px",display:"flex",flexDirection:"column"},va=function(e){var t=e.children,n=e.className,a=e.style;return f.a.createElement("div",{className:n,style:Object(h.a)({},ha,{style:a})},t)},ya={width:"100%",display:"flex",padding:"0px 5px",color:"#424242",backgroundColor:"#d8d8d8",borderBottom:"0.55px solid #d8d8d8",fontSize:11,fontWeight:"bold"},Oa=function(e){var t=e.children,n=e.className,a=e.style;return f.a.createElement("div",{className:n,style:Object(h.a)({},ya,{style:a})},t)},xa={width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",padding:"5px 0px",color:"gray"},ja=function(e){var t=e.children,n=e.className,a=e.style;return f.a.createElement("div",{className:n,style:Object(h.a)({},xa,{style:a})},f.a.Children.map(t,(function(e){return f.a.cloneElement(e,{style:{borderBottom:"0.55px solid #d8d8d8"}})})))},ka={width:"100%",display:"flex",padding:"5px 0px"},Ea=function(e){var t=e.children,n=e.className,a=e.style;return f.a.createElement("div",{className:n,style:Object(h.a)({},ka,{},a)},t)},Ca={width:"100%",display:"flex",alignItems:"flex-start"};function wa(e){return"top"===e.toLowerCase()?"flex-start":"bottom"===e.toLowerCase()?"flex-end":"center"}var Sa=function(e){var t=e.children,n=e.className,a=e.style,r=e.align,i=void 0===r?"center":r,o=e.vAlign,l=void 0===o?"center":o,c=e.size,u=void 0===c?1:c;return f.a.createElement("div",{className:n,style:Object(h.a)({},Ca,{alignItems:wa(l),textAlign:i,flex:u},a)},t)},Da=function(e){var t=e.checked,n=e.onChange,a=Object(d.useState)(t),r=Object(L.a)(a,2),i=r[0],o=r[1],l=Object(d.useCallback)((function(){var e=!i;o(e),n(e)}),[i,n]);return f.a.createElement("input",{type:"checkbox",onChange:l,defaultChecked:i})};Da.defaultProps={onChange:function(){return null}};var Ta=Da,Pa={button:{backgroundColor:"transparent",border:"none",height:25,width:25}},Aa=function(){var e=it(),t=e.data,n=e.activeSpectrum,a=zt(),r=Object(d.useCallback)((function(e,t){a({type:"ENABLE_FILTER",id:e,checked:t})}),[a]),i=Object(d.useCallback)((function(e){a({type:"DELETE_FILTER",id:e})}),[a]),o=Object(d.useMemo)((function(){var e=t&&n&&t.find((function(e){return e.id===n.id}));return e&&e.filters&&e.filters.map((function(e){return f.a.createElement(Ea,{key:e.id},f.a.createElement(Sa,{align:"center",size:"2"},e.label),f.a.createElement(Sa,{align:"left",size:"3"},f.a.createElement(ga.a,{data:e.error?e.error:e.value})),f.a.createElement(Sa,{align:"center",vAlign:"center",size:"1"},f.a.createElement(Ta,{checked:e.flag,onChange:function(t){return r(e.id,t)}}),f.a.createElement("button",{style:Pa.button,type:"button",onClick:function(){return i(e.id)}},f.a.createElement(Vt.m,null))))}))}),[n,t,i,r]);return o&&o.length>0?f.a.createElement(va,null,f.a.createElement(Oa,null,f.a.createElement(Ea,null,f.a.createElement(Sa,{align:"center",size:"1"},"Label"),f.a.createElement(Sa,{align:"center",size:"2"},"Properties"))),f.a.createElement(ja,null,o)):f.a.createElement(qn,null)},Ia=function(e){var t=e.data,n=e.columns,a=Object(Yn.d)({columns:n,data:t},Yn.c,Yn.b),r=a.getTableProps,i=a.getTableBodyProps,o=a.headerGroups,l=a.rows,c=a.prepareRow;return Object(H.c)("table",Object.assign({},r(),{css:Gn}),Object(H.c)("thead",null,o.map((function(e){return Object(H.c)("tr",Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e){return Object(H.c)("th",Object.assign({key:e.getHeaderProps().key},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),Object(H.c)("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""))})))}))),Object(H.c)("tbody",Object.assign({},i(),{style:{display:"block",height:"100%",overflowY:"auto"}}),l.map((function(e){return c(e),Object(H.c)("tr",Object.assign({key:e.getRowProps().key},e.getRowProps()),e.cells.map((function(e){return Object(H.c)("td",Object.assign({key:e.getCellProps().key},e.getCellProps(),{style:Object(h.a)({},e.getCellProps().style,{padding:"0px"})}),e.render("Cell"))})))}))))},Ra={searchInput:{width:"100%",borderRadius:"5px",border:"0.55px solid gray",padding:"5px",marginBottom:"2px"}},Fa=function(){var e=it(),t=e.data,n=e.activeSpectrum,a=Object(d.useState)([]),r=Object(L.a)(a,2),i=r[0],o=r[1],l=Object(d.useState)([]),c=Object(L.a)(l,2),u=c[0],s=c[1],p=Object(d.useCallback)((function(e){var t=Object.keys(i).filter((function(t){return t.toLowerCase().includes(e.target.value)}));s(t)}),[i]);Object(d.useEffect)((function(){if(t&&n){var e=t.find((function(e){return e.id===n.id}));if(e){var a=Object.keys(e.info).concat(Object.keys(e.meta));s(a),o(Object(h.a)({},e.info,{},e.meta))}}}),[n,t]);var b=[{Header:"Parameter",sortType:"basic",minWidth:100,width:20,maxWidth:20,Cell:function(e){var t=e.row;return f.a.createElement("p",{style:{padding:"5px"}},t.original)}},{Header:"Value",sortType:"basic",resizable:!0,Cell:function(e){var t=e.row;return f.a.createElement("p",{style:{backgroundColor:"#efefef",width:"100%",height:"100%",padding:"5px"}},"( $",i[t.original]," )")}}];return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",null,f.a.createElement("input",{type:"text",style:Ra.searchInput,placeholder:"Search for parameter...",onChange:p})),f.a.createElement(Ia,{data:u,columns:b}))},La=n(70),Ma=function(e){var t=e.columns,n=e.data,a=e.renderRowSubComponent,r=Object(Yn.d)({columns:t,data:n},Yn.a,Yn.c),i=r.getTableProps,o=r.getTableBodyProps,l=r.headerGroups,c=r.rows,u=r.prepareRow,s=r.flatColumns;return Object(H.c)("table",Object.assign({},i(),{css:Gn}),Object(H.c)("thead",null,l.map((function(e){return Object(H.c)("tr",Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e){return Object(H.c)("th",Object.assign({key:e.getHeaderProps().key},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),Object(H.c)("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""))})))}))),Object(H.c)("tbody",Object.assign({key:o().key},o()),c.map((function(e){return u(e),Object(H.c)(f.a.Fragment,null,Object(H.c)("tr",Object.assign({key:e.getRowProps().key},e.getRowProps()),e.cells.map((function(e){return Object(H.c)("td",Object.assign({key:e.getCellProps().key},e.getCellProps()),e.render("Cell"))}))),e.isExpanded?Object(H.c)("tr",null,Object(H.c)("td",{colSpan:s.length},a({row:e}))):null)}))))},Na={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},button:{backgroundColor:"transparent",border:"none"}},_a=function(){var e=Object(d.useRef)(),t=it(),n=t.data,a=t.activeSpectrum,r=zt(),i=Object(d.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;r({type:"DELETE_RANGE",rangeID:n.id})}),[r]),o=Object(d.useMemo)((function(){var e=a&&n?n[a.index]:null;return e&&e.ranges?e.ranges.map((function(e){return{from:e.from,to:e.to,integral:e.integral,id:e.id,signals:e.signal}})):[]}),[n,a]),l=Object(d.useCallback)((function(){var e=Object(La.b)(o);console.log(e)}),[o]),c=[{Header:function(){return null},id:"expander",Cell:function(e){var t=e.row;return f.a.createElement("span",t.getExpandedToggleProps(),t.isExpanded?"\u25bc":"\u25b6")}},{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"From",accessor:"from",Cell:function(e){return e.row.original.from.toFixed(2)}},{Header:"To",accessor:"to",Cell:function(e){return e.row.original.to.toFixed(2)}},{Header:"Integral",accessor:"integral",Cell:function(e){return e.row.original.integral.toFixed(1)}},{Header:"#Signals",Cell:function(e){return e.row.original.signals.length}},{Header:"",id:"delete-button",Cell:function(e){var t=e.row;return f.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return i(e,t)}},f.a.createElement(Vt.m,null))}}],u=[{Header:"Signals",columns:[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"Multiplicity",accessor:"multiplicity"},{Header:"Delta",accessor:"delta",Cell:function(e){return e.row.original.delta.toFixed(3)}},{Header:"#Peaks",Cell:function(e){return e.row.original.peak.length}}]}],s=[{Header:function(){return null},id:"expanderSignals",Cell:function(e){var t=e.row;return f.a.createElement("span",t.getExpandedToggleProps(),t.isExpanded?"\u25bc":"\u25b6")}}].concat(u),p=[{Header:"Couplings",columns:[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"Multiplicity",accessor:"multiplicity"},{Header:"Coupling",accessor:"coupling",Cell:function(e){return e.row.original.coupling.toFixed(3)}}]}],b=function(e){var t=e.row;return t.original.j&&t.original.j.length>0?f.a.createElement(Xn,{data:t.original.j,columns:p}):null},m=Object(d.useCallback)((function(){e.current.present()}),[]),g=Object(d.useCallback)((function(){r({type:"DELETE_RANGE",rangeID:null})}),[r]);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{style:Na.container},f.a.createElement(Hn,{onDelete:m,counter:o&&o.length,deleteToolTip:"Delete All Ranges"},f.a.createElement(qt,{title:"Hide all spectrums",popupPlacement:"right"},f.a.createElement("button",{style:Na.button,type:"button",onClick:l},f.a.createElement(Vt.g,null)))),o&&o.length>0?f.a.createElement(Ma,{columns:c,data:o,renderRowSubComponent:function(e){var t=e.row;return t.original.signals&&t.original.signals.find((function(e){return e.j&&e.j.length>0}))?f.a.createElement(Ma,{columns:s,data:t.original.signals,renderRowSubComponent:b}):f.a.createElement(Xn,{columns:u,data:t.original.signals})}}):f.a.createElement(qn,null)),f.a.createElement(Rn,{onYes:g,ref:e}))},za={"1h":{peakLabelNumberDecimals:2},"13c":{peakLabelNumberDecimals:1}};function Ha(e){return za[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1h";if(e=e.toLowerCase(),!za[e])throw new Error("No defaults preferences for nucleus: ".concat(e));return e}(e)].peakLabelNumberDecimals}var Va={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"}},Ba=function(){var e=Object(d.useRef)(),t=it(),n=t.data,a=t.activeSpectrum,r=zt(),i=Object(d.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;r({type:"DELETE_PEAK_NOTATION",data:{id:n.id,xIndex:n.xIndex}})}),[r]),o=[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"peak index",accessor:"xIndex",sortType:"basic"},{Header:"\u03b4 (ppm)",accessor:"value",sortType:"basic"},{Header:"Intensity ",accessor:"yValue",sortType:"basic"},{Header:"",id:"delete-button",Cell:function(e){var t=e.row;return f.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return i(e,t)}},f.a.createElement(Vt.m,null))}}],l=Object(d.useMemo)((function(){var e=a&&n?n[a.index]:null;if(e&&e.peaks){var t=Ha(e.info.nucleus);return e.peaks.map((function(n){return{xIndex:n.xIndex,value:e.x[n.xIndex].toFixed(t),id:e.id,yValue:e.y[n.xIndex]}}))}return[]}),[n,a]),c=Object(d.useCallback)((function(){e.current.present()}),[]),u=Object(d.useCallback)((function(){r({type:"DELETE_PEAK_NOTATION",data:null})}),[r]);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{style:Va.container},f.a.createElement(Hn,{onDelete:c,counter:l&&l.length,deleteToolTip:"Delete All Peaks"}),l&&l.length>0?f.a.createElement(Xn,{data:l,columns:o}):f.a.createElement(qn,null)),f.a.createElement(Rn,{onYes:u,ref:e}))},Ya=[{title:"Spectra",component:f.a.createElement(Bn,null),when:null,style:""},{title:"Information",component:f.a.createElement(Fa,null),when:null,style:{overflow:"hidden"}},{title:"Peaks",component:f.a.createElement(Ba,null),when:[st.peakPicking.id],style:""},{title:"Filters",component:f.a.createElement(Aa,null),when:null,style:""},{title:"Integrals",component:f.a.createElement(ea,null),when:[st.integral.id],style:""},{title:"Ranges",component:f.a.createElement(_a,null),when:[st.autoRangesPicking.id],style:""},{title:"Structures",component:f.a.createElement(ma,null),when:[st.autoRangesPicking.id],style:""}],Ua=function(){var e=it().selectedTool,t=Object(d.useState)(0),n=Object(L.a)(t,2),a=n[0],r=n[1],i=Object(d.useCallback)((function(){var t=Ya.findIndex((function(t){return t.when&&t.when.includes(e)}));return-1===t?0:t}),[e]);return Object(d.useEffect)((function(){e&&r(i())}),[i,e]),f.a.createElement(xn,{defaultOpenIndex:a},Ya.map((function(e){return f.a.createElement(En,{key:e.title,title:e.title,style:e.style},e.component)})))},Ga=n(1),Xa=n.n(Ga);function Wa(){var e=Object(z.a)(["\n  -webkit-clip-path: url('#clip');\n  clip-path: url('#clip');\n\n  path {\n    stroke-width: 1.5;\n    fill: none;\n    // stroke-linejoin: round;\n    // stroke-linecap: round;\n    // will-change: transform;\n  }\n"]);return Wa=function(){return e},e}var Ja=Object(H.b)(Wa()),Ka=function(){var e=it(),t=e.xDomain,n=e.getScale,a=e.verticalAlign,r=e.activeSpectrum,i=e.data,o=Object(d.useMemo)((function(){function e(e){var a=e.id,r=e.x,i=e.y,o=n(a),l=Q.c.reduce(r,i,{from:t[0],to:t[1]}),c="M ".concat(o.x(l.x[0])," ").concat(o.y(l.y[0])," ");return c+=l.x.slice(1).reduce((function(e,t,n){return e+=" L ".concat(o.x(t)," ").concat(o.y(l.y[n+1]))}),"")}function o(e){return a.flag?a.stacked?e*a.value:0:a.value}return i&&i[0]&&i[0].x&&i.filter((function(e){return!0===e.isVisible})).map((function(t,n){return Object(H.c)("path",{className:"line",key:t.id,stroke:t.color,fill:"none",style:{opacity:(a=t.id,null===r||a===r.id?1:.2)},d:e(t),transform:"translate(0,-".concat(o(n+1),")")});var a}))}),[r,i,n,a,t]);return Object(H.c)("g",{css:Ja,clipPath:"url(#clip)"},o)};Ka.whyDidYouRender=!0;var qa=Ka;Ka.contextTypes={width:Xa.a.number,height:Xa.a.number,data:Xa.a.object,margin:Xa.a.shape({top:Xa.a.number.isRequired,right:Xa.a.number.isRequired,bottom:Xa.a.number.isRequired,left:Xa.a.number.isRequired}),xDomain:Xa.a.array,yDomain:Xa.a.array,getScale:Xa.a.func};var $a=n(199),Za=n.n($a);function Qa(){var e=Object(z.a)(["\n    pointer-events: bounding-box;\n    :hover .target {\n      visibility: visible !important;\n      cursor: pointer;\n    }\n\n    .target {\n      visibility: hidden;\n    }\n  "]);return Qa=function(){return e},e}var er=function(e){var t=it(),n=t.getScale,a=t.height,r=t.margin,i=t.mode,o=e.id,l=e.x,c=e.from,u=e.to,s=e.integralID,f=Object(d.useState)(!1),p=Object(L.a)(f,2),b=p[0],m=p[1],g=Object(d.useState)(!1),h=Object(L.a)(g,2),v=h[0],y=h[1],O=V.c(l),x=zt(),j=Object(H.b)(Qa()),k=Object(d.useCallback)((function(){x({type:"DELETE_INTEGRAL",integralID:s,spectrumID:o})}),[x,o,s]);var E=Object(d.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),m(!0)}),[]),C=Object(d.useCallback)((function(){}),[]),w=Object(d.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),m(!1);var t="RTL"===i?[n(o).x.invert(e.layerX),u]:[u,n(o).x.invert(e.layerX)];t[1]>t[0]?x({type:"RESIZE_INTEGRAL",integral:{from:t[0],to:t[1],id:s}}):x({type:"RESIZE_INTEGRAL",integral:{from:c,to:u,id:s}})}),[x,c,n,o,s,i,u]),S=Object(d.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),y(!0)}),[]),D=Object(d.useCallback)((function(){}),[]),T=Object(d.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),y(!1);var t="RTL"===i?[c,n(o).x.invert(e.layerX)]:[n(o).x.invert(e.layerX),c];t[1]>t[0]?x({type:"RESIZE_INTEGRAL",integral:{from:t[0],to:t[1],id:s}}):x({type:"RESIZE_INTEGRAL",integral:{from:c,to:u,id:s}})}),[x,c,n,o,s,i,u]);return Object(H.c)("svg",{css:j,"data-no-export":"true"},Object(H.c)(Za.a,{axis:"x",defaultPosition:{x:n(o).x(O[0]),y:0},position:{x:n(o).x(O[0]),y:0},scale:1,onStart:E,onDrag:C,onStop:w},Object(H.c)("rect",{cursor:"ew-resize",width:b?1:6,fill:"red",height:a+r.top,style:{fillOpacity:b?1:0}})),Object(H.c)(Za.a,{axis:"x",defaultPosition:{x:n(o).x(O[1]),y:0},position:{x:n(o).x(O[1]),y:0},scale:1,onStart:S,onDrag:D,onStop:T},Object(H.c)("rect",{cursor:"ew-resize",width:v?1:6,fill:"red",height:a+r.top,style:{fillOpacity:v?1:0}})),Object(H.c)((function(){return Object(H.c)("svg",{className:"target",x:n(o).x(O[1])-20,y:a-r.bottom-20,onClick:k},Object(H.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(H.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"}))}),null))};function tr(){var e=Object(z.a)(["\n  -webkit-clip-path: url('#clip');\n  clip-path: url('#clip');\n\n  path {\n    stroke-width: 1.5;\n    fill: none;\n    // stroke-linejoin: round;\n    // stroke-linecap: round;\n    // will-change: transform;\n  }\n"]);return tr=function(){return e},e}var nr=Object(H.b)(tr()),ar=function(){var e=it(),t=e.xDomain,n=e.getScale,a=e.activeSpectrum,r=e.data,i=e.height,o=e.margin,l=e.zoomFactor,c=Object(d.useCallback)((function(e){return V.e(e,[i-o.bottom,o.top])}),[i,o.bottom,o.top]),u=Object(d.useMemo)((function(){var e=function(e){var a=e.id,r=e.x,u=e.y,s=e.yDomain,d=n(a).x,f=null;if(l)f=c(s);else{var p=V.g.translate(0,i-o.bottom).scale(40).translate(0,-(i-o.bottom));f=p.rescaleY(c(s))}var b=Q.c.reduce(r,u,{from:t[0],to:t[1]}),m="M ".concat(d(b.x[0])," ").concat(f(b.y[0]));return m+=b.x.slice(1).map((function(e,t){return" L ".concat(d(e)," ").concat(f(b.y[t]))})).join("")};return r&&r[0]&&r.filter((function(e){return!0===e.isVisible})).map((function(t){return t.integrals&&t.integrals.map((function(n){return Object(H.c)("g",{key:n.id},Object(H.c)("path",{className:"line",stroke:"black",fill:"none",style:{transformOrigin:"center top",opacity:(r=t.id,null===a||r===a.id?1:.2)},d:e({id:t.id,x:n.x,y:n.y,yDomain:t.integralsYDomain})}),Object(H.c)(er,{id:t.id,integralID:n.id,x:n.x,y:n.y,from:n.from,to:n.to,yDomain:t.integralsYDomain}));var r}))}))}),[r,n,l,t,c,i,o.bottom,a]);return Object(H.c)("g",{css:nr,clipPath:"url(#clip)"},u)},rr=ar;function ir(){var e=Object(z.a)(["\n  user-select: none;\n\n  line {\n    stroke: rgb(104, 104, 104);\n    stroke-opacity: 0.2;\n    shape-rendering: crispEdges;\n    stroke-dasharray: 3;\n    stroke-width: 1;\n    user-select: none;\n  }\n\n  path {\n    stroke-width: 0;\n  }\n"]);return ir=function(){return e},e}function or(){var e=Object(z.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"]);return or=function(){return e},e}ar.contextTypes={width:Xa.a.number,height:Xa.a.number,data:Xa.a.object,margin:Xa.a.shape({top:Xa.a.number.isRequired,right:Xa.a.number.isRequired,bottom:Xa.a.number.isRequired,left:Xa.a.number.isRequired}),xDomain:Xa.a.array,yDomain:Xa.a.array,getScale:Xa.a.func};var lr=Object(H.b)(or()),cr=Object(H.b)(ir()),ur=function(e){var t=e.label,n=e.show,a=e.showGrid,r=e.mode,i=it(),o=i.xDomain,l=i.getScale,c=i.height,u=i.width,s=i.margin,p=Object(d.useRef)(),b=Object(d.useRef)();t=t||("RTL"===r?"\u03b4 [ppm]":"time [s]");var m=V.a().ticks(8).tickFormat(V.d("0")),g=V.a().ticks(10).tickSize(-(c-s.top-s.bottom)).tickFormat("");Object(d.useEffect)((function(){if(n){var e="RTL"===r?[u-s.right,s.left]:[s.left,u-s.right],t=V.e([o[0],o[1]],e);V.f(p.current).call(m.scale(t)),V.f(b.current).call(g.scale(t))}}),[g,s.left,s.right,r,n,u,m,o]),Object(d.useEffect)((function(){if(n){var e=l();V.f(p.current).call(m.scale(e.x.domain(o))),V.f(b.current).call(g.scale(e.x.domain(o)))}}),[l,g,n,m,o]);var h=Object(d.useMemo)((function(){return n&&!0===n&&Object(H.c)("g",{className:"x",css:lr,transform:"translate(0,".concat(c-s.bottom,")"),ref:p},Object(H.c)("text",{fill:"#000",x:u-60,y:"20",dy:"0.71em",textAnchor:"end"},t))}),[c,t,s.bottom,n,u]),v=Object(d.useMemo)((function(){return a&&!0===a&&Object(H.c)("g",{css:cr,className:"grid",ref:b,transform:"translate(0,".concat(c-s.bottom,")")})}),[a,c,s.bottom]);return u&&c?Object(H.c)(f.a.Fragment,null,h,v):null},sr=ur;function dr(){var e=Object(z.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n"]);return dr=function(){return e},e}ur.contextTypes={width:Xa.a.number,height:Xa.a.number,margin:Xa.a.shape({top:Xa.a.number.isRequired,right:Xa.a.number.isRequired,bottom:Xa.a.number.isRequired,left:Xa.a.number.isRequired}),showGrid:Xa.a.bool,show:Xa.a.bool,label:Xa.a.string,isFID:Xa.a.bool},ur.defaultProps={showGrid:!1,show:!0,label:"",isFID:!0};var fr=Object(H.b)(dr()),pr=function(e){var t=e.show,n=e.label,a=Object(d.useRef)(),r=it(),i=r.yDomain,o=r.getScale,l=r.margin,c=r.verticalAlign;return Object(d.useEffect)((function(){if(t&&i){var e=o(),n=V.b().ticks(10).tickFormat(V.d("~s"));V.f(a.current).call(n.scale(e.y))}}),[t,i,o]),Object(d.useMemo)((function(){return t&&!0===t&&Object(H.c)(d.Fragment,null,Object(H.c)("g",{className:"y",css:fr,transform:"translate(".concat(l.left+50,",-").concat(c,")"),ref:a},Object(H.c)("text",{fill:"#000",x:-(l.top+20),y:-(l.left-5),dy:"0.71em",transform:"rotate(-90)",textAnchor:"end"},n)))}),[n,l.left,l.top,t,c])},br=pr;function mr(){var e=Object(z.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  text,\n  input {\n    -webkit-user-select: none; /* Safari 3.1+ */\n    -moz-user-select: none; /* Firefox 2+ */\n    -ms-user-select: none; /* IE 10+ */\n    user-select: none; /* Standard syntax */\n  }\n\n  input[type='number']::-webkit-outer-spin-button,\n  input[type='number']::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  .delete-bt {\n    background-color: red;\n    color: white;\n    border: 0px;\n    border-radius: 15px;\n    padding: 0px;\n    width: 15px;\n    height: 15px;\n    border: 15px;\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .notification-input {\n    width: calc(100% - 10px) !important;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n\n  .notification-input-normal {\n    opacity: 1;\n    left: 4px;\n    position: absolute;\n    font-size: 10px;\n    outline: none;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n    background-color: transparent;\n  }\n\n  .notification-input-normal input:focus {\n    outline: none;\n    background-color: white;\n  }\n\n  .input-over {\n    background-color: white;\n    outline: none;\n  }\n\n  .notification-label {\n    display: none;\n  }\n\n  .notification-group-over {\n    z-index: 9999999999;\n  }\n\n  .notification-group {\n    z-index: 1;\n  }\n\n  .notifcate-selected {\n    opacity: 0;\n  }\n\n  input[type='number']::-webkit-inner-spin-button,\n  input[type='number']::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"]);return mr=function(){return e},e}pr.contextTypes={showGrid:Xa.a.bool,show:Xa.a.bool,label:Xa.a.string},pr.defaultProps={showGrid:!1,show:!0,label:""};var gr=Object(H.b)(mr()),hr=function(e){var t=e.id,n=e.spectrumID,a=e.x,r=e.y,i=e.value,o=e.color,l=e.isActive,c=e.decimalFraction,u=Object(d.useRef)(),s=Object(d.useState)(!1),f=Object(L.a)(s,2),p=f[0],b=f[1],m=Object(d.useState)(i),g=Object(L.a)(m,2),h=g[0],v=g[1],y=Object(d.useState)({width:0,height:0}),O=Object(L.a)(y,2),x=O[0],j=O[1],k=Object(d.useState)({id:null,flag:!1}),E=Object(L.a)(k,2),C=E[0],w=E[1],S=zt(),D=Object(d.useCallback)((function(e){return S({type:"SHIFT_SPECTRUM",shiftValue:e.shiftValue})}),[S]),T=Object(d.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation(),S({type:"DELETE_PEAK_NOTATION",data:t})}),[S]);Object(d.useLayoutEffect)((function(){var e=u.current.getBBox();j({width:e.width,height:e.height})}),[p]),Object(d.useEffect)((function(){v(i)}),[i]);var P=Object(d.useCallback)((function(e){if("Enter"===e.key){var n=parseFloat(e.target.value),a=parseFloat(i),r=parseFloat(e.target.value)-parseFloat(i);D({id:t,value:n,oldValue:a,shiftValue:r}),e.target.blur(),b(!1)}else 27===e.keyCode&&(v(i),e.target.blur(),b(!1))}),[t,i,D]),A=Object(d.useCallback)((function(e){v(e.target.value)}),[]),I=Object(d.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),b(!0),!1}),[]),R=Object(d.useCallback)((function(e){w({id:e,flag:!0})}),[]),F=Object(d.useCallback)((function(){setTimeout((function(){w({id:null,flag:!1})}),200)}),[]);return Object(H.c)(d.Fragment,null,Object(H.c)(H.a,{styles:gr}),Object(H.c)("g",{id:t,transform:"translate(".concat(a,", ").concat(r,")"),onMouseOver:function(){R(t)},onMouseLeave:F},Object(H.c)("line",{x1:"0",x2:"0",y1:"-5",y2:-30,stroke:o,strokeWidth:"1px"}),Object(H.c)("text",{className:"regular-text",ref:u,x:"0",y:-20,dy:"0.1em",dx:"0.35em",fill:"transparent"},p?i:parseFloat(i).toFixed(c)),Object(H.c)("foreignObject",{x:"0",y:"-30",width:x.width+20,height:x.height+30,"data-no-export":"true"},Object(H.c)("div",{style:{width:x.width+20,height:x.height+30,paddingRight:5},xmlns:"http://www.w3.org/1999/xhtml"},Object(H.c)("input",{onClick:I,className:p?"notification-input input-over":"notification-input-normal",style:{width:"inherit",border:p?"1px solid ".concat(o):"0",opacity:l?1:.2,userSelect:"none"},value:p?h:parseFloat(h).toFixed(c),onKeyDown:P,onChange:A,type:"number",disabled:!l}),C.id&&!0===C.flag&&Object(H.c)("button",{type:"button",onClick:function(e){return T(e,{xIndex:t,id:n})},className:"delete-bt",style:{left:x.width,top:x.height+7}},Object(H.c)(Vt.i,null))))))},vr=function(){var e=it(),t=e.getScale,n=e.data,a=e.activeSpectrum,r=e.verticalAlign,i=Object(d.useMemo)((function(){var e=function(e){var t=n.findIndex((function(t){return t.id===e}));return r.flag?r.stacked?(t+1)*r.value:0:r.value};return n&&function(){var e=Object(ot.a)(n);return a?e.sort((function(e,t){return e.id===a.id?1:t.id===a.id?-1:0})):e}().filter((function(e){return!0===e.isVisible})).map((function(n){return n.peaks&&n.isPeaksMarkersVisible&&f.a.createElement("g",{key:n.id,transform:"translate(0,-".concat(e(n.id),")")},n.peaks.map((function(e){var r=e.xIndex,i=e.id;return f.a.createElement(hr,{key:i,x:t(n.id).x(n.x[r]),y:t(n.id).y(n.y[r]),id:r,spectrumID:n.id,value:n.x[r],color:n.color,decimalFraction:Ha(n.info.nucleus),isActive:null!=a&&a.id===n.id})})))}))}),[n,a,t,r]);return f.a.createElement("g",{className:"peaks",clipPath:"url(#clip)"},i)};function yr(){var e=Object(z.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  :hover .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n    cursor: pointer;\n  }\n  .delete-button {\n    display: none;\n    cursor: pointer;\n  }\n  :hover .delete-button {\n    display: block;\n  }\n"]);return yr=function(){return e},e}var Or=Object(H.b)(yr()),xr=function(){var e=it(),t=e.getScale,n=e.data,a=zt(),r=Object(d.useCallback)((function(e){a({type:"DELETE_RANGE",rangeID:e})}),[a]),i=function(e){return Object(H.c)("svg",{className:"delete-button",x:-20,y:10,onClick:function(){return r(e.id)},"data-no-export":"true"},Object(H.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(H.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"}))};return Object(H.c)("g",{clipPath:"url(#clip)"},n&&n[0]&&n.filter((function(e){return!0===e.isVisible})).map((function(e){return Object(H.c)("g",{key:e.id},e.ranges&&e.ranges.map((function(e){return Object(H.c)("g",{css:Or,key:e.id,transform:"translate(".concat(t().x(e.to),",10)")},Object(H.c)(i,{id:e.id}),Object(H.c)("rect",{x:"0",width:"".concat(t().x(e.from)-t().x(e.to)),height:"6",className:"range-area",fill:"green"}),Object(H.c)("text",{textAnchor:"middle",x:(t().x(e.from)-t().x(e.to))/2,y:"20",fontSize:"10",fill:"red"},e.integral.toFixed(1)))})))})))};var jr=f.a.forwardRef((function(){var e=it(),t=e.mode,n=e.width,a=e.height,r=e.margin;return n&&a?f.a.createElement("svg",{viewBox:"0 0 ".concat(n," ").concat(a),width:n,height:a,id:"svg-container"},f.a.createElement("defs",null,f.a.createElement("clipPath",{id:"clip"},f.a.createElement("rect",{width:"".concat(n-r.left-r.right),height:"".concat(a),x:"".concat(r.left),y:"".concat(0)}))),f.a.createElement(qa,null),f.a.createElement(rr,null),f.a.createElement(vr,null),f.a.createElement(xr,null),f.a.createElement("g",{className:"container",style:{pointerEvents:"none"}},f.a.createElement(sr,{showGrid:!0,mode:t}),f.a.createElement(br,{label:"PPM",show:!1}))):null})),kr=Object(d.createContext)();function Er(e){var t=e.children,n=e.className,a=e.style,r=e.noPropagation,i=Object(d.useState)(null),o=Object(L.a)(i,2),l=o[0],c=o[1],u=Object(d.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;c({x:n,y:a}),r&&e.stopPropagation()}),[r]),s=Object(d.useCallback)((function(e){c(null),r&&e.stopPropagation()}),[r]);return f.a.createElement(kr.Provider,{value:l},f.a.createElement("div",{className:n,style:a,onMouseMove:u,onMouseLeave:s},t))}var Cr=Object(d.createContext)(),wr={step:"initial",brush:{start:null,end:null}};function Sr(e){var t=e.children,n=e.className,a=e.style,r=e.onBrush,i=e.onZoom,o=e.onDoubleClick,l=e.onClick,c=e.noPropagation,u=Object(d.useReducer)(Dr,wr),s=Object(L.a)(u,2),p=s[0],b=s[1],m=Object(d.useState)(1),g=Object(L.a)(m,2),h=g[0],v=g[1],y=Object(d.useState)(),O=Object(L.a)(y,2),x=O[0],j=O[1],k=Object(d.useCallback)((function(e){return c&&e.stopPropagation(),b({type:"DOWN",screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,boundingRect:e.currentTarget.getBoundingClientRect()}),j(e.timeStamp),!1}),[c]),E=Object(d.useCallback)((function(e){if(e.timeStamp-x<=150){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;l({x:n,y:a})}}),[x,l]),C=Object(d.useCallback)((function(e){c&&e.stopPropagation(),o(e)}),[c,o]),w=Object(d.useCallback)((function(e){return((e=+e)||1/e)<0}),[]),S=Object(d.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t=1===e.deltaMode?.1*Math.abs(e.deltaY):e.deltaMode?1:Math.abs(e.deltaY)/100*.1,n=w(e.deltaY)?"up":"down",a=h;i({scale:a="up"===n?h+t:h-t}),v(a)}),[w,i,h]);return Object(d.useEffect)((function(){"end"===p.step&&(r(p),b({type:"DONE"}))}),[r,p]),Object(d.useEffect)((function(){var e=function(e){b({type:"MOVE",screenX:e.screenX,screenY:e.screenY})},t=function(e){return b({type:"UP",screenX:e.screenX,screenY:e.screenY}),!1};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[]),f.a.createElement(Cr.Provider,{value:p},f.a.createElement("div",{className:n,style:a,onMouseDown:k,onDoubleClick:C,onClick:E,onWheel:S},t))}function Dr(e,t){switch(t.type){case"UP":if("brushing"===e.step||"start"===e.step){var n=t.screenX,a=t.screenY;return Object(h.a)({},e,{endX:e.startX+n-e.startScreenX,endY:e.startY+a-e.startScreenY,step:"start"===e.step?"initial":"end"})}return e;case"DOWN":if("initial"===e.step||"end"===e.step){var r=t.screenX,i=t.screenY,o=t.clientX,l=t.clientY,c=t.boundingRect,u=o-c.x,s=l-c.y;return Object(h.a)({},e,{startX:u,startY:s,startScreenX:r,startScreenY:i,step:"start"})}return e;case"MOVE":if("start"===e.step||"brushing"===e.step){var d=t.screenX,f=t.screenY;return Object(h.a)({},e,{step:"brushing",endX:e.startX+d-e.startScreenX,endY:e.startY+f-e.startScreenY})}return e;case"DONE":if("end"===e.step)return Object(h.a)({},e,{step:"initial"});break;default:return e}}var Tr={line:{stroke:"black",strokeOpacity:"1",shapeRendering:"crispEdges",strokeWidth:"1",willChange:"transform"}},Pr=[st.zoom.id,st.equalizerTool.id],Ar=function(){var e=it(),t=e.height,n=e.width,a=e.margin,r=e.selectedTool,i=Object(d.useContext)(kr),o=Object(d.useContext)(Cr);return!Pr.includes(r)||"brushing"===o.step||!i||i.y<a.top||i.left<a.left||i.x>n-a.right||i.y>t-a.bottom||!n||!t?null:f.a.createElement("div",{className:"moving-element",key:"crossLine",style:{cursor:"crosshair",transform:"translate(".concat(-n+i.x,"px, ").concat(-t+i.y,"px)"),position:"absolute",top:0,left:0,pointerEvents:"none",overflow:"visible",width:2*n,height:2*t}},f.a.createElement("svg",{width:2*n,height:2*t},f.a.createElement("line",{style:Tr.line,x1:n,y1:"0",x2:n,y2:2*t,key:"vertical_line"}),f.a.createElement("line",{style:Tr.line,x1:"0",y1:t,x2:2*n,y2:t,key:"horizontal_line"})))},Ir={container:{transformOrigin:"top left",position:"absolute",top:"0px",left:"0px"}},Rr=[st.zoom.id,st.zeroFilling.id,st.peakPicking.id,st.integral.id,st.phaseCorrection.id];function Fr(){var e=it(),t=e.width,n=e.height,a=e.selectedTool,r=Object(d.useContext)(Cr),i=r.startX,o=r.endX,l=r.step;if(!Rr.includes(a)||"brushing"!==l)return null;var c=(o-i)/t;return f.a.createElement("div",{style:Object(h.a)({},Ir.container,{transform:"translate(".concat(i,"px, 0px) scaleX(").concat(c,")")}),className:"moving-element"},f.a.createElement("svg",{width:t,height:n},f.a.createElement("line",{x1:"0",y1:"0",x2:"0",y2:n,strokeWidth:"8",stroke:"red"}),f.a.createElement("line",{x1:t,y1:"0",x2:t,y2:n,strokeWidth:"8",stroke:"red"}),f.a.createElement("rect",{x:"0",y:"0",width:t,height:n,fill:"gray",opacity:"0.2"})))}var Lr={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-30px",pointerEvents:"none",overflow:"visible",userSelect:"none"},Mr=function(){var e=it(),t=e.height,n=e.width,a=e.margin,r=e.getScale,i=e.data,o=e.activeSpectrum,l=Object(d.useContext)(kr),c=Object(d.useContext)(Cr),u=Object(d.useCallback)((function(e){var t=i.find((function(e){return e.id===o.id}));if(t)return r().x.invert(e).toFixed(Ha(t.info.nucleus))}),[i,r,o]);return!o||"brushing"===c.step||!l||l.y<a.top||l.left<a.left||l.x>n-a.right||l.y>t-a.bottom?null:f.a.createElement("div",{key:"xLabelPointer",style:Object(h.a)({},Lr,{transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")})},f.a.createElement("span",null,u(l.x)))},Nr=10,_r="#1f1f1f",zr=1,Hr=0,Vr=1,Br=function(){var e=it(),t=e.height,n=e.width,a=e.margin,r=e.activeSpectrum,i=e.getScale,o=e.data,l=e.mode,c=e.selectedTool,u=e.verticalAlign,s=Object(d.useContext)(kr),p=Object(d.useContext)(Cr),b=Object(d.useState)(),m=Object(L.a)(b,2),g=m[0],h=m[1];return Object(d.useEffect)((function(){var e=function(e,t){if(r&&s&&c===st.peakPicking.id){var n=i(r.id),a=[n.x.invert(t.x-e),n.x.invert(t.x+e)].sort((function(e,t){return e-t})),l=o.find((function(e){return e.id===r.id})),d=l.x.findIndex((function(e){return e>=a[1]}))-1,f=l.x.findIndex((function(e){return e>=a[0]})),p=l.y.slice(f,d);if(p&&p.length>0){var b=Object(ee.a)(p),m=p.findIndex((function(e){return e===b})),g=l.x[f+m+1];return{x:n.x(g),y:n.y(b)-(r?u.flag?u.stacked?(r.index+1)*u.value:0:u.value:0),xIndex:f+m}}}return null}(10,s);h(e)}),[r,o,i,l,s,c,u]),c!==st.peakPicking.id||!g||!r||"brushing"===p.step||!s||s.y<a.top||s.left<a.left||s.x>n-a.right||s.y>t-a.bottom?null:f.a.createElement("div",{key:"peakPointer",style:{cursor:"crosshair",transform:"translate(".concat(g.x,"px, ").concat(g.y,"px)"),transformOrigin:"top left",position:"absolute",top:-(Nr+Vr),left:-(Nr+Vr),pointerEvents:"none",overflow:"visible"}},f.a.createElement("svg",{width:2*Nr+2*Vr,height:2*Nr+2*Vr},f.a.createElement("circle",{cx:Nr+Vr,cy:Nr+Vr,r:Nr,stroke:_r,strokeWidth:zr,fillOpacity:Hr}),f.a.createElement("line",{x1:Nr+Vr,y1:Vr,x2:Nr+Vr,y2:2*Nr+Vr,stroke:_r,strokeWidth:zr}),f.a.createElement("line",{x1:Vr,y1:Nr+Vr,x2:2*Nr+Vr,y2:Nr+Vr,stroke:_r,strokeWidth:zr})))},Yr={container:{padding:"5px",height:"100%",display:"flex"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}};function Ur(e){return e>=1048576?"".concat(e/1048576,"M"):e>=1024?"".concat(e/1024,"K"):e}var Gr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,n=[],a=e;a<=t;a++){var r=Math.pow(2,a);n.push({key:r,label:Ur(r),value:r})}return n}(),Xr=function(){var e=zt(),t=it(),n=t.data,a=t.activeSpectrum,r=Object(d.useRef)(),i=Object(d.useState)(1),o=Object(L.a)(i,2),l=o[0],c=o[1],u=Object(d.useCallback)((function(){e({type:"APPLY_ZERO_FILLING_FILTER",value:{zeroFillingSize:Number(r.current.value),lineBroadeningValue:l}})}),[e,l]),s=Object(d.useCallback)((function(){if(n&&a){var e=n.find((function(e){return e.id===a.id}));return Math.pow(2,Math.round(Math.log2(e.x.length)))}return""}),[a,n]),p=Object(d.useCallback)((function(e){if(e.target){var t=e.target.validity.valid?Number(e.target.value):l;c(t)}}),[l]),b=Object(d.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return f.a.createElement("div",{style:Yr.container},f.a.createElement("span",{style:Yr.label},"Size: "),f.a.createElement(Kn,{ref:r,data:Gr,style:{marginLeft:10,marginRight:10},defaultValue:s()}),f.a.createElement("span",{style:Yr.label},"Line Broadening: "),f.a.createElement("input",{name:"line-broadening",style:Yr.input,type:"number",value:l,onInput:p,pattern:"^\\d*(\\.\\d{0,2})?$",step:"any"}),f.a.createElement("button",{type:"button",style:Yr.actionButton,onClick:u},"Apply"),f.a.createElement("button",{type:"button",style:Yr.actionButton,onClick:b},"Cancel"))},Wr={container:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",border:"0.55px solid #c7c7c7",borderRadius:"5px",userSelect:"none",backgroundColor:"#18ce0f14",fontSize:"10px",color:"#00801d",margin:"0px 5px",cursor:"ew-resize"},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}},Jr={step:"initial"},Kr=null,qr=1,$r=0,Zr=!0;function Qr(e){Zr?($r=e.clientX,Zr=!1):(qr=e.clientX-$r,$r=e.clientX,clearTimeout(Kr),Kr=setTimeout((function(){qr=0}),50))}var ei=function(e){var t=e.name,n=e.minValue,a=e.maxValue,r=e.value,i=e.onChange,o=e.label,l=e.style,c=e.className,u=e.noPropagation,s=Object(d.useCallback)((function(){"moving"!==Jr.step&&"start"!==Jr.step||(Jr=Object(h.a)({},Jr,{step:"start"===Jr.step?"initial":"end"}))}),[]),p=Object(d.useCallback)((function(e){u&&e.stopPropagation();var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;return"initial"!==Jr.step&&"end"!==Jr.step||(Jr={startX:n,startY:a,startScreenX:e.screenX,startScreenY:e.screenY,boundingRect:e.currentTarget.getBoundingClientRect(),step:"start",clientX:e.clientX,clientY:e.clientY}),!1}),[u]);return f.a.createElement("div",{style:Object(h.a)({},Wr.container,{},l),className:c,onMouseMove:function(e){if("start"===Jr.step||"moving"===Jr.step){var o=e.screenX,l=e.screenY;Jr=Object(h.a)({},Jr,{step:"moving",endX:Jr.startX+o-Jr.startScreenX,endY:Jr.startY+l-Jr.startScreenY}),Qr(e);var c=a-n,u=Jr.endX-Jr.startX,s=Math.abs(u)*(Math.abs(qr)>3?c:5)/Jr.boundingRect.width;i({value:qr>=0?r+Math.abs(s):r-s,name:t})}},onMouseUp:function(){"moving"!==Jr.step&&"start"!==Jr.step||(Jr=Object(h.a)({},Jr,{step:"start"===Jr.step?"initial":"end"}))},onMouseDown:p,onMouseEnter:s},f.a.createElement("span",{style:Wr.label},o))};ei.defaultProps={name:"",minValue:0,maxValue:50,value:0,onChange:function(){return null},label:"Drag to Change the value",noPropagation:!0};var ti=ei,ni={container:{padding:"5px",height:"100%",display:"flex"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}},ai=function(){var e=zt(),t=Object(d.useState)({ph0:0,ph1:0,pivotIndex:1}),n=Object(L.a)(t,2),a=n[0],r=n[1],i=Object(d.useCallback)((function(){e({type:"APPLY_MANUAL_PHASE_CORRECTION_FILTER",value:a})}),[e,a]),o=Object(d.useCallback)((function(e){if(e.target){var t=Object(h.a)({},a,Object(dt.a)({},e.target.name,e.target.validity.valid?Number(e.target.value):a[e.target.name]));r(t)}}),[a]),l=Object(d.useCallback)((function(t){var n=Object(h.a)({},a,Object(dt.a)({},t.target.name,t.target.validity.valid?Number(t.target.value)-a[t.target.name]:a[t.target.name]));for(var r in a)a[r]===n[r]&&(n[r]-=a[r]);e({type:"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",value:n})}),[e,a]),c=Object(d.useCallback)((function(t){var n=Object(h.a)({},a,Object(dt.a)({},t.name,t.value)),i={};for(var o in a)i[o]=n[o]-a[o];e({type:"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",value:i}),r(n)}),[e,a]),u=Object(d.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return f.a.createElement("div",{style:ni.container},f.a.createElement("span",{style:ni.label},"PH0: "),f.a.createElement("input",{name:"ph0",style:ni.input,type:"text",value:a.ph0,onInput:o,onChange:l}),f.a.createElement("span",{style:ni.label},"PH1: "),f.a.createElement("input",{name:"ph1",style:ni.input,type:"text",value:a.ph1,onInput:o,onChange:l}),f.a.createElement(ti,{name:"ph0",value:a.ph0,label:"Change Ph0 By mouse click and drag",style:{width:"20%"},onChange:c}),f.a.createElement(ti,{name:"ph1",value:a.ph1,label:"Change Ph1 By mouse click and drag",style:{width:"20%"},onChange:c}),f.a.createElement("button",{type:"button",style:ni.actionButton,onClick:i},"Apply"),f.a.createElement("button",{type:"button",style:ni.actionButton,onClick:u},"Cancel"))},ri={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}},ii=function(){var e=zt(),t=Object(d.useRef)(),n=Object(d.useRef)(),a=Object(d.useCallback)((function(){e({type:"AUTO_PEAK_PICKING",options:{maxNumberOfPeaks:n.current.value,minMaxRatio:t.current.value}})}),[e]),r=Object(d.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return f.a.createElement("div",{style:ri.container},f.a.createElement("span",{style:ri.label},"Max Number Of Peaks: "),f.a.createElement("input",{ref:n,name:"maxNumberOfPeaks",style:ri.input,type:"number",defaultValue:50,step:"any"}),f.a.createElement("span",{style:ri.label},"Min Max Ratio: "),f.a.createElement("input",{ref:t,name:"minMaxRatio",style:ri.input,type:"number",defaultValue:.1,step:"0.1"}),f.a.createElement("button",{type:"button",style:ri.actionButton,onClick:a},"Apply"),f.a.createElement("button",{type:"button",style:ri.actionButton,onClick:r},"Cancel"))},oi={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}},li=function(){var e=zt(),t=Object(d.useCallback)((function(){e({type:"AUTO_RANGES_DETECTION",options:{minMaxRatio:.1,nH:100,compile:!0,frequencyCluster:16,clean:null,keepPeaks:!0}})}),[e]),n=Object(d.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return f.a.createElement("div",{style:oi.container},f.a.createElement("button",{type:"button",style:oi.actionButton,onClick:t},"Apply"),f.a.createElement("button",{type:"button",style:oi.actionButton,onClick:n},"Cancel"))};function ci(){var e=Object(z.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  height: 36px;\n  min-height: 36px;\n  border-width: 1px 1px 0px 1px;\n  border-style: solid;\n  border-color: rgb(213, 213, 213);\n  outline: none;\n  transition: background-color 0.2s ease-in 0s;\n  box-shadow: rgb(255, 255, 255) 0px 1px 0px 0px inset;\n  background: linear-gradient(rgb(255, 255, 255) 5%, rgb(246, 246, 246) 100%)\n    rgb(255, 255, 255);\n  color: rgb(102, 102, 102);\n  font-family: Arial;\n  font-weight: bold;\n  text-decoration: none;\n  text-shadow: rgb(255, 255, 255) 0px 1px 0px;\n\n  .toolOptionsPanel {\n    flex: 10;\n    padding: 0px;\n    margin: 0px;\n    height: 100%;\n  }\n\n  .windowButtonsContainer {\n    flex: 0.5;\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n  }\n\n  .windowButton {\n    width: 40px !important;\n    min-width: 40px !important;\n    background-color: transparent;\n    border: none;\n  }\n  button:focus {\n    outline: 0;\n  }\n"]);return ci=function(){return e},e}var ui=Object(H.b)(ci()),si=function(e){var t=e.isFullscreen,n=e.onMaximize,a=it().selectedOptionPanel,r=Object(d.useMemo)((function(){return a===st.zeroFilling.id?Object(H.c)(Xr,null):a===st.phaseCorrection.id?Object(H.c)(ai,null):a===st.peakPicking.id?Object(H.c)(ii,null):a===st.autoRangesPicking.id?Object(H.c)(li,null):void 0}),[a]);return Object(H.c)("div",{css:ui},Object(H.c)("div",{className:"toolOptionsPanel"},r),Object(H.c)("div",{className:"windowButtonsContainer"},t?"":Object(H.c)("button",{type:"button",onClick:n,className:"windowButton"},Object(H.c)(Vt.n,null))))};si.defaultProps={onMaximize:function(){return null}};var di=si,fi={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",width:1,backgroundColor:"red"},pi=function(){var e=it(),t=e.height,n=e.selectedTool,a=e.pivot,r=e.getScale;return st.phaseCorrection.id!==n?null:f.a.createElement("div",{style:Object(h.a)({},fi,{transform:"translate(".concat(r().x(a),"px, 0px)"),height:t})})};function bi(){var e=Object(z.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  outline: 10px dashed rgba(0, 0, 0, 0.3);\n  outline-offset: -10px;\n\n  p {\n    padding: 15px 30px;\n    background-color:rgba(0, 0, 0, 0.5);\n    border-radius: 39px;\n    color: white;\n    font-size: x-large;\n    font-weight: bold;\n\n  }\n}\n"]);return bi=function(){return e},e}var mi=Object(H.b)(bi()),gi=function(e){var t=e.isEmpty;return void 0===t||t?Object(H.c)("div",{css:mi},Object(H.c)("p",null,"Drag and drop here a Jcamp or NMRium file")):null};function hi(){var e=Object(z.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return hi=function(){return e},e}var vi=Object(H.b)(hi()),yi=function(e){var t=e.isLoading,n=void 0===t||t,a=it().data,r=Object(d.useState)(!1),i=Object(L.a)(r,2),o=i[0],l=i[1];return n||setTimeout((function(){l(!0)}),500),Object(H.c)(d.Fragment,null,n&&Object(H.c)("div",{css:vi},Object(H.c)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3"},Object(H.c)("g",{fill:"#61DAFB"},Object(H.c)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(H.c)("path",{d:"M520.5 78.1z"}))),Object(H.c)("p",null,"Loading ...")),o&&!n&&Object(H.c)(gi,{isEmpty:a&&0===a.length}))};function Oi(){var e=Object(z.a)(["\n                background-color: white;\n                height: 100%;\n                display: flex;\n                flex-direction: column;\n\n                button:active,\n                button:hover,\n                button:focus,\n                [type='button']:focus,\n                button {\n                  outline: none !important;\n                }\n              "]);return Oi=function(){return e},e}var xi={position:W.b.BOTTOM_CENTER,timeout:3e3,offset:"30px",transition:W.c.SCALE},ji={container:{position:"relative"},pane1:{maxWidth:"80%",minWidth:"50%"},resizer:{width:10,backgroundColor:"#f7f7f7",cursor:"ew-resize"},pane:{overflow:"hidden"}},ki=function(e){var t=e.data,n=e.height,a=e.width,r=Object(d.useRef)(),i=Object(d.useRef)(),o=Object(Y.a)(!1),l=Object(L.a)(o,2),c=l[0],u=l[1],s=Object(U.a)(r,c,{onClose:function(){u(!1)}});Object(d.useEffect)((function(){s?setTimeout((function(){O({type:gt,height:window.innerHeight-40})}),100):O({type:gt,height:n})}),[n,s]);var f=Object(d.useState)(!1),p=Object(L.a)(f,2),b=p[0],m=p[1],g=Object(d.useReducer)(Mt,Lt),v=Object(L.a)(g,2),y=v[0],O=v[1],x=y.data,j=y.xDomain,k=y.yDomain,E=y.width,C=y.height,w=y.activeSpectrum,S=y.yDomains,D=y.mode,T=y.margin,P=y.verticalAlign;Object(d.useEffect)((function(){O({type:"SET_LOADING_FLAG",isLoading:!0}),tt.build(t||{}).then((function(e){O({type:"INITIATE",data:{AnalysisObj:e}})}))}),[t]);var A=Object(d.useMemo)((function(){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=P.flag&&!P.stacked?C/2:C,a="RTL"===D?[E-T.right,T.left]:[T.left,E-T.right],r=V.e(j,a);if(null==t&&void 0!==k)e=V.e([0,k[1]],[n-T.bottom,T.top]);else if(null==w||w.id!==t){var i=x.findIndex((function(e){return e.id===t}));e=V.e([0,S[i][1]],[n-T.bottom,T.top])}else{var o=x.findIndex((function(e){return e.id===w.id}));e=V.e([0,S[o][1]],[n-T.bottom,T.top])}return{x:r,y:e}}}),[P.flag,P.stacked,C,D,E,T.right,T.left,T.bottom,T.top,j,k,w,x,S]),I=Object(d.useCallback)((function(e){m(!1),O({type:"SET_WIDTH",width:e})}),[]);return Object(d.useEffect)((function(){O({type:gt,height:i.current.getBoundingClientRect().height})}),[i]),Object(H.c)(W.a,Object.assign({template:J.a},xi),Object(H.c)(_t,{value:O},Object(H.c)(rt,{value:Object(h.a)({height:n,width:a},y,{getScale:A,isResizeEventStart:b})},Object(H.c)(nt.a,null,Object(H.c)("div",{ref:r,css:Object(H.b)(Oi())},Object(H.c)(di,{isFullscreen:s,onMaximize:u}),Object(H.c)("div",{style:{flex:1},ref:i},Object(H.c)(Jt,null,Object(H.c)(yn,null),Object(H.c)(B.a,{style:ji.container,paneStyle:ji.pane,resizerStyle:ji.resizer,pane1Style:ji.pane1,split:"vertical",defaultSize:"80%",minSize:"80%",onDragFinished:I,onDragStarted:function(){m(!0)}},Object(H.c)(Ei,{tools:!b}),Object(H.c)(Ua,null)))))))))};function Ei(){var e=it(),t=e.selectedTool,n=e.height,a=e.isLoading,r=e.data,i=zt(),o=Object(d.useCallback)((function(e){switch(t){case st.integral.id:i(Object(h.a)({type:ht},e));break;case st.peakPicking.id:i(Object(h.a)({type:mt},e));break;default:return void i(Object(h.a)({type:yt},e))}}),[i,t]),l=Object(d.useCallback)((function(){i({type:Ot})}),[i]),c=Object(d.useCallback)((function(e){switch(t){case st.integral.id:i({type:xt,zoomFactor:e});break;default:return void i({type:vt,zoomFactor:e})}}),[i,t]),u=Object(d.useCallback)((function(e){t===st.peakPicking.id?i({type:bt,mouseCoordinates:e}):t===st.phaseCorrection.id&&i({type:jt,position:e.x})}),[i,t]),s=Object(G.a)((function(){return Object(H.c)(d.Fragment,null,Object(H.c)(yi,{isLoading:a}),r&&r.length>0&&Object(H.c)(Sr,{onBrush:o,onDoubleClick:l,onClick:u,onZoom:c,style:{width:"100%",height:"".concat(n,"px"),margin:"auto",position:"relative",overflow:"hidden"}},Object(H.c)(Er,{style:{width:"100%",height:"".concat(n,"px")}},Object(H.c)(jr,null),Object(H.c)(Ar,null),Object(H.c)(Fr,null),Object(H.c)(Mr,null),Object(H.c)(Br,null),Object(H.c)(pi,null))))}),[n]),f=Object(L.a)(s,2),p=f[0],b=f[1],m=b.width,g=b.height,v=Object(d.useState)(),y=Object(L.a)(v,2),O=y[0],x=y[1];return Object(X.a)((function(){return x({width:m,height:g})}),400,[m,g]),Object(d.useEffect)((function(){O&&i(Object(h.a)({type:gt},O))}),[i,O]),p}ki.defaultProps={height:"600",width:"800"};var Ci,wi=ki;function Si(e){if(!e.ok)throw new Error("HTTP ".concat(e.status," - ").concat(e.statusText));return e}function Di(e){var t=e.file,n=e.title,a=Object(M.a)(e,["file","title"]),r=Object(d.useState)(),i=Object(L.a)(r,2),o=i[0],l=i[1];return Object(d.useEffect)((function(){t?function(e){var t,n;return _.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_.a.awrap(fetch(e));case 2:return Si(t=a.sent),a.next=6,_.a.awrap(t.json());case 6:return n=a.sent,a.abrupt("return",n);case 8:case"end":return a.stop()}}))}(t).then((function(e){l(e)})):l({})}),[t]),f.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",marginLeft:30}},f.a.createElement("h5",{className:"title"},"NMR Displayer"),f.a.createElement("p",{className:"category"},n),f.a.createElement(wi,Object.assign({data:o},a)))}var Ti=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(O.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={backgroundColor:"blue",routesList:[]},n.mainPanel=f.a.createRef(),n.handleColorClick=function(e){n.setState({backgroundColor:e})},n}return Object(j.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){navigator.platform.indexOf("Win")>-1&&(Ci=new k.a(this.mainPanel.current),document.body.classList.toggle("perfect-scrollbar-on")),this.setState((function(e){return Object(h.a)({},e,{routesList:S(F)})}))}},{key:"componentDidUpdate",value:function(e){"PUSH"===e.history.action&&(this.mainPanel.current.scrollTop=0,document.scrollingElement.scrollTop=0)}},{key:"componentWillUnmount",value:function(){navigator.platform.indexOf("Win")>-1&&(Ci.destroy(),document.body.classList.toggle("perfect-scrollbar-on"))}},{key:"render",value:function(){var e=this;return f.a.createElement("div",{className:"wrapper"},f.a.createElement(R,Object.assign({},this.props,{routes:F,backgroundColor:this.state.backgroundColor})),f.a.createElement("div",{className:"main-panel",ref:this.mainPanel},f.a.createElement(g.d,null,this.state.routesList.map((function(e){return f.a.createElement(g.b,{path:"/admin/".concat(T(e.file)),render:function(){return f.a.createElement(Di,e)},key:T(e.file)})})),this.state.routesList.length>0&&f.a.createElement(g.b,{path:"/",render:function(){return f.a.createElement(Di,e.state.routesList[0])},key:T(this.state.routesList[0].file)}))))}}]),t}(f.a.Component),Pi=Object(d.lazy)((function(){return n.e(3).then(n.bind(null,682))}));n(669),n(670),n(671),n(672);b.a.render(f.a.createElement(m.a,null,f.a.createElement(g.d,null,f.a.createElement(g.b,{path:"/admin",render:function(e){return f.a.createElement(Ti,e)}}),f.a.createElement(g.b,{path:"/test",component:function(){return f.a.createElement(d.Suspense,{fallback:null},f.a.createElement(g.d,null,f.a.createElement(g.b,{path:"/test/highlight",component:Pi}),f.a.createElement(g.b,{render:function(){return f.a.createElement("div",null,"Page not found")}})))}}),f.a.createElement(g.a,{to:"/admin/dashboard"}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[332,1,2]]]);
//# sourceMappingURL=main.19c43adf.chunk.js.map