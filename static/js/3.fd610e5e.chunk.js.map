{"version":3,"sources":["demo/views/Exercise.jsx"],"names":["answers","JSON","parse","localStorage","getItem","checkStatus","response","ok","Error","status","statusText","styles","mainContainer","display","flexDirection","height","nmrContainer","bottomContainer","bottomRightContainer","width","MF","alignItems","justifyContent","backgroundColor","border","resultContainer","result","fontSize","fontWeight","StructureEditor","flex","Exercise","props","useState","data","setData","resultFlag","setResultFlag","file","title","baseURL","checkAnswer","useCallback","answer","idCodeResponse","Molecule","fromMolfile","getIDCode","idCode","setItem","stringify","useEffect","a","async","fetch","json","loadData","then","d","_d","replace","molecules","molfile","molecule","currentAnswer","fromIDCode","toMolfile","mf","getMolecularFormula","formula","style","marginLeft","className","preferences","panels","hidePeaksPanel","hideInformationPanel","hideRangesPanel","hideStructuresPanel","hideFiltersPanel","svgMenu","fragment","onChange","initialMolfile","color"],"mappings":"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","file":"static/js/3.fd610e5e.chunk.js","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { MF } from 'react-mf';\nimport { StructureEditor } from 'react-ocl/full';\nimport { Molecule } from 'openchemlib';\n\nimport NMRDisplayer from '../../component/NMRDisplayer.jsx';\n\nlet answers = JSON.parse(localStorage.getItem('nmrium-exercises') || '{}');\n\nasync function loadData(file) {\n  const response = await fetch(file);\n  checkStatus(response);\n  const data = await response.json();\n  return data;\n}\n\nfunction checkStatus(response) {\n  if (!response.ok) {\n    throw new Error(`HTTP ${response.status} - ${response.statusText}`);\n  }\n  return response;\n}\n\nconst styles = {\n  mainContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  },\n  nmrContainer: {\n    height: '60%',\n  },\n\n  bottomContainer: {\n    display: 'flex',\n  },\n  bottomRightContainer: {\n    width: '50%',\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n  },\n  MF: {\n    height: '20%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'white',\n    border: '1px dashed gray',\n  },\n  resultContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '80%',\n  },\n\n  result: {\n    width: '50%',\n    height: '50%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '16px',\n    fontWeight: 'bold',\n  },\n\n  StructureEditor: {\n    backgroundColor: 'white',\n    flex: '1',\n  },\n};\n\nexport default function Exercise(props) {\n  const [data, setData] = useState();\n  const [resultFlag, setResultFlag] = useState(null);\n  const { file, title, baseURL } = props;\n\n  const checkAnswer = useCallback(\n    (response) => {\n      if (data.answer) {\n        const MolResponse = Molecule.fromMolfile(response);\n        const idCodeResponse = MolResponse.getIDCode();\n        answers[data.answer.idCode] = idCodeResponse;\n        localStorage.setItem('nmrium-exercises', JSON.stringify(answers));\n        // console.log({ idCodeResponse, idCodeResult });\n        if (data.answer.idCode === idCodeResponse) {\n          // correct answer\n          setResultFlag(true);\n        } else {\n          setResultFlag(false);\n          // wrong answer\n        }\n      }\n    },\n    [data],\n  );\n\n  useEffect(() => {\n    if (file) {\n      loadData(file).then((d) => {\n        const _d = JSON.parse(JSON.stringify(d).replace(/\\.\\/+?/g, baseURL));\n        if (_d && _d.molecules && _d.molecules[0] && _d.molecules[0].molfile) {\n          const molecule = Molecule.fromMolfile(_d.molecules[0].molfile);\n          const idCode = molecule.getIDCode();\n          let currentAnswer = answers[idCode];\n\n          if (currentAnswer) {\n            currentAnswer = Molecule.fromIDCode(currentAnswer).toMolfile();\n          }\n          _d.answer = {\n            idCode,\n            currentAnswer,\n            mf: molecule.getMolecularFormula().formula,\n          };\n          setData(_d);\n        }\n      });\n    } else {\n      setData({});\n    }\n  }, [baseURL, file, props]);\n\n  return (\n    <div\n      style={{\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        marginLeft: 30,\n      }}\n    >\n      <h5 className=\"title\">\n        Display and process 1D NMR spectra from a jcamp-dx file\n      </h5>\n      <p className=\"category\">{title}</p>\n      <div style={styles.mainContainer}>\n        <div style={styles.nmrContainer}>\n          <NMRDisplayer\n            data={data}\n            preferences={{\n              panels: {\n                hidePeaksPanel: true,\n                hideInformationPanel: true,\n                hideRangesPanel: true,\n                hideStructuresPanel: true,\n                hideFiltersPanel: true,\n              },\n            }}\n          />\n        </div>\n        <div style={styles.bottomContainer}>\n          <div style={styles.StructureEditor}>\n            <StructureEditor\n              svgMenu={true}\n              fragment={false}\n              onChange={checkAnswer}\n              initialMolfile={data && data.answer && data.answer.currentAnswer}\n            />\n          </div>\n          <div style={styles.bottomRightContainer}>\n            <div style={styles.MF}>\n              <MF\n                style={{ color: 'navy', fontSize: 30 }}\n                mf={data && data.answer && data.answer.mf}\n              />\n            </div>\n            <div\n              style={{\n                ...styles.resultContainer,\n              }}\n            >\n              <div\n                style={{\n                  ...styles.result,\n                  backgroundColor:\n                    resultFlag == null ? 'white' : resultFlag ? 'green' : 'red',\n                  color: resultFlag == null ? 'black' : 'white',\n                }}\n              >\n                {resultFlag == null ? (\n                  <p>Result</p>\n                ) : resultFlag === true ? (\n                  <p>Right Molecule</p>\n                ) : (\n                  <p>Wrong Molecule !!</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}