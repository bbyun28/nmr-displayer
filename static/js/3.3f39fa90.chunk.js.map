{"version":3,"sources":["demo/views/Exercise.jsx"],"names":["checkStatus","response","ok","Error","status","statusText","styles","mainContainer","display","flexDirection","height","nmrContainer","bottomContainer","bottomRightContainer","width","MF","alignItems","justifyContent","backgroundColor","border","resultContainer","result","fontSize","fontWeight","StructureEditor","flex","Exercise","props","useState","data","setData","resultFlag","setResultFlag","file","title","baseURL","checkAnswer","useCallback","molecules","molfile","MolResult","Molecule","fromMolfile","MolResponse","idCodeResult","getIDCode","idCodeResponse","MFResult","useMemo","getMolecularFormula","formula","useEffect","a","async","fetch","json","loadData","then","d","_d","JSON","parse","stringify","replace","style","marginLeft","className","preferences","panels","hidePeaksPanel","hideInformationPanel","hideRangesPanel","hideStructuresPanel","hideFiltersPanel","svgMenu","fragment","onChange","color","mf"],"mappings":"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","file":"static/js/3.3f39fa90.chunk.js","sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { MF } from 'react-mf';\nimport { StructureEditor } from 'react-ocl/full';\nimport { Molecule } from 'openchemlib';\n\nimport NMRDisplayer from '../../component/NMRDisplayer.jsx';\n\nasync function loadData(file) {\n  const response = await fetch(file);\n  checkStatus(response);\n  const data = await response.json();\n  return data;\n}\n\nfunction checkStatus(response) {\n  if (!response.ok) {\n    throw new Error(`HTTP ${response.status} - ${response.statusText}`);\n  }\n  return response;\n}\n\nconst styles = {\n  mainContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  },\n  nmrContainer: {\n    height: '60%',\n  },\n\n  bottomContainer: {\n    display: 'flex',\n  },\n  bottomRightContainer: {\n    width: '50%',\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n  },\n  MF: {\n    height: '20%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'white',\n    border: '1px dashed gray',\n  },\n  resultContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '80%',\n  },\n\n  result: {\n    width: '50%',\n    height: '50%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '16px',\n    fontWeight: 'bold',\n  },\n\n  StructureEditor: {\n    backgroundColor: 'white',\n    flex: '1',\n  },\n};\n\nexport default function Exercise(props) {\n  const [data, setData] = useState();\n  const [resultFlag, setResultFlag] = useState(null);\n  const { file, title, baseURL } = props;\n\n  const checkAnswer = useCallback(\n    (response) => {\n      if (\n        data &&\n        data.molecules &&\n        data.molecules[0] &&\n        data.molecules[0].molfile\n      ) {\n        const MolResult = Molecule.fromMolfile(data.molecules[0].molfile);\n        const MolResponse = Molecule.fromMolfile(response);\n        const idCodeResult = MolResult.getIDCode();\n        const idCodeResponse = MolResponse.getIDCode();\n        // console.log({ idCodeResponse, idCodeResult });\n        if (idCodeResult === idCodeResponse) {\n          // correct answer\n          setResultFlag(true);\n        } else {\n          setResultFlag(false);\n          // wrong answer\n        }\n      }\n    },\n    [data],\n  );\n\n  const MFResult = useMemo(() => {\n    let mf = '';\n    if (\n      data &&\n      data.molecules &&\n      data.molecules[0] &&\n      data.molecules[0].molfile\n    ) {\n      const molecule = Molecule.fromMolfile(data.molecules[0].molfile);\n      mf = molecule.getMolecularFormula().formula;\n      return mf;\n    }\n\n    return '';\n    // need to display the MF somehow\n  }, [data]);\n\n  useEffect(() => {\n    if (file) {\n      loadData(file).then((d) => {\n        const _d = JSON.parse(JSON.stringify(d).replace(/\\.\\/+?/g, baseURL));\n        setData(_d);\n      });\n    } else {\n      setData({});\n    }\n  }, [baseURL, file, props]);\n\n  return (\n    <div\n      style={{\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        marginLeft: 30,\n      }}\n    >\n      <h5 className=\"title\">\n        Display and process 1D NMR spectra from a jcamp-dx file\n      </h5>\n      <p className=\"category\">{title}</p>\n      <div style={styles.mainContainer}>\n        <div style={styles.nmrContainer}>\n          <NMRDisplayer\n            data={data}\n            preferences={{\n              panels: {\n                hidePeaksPanel: true,\n                hideInformationPanel: true,\n                hideRangesPanel: true,\n                hideStructuresPanel: true,\n                hideFiltersPanel: true,\n              },\n            }}\n          />\n        </div>\n        <div style={styles.bottomContainer}>\n          <div style={styles.StructureEditor}>\n            <StructureEditor\n              svgMenu={true}\n              fragment={false}\n              onChange={checkAnswer}\n            />\n          </div>\n          <div style={styles.bottomRightContainer}>\n            <div style={styles.MF}>\n              <MF style={{ color: 'navy', fontSize: 30 }} mf={MFResult} />\n            </div>\n            <div\n              style={{\n                ...styles.resultContainer,\n              }}\n            >\n              <div\n                style={{\n                  ...styles.result,\n                  backgroundColor:\n                    resultFlag == null ? 'white' : resultFlag ? 'green' : 'red',\n                  color: resultFlag == null ? 'black' : 'white',\n                }}\n              >\n                {resultFlag == null ? (\n                  <p>Result</p>\n                ) : resultFlag === true ? (\n                  <p>Right Molecule</p>\n                ) : (\n                  <p>Wrong Molecule !!</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}