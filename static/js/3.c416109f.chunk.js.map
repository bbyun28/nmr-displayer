{"version":3,"sources":["demo/views/Exercise.jsx"],"names":["checkStatus","response","ok","Error","status","statusText","styles","mainContainer","display","flexDirection","height","nmrContainer","bottomContainer","bottomRightContainer","width","MF","alignItems","justifyContent","backgroundColor","border","resultContainer","result","fontSize","fontWeight","StructureEditor","flex","Exercise","props","useState","data","setData","resultFlag","setResultFlag","file","title","getMF","molecules","molfile","Molecule","fromMolfile","getMolecularFormula","formula","useEffect","a","async","fetch","json","loadData","then","d","style","marginLeft","className","preferences","panels","hidePeaksPanel","hideInformationPanel","hideRangesPanel","hideStructuresPanel","hideFiltersPanel","svgMenu","fragment","onChange","MolResult","MolResponse","idCodeResult","getIDCode","idCodeResponse","color","mf"],"mappings":"6PAcA,SAASA,EAAYC,GACnB,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAJ,eAAkBF,EAASG,OAA3B,cAAuCH,EAASI,aAExD,OAAOJ,EAGT,IAAMK,EAAS,CACbC,cAAe,CACbC,QAAS,OACTC,cAAe,SACfC,OAAQ,QAEVC,aAAc,CACZD,OAAQ,OAGVE,gBAAiB,CACfJ,QAAS,QAEXK,qBAAsB,CACpBC,MAAO,MACPN,QAAS,OACTE,OAAQ,OACRD,cAAe,UAEjBM,GAAI,CACFL,OAAQ,MACRF,QAAS,OACTQ,WAAY,SACZC,eAAgB,SAChBC,gBAAiB,QACjBC,OAAQ,mBAEVC,gBAAiB,CACfZ,QAAS,OACTQ,WAAY,SACZC,eAAgB,SAChBP,OAAQ,OAGVW,OAAQ,CACNP,MAAO,MACPJ,OAAQ,MACRF,QAAS,OACTQ,WAAY,SACZC,eAAgB,SAChBK,SAAU,OACVC,WAAY,QAGdC,gBAAiB,CACfN,gBAAiB,QACjBO,KAAM,MAIK,SAASC,EAASC,GAAQ,IAAD,EACdC,qBADc,mBAC/BC,EAD+B,KACzBC,EADyB,OAEFF,mBAAS,MAFP,mBAE/BG,EAF+B,KAEnBC,EAFmB,KAG9BC,EAAgBN,EAAhBM,KAAMC,EAAUP,EAAVO,MAyBd,SAASC,IAEP,OACEN,GACAA,EAAKO,WACLP,EAAKO,UAAU,IACfP,EAAKO,UAAU,GAAGC,QAEDC,WAASC,YAAYV,EAAKO,UAAU,GAAGC,SAC1CG,sBAAsBC,QAI/B,GAcT,OAVAC,qBAAU,WACJT,EA9GR,SAAwBA,GAAxB,iBAAAU,EAAAC,OAAA,kEAAAD,EAAA,MACyBE,MAAMZ,IAD/B,cAEEjC,EADMC,EADR,mBAAA0C,EAAA,MAGqB1C,EAAS6C,QAH9B,cAGQjB,EAHR,yBAISA,GAJT,qCA+GMkB,CAASd,GAAMe,MAAK,SAACC,GACnBnB,EAAQmB,MAGVnB,EAAQ,MAET,CAACG,EAAMN,IAGR,yBACEuB,MAAO,CACLxC,OAAQ,OACRF,QAAS,OACTC,cAAe,SACf0C,WAAY,KAGd,wBAAIC,UAAU,SAAd,2DAGA,uBAAGA,UAAU,YAAYlB,GACzB,yBAAKgB,MAAO5C,EAAOC,eACjB,yBAAK2C,MAAO5C,EAAOK,cACjB,kBAAC,IAAD,CACEkB,KAAMA,EACNwB,YAAa,CACXC,OAAQ,CACNC,gBAAgB,EAChBC,sBAAsB,EACtBC,iBAAiB,EACjBC,qBAAqB,EACrBC,kBAAkB,OAK1B,yBAAKT,MAAO5C,EAAOM,iBACjB,yBAAKsC,MAAO5C,EAAOkB,iBACjB,kBAAC,IAAD,CACEoC,SAAS,EACTC,UAAU,EACVC,SAnFZ,SAAqB7D,GACnB,GACE4B,GACAA,EAAKO,WACLP,EAAKO,UAAU,IACfP,EAAKO,UAAU,GAAGC,QAClB,CACA,IAAM0B,EAAYzB,WAASC,YAAYV,EAAKO,UAAU,GAAGC,SACnD2B,EAAc1B,WAASC,YAAYtC,GACnCgE,EAAeF,EAAUG,YACzBC,EAAiBH,EAAYE,YAIjClC,EAFEiC,IAAiBE,GAQvBhC,QAkEM,yBAAKe,MAAO5C,EAAOO,sBACjB,yBAAKqC,MAAO5C,EAAOS,IACjB,kBAAC,IAAD,CAAImC,MAAO,CAAEkB,MAAO,OAAQ9C,SAAU,IAAM+C,GAAIlC,OAElD,yBACEe,MAAK,eACA5C,EAAOc,kBAGZ,yBACE8B,MAAK,eACA5C,EAAOe,OADP,CAEHH,gBACgB,MAAda,EAAqB,QAAUA,EAAa,QAAU,MACxDqC,MAAqB,MAAdrC,EAAqB,QAAU,WAGzB,MAAdA,EACC,sCACiB,IAAfA,EACF,6CAEA","file":"static/js/3.c416109f.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MF } from 'react-mf';\n\nimport NMRDisplayer from '../../component/NMRDisplayer.jsx';\nimport { StructureEditor } from 'react-ocl/full';\nimport { Molecule } from 'openchemlib';\n\nasync function loadData(file) {\n  const response = await fetch(file);\n  checkStatus(response);\n  const data = await response.json();\n  return data;\n}\n\nfunction checkStatus(response) {\n  if (!response.ok) {\n    throw new Error(`HTTP ${response.status} - ${response.statusText}`);\n  }\n  return response;\n}\n\nconst styles = {\n  mainContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  },\n  nmrContainer: {\n    height: '60%',\n  },\n\n  bottomContainer: {\n    display: 'flex',\n  },\n  bottomRightContainer: {\n    width: '50%',\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n  },\n  MF: {\n    height: '20%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'white',\n    border: '1px dashed gray',\n  },\n  resultContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '80%',\n  },\n\n  result: {\n    width: '50%',\n    height: '50%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '16px',\n    fontWeight: 'bold',\n  },\n\n  StructureEditor: {\n    backgroundColor: 'white',\n    flex: '1',\n  },\n};\n\nexport default function Exercise(props) {\n  const [data, setData] = useState();\n  const [resultFlag, setResultFlag] = useState(null);\n  const { file, title } = props;\n\n  function checkAnswer(response) {\n    if (\n      data &&\n      data.molecules &&\n      data.molecules[0] &&\n      data.molecules[0].molfile\n    ) {\n      const MolResult = Molecule.fromMolfile(data.molecules[0].molfile);\n      const MolResponse = Molecule.fromMolfile(response);\n      const idCodeResult = MolResult.getIDCode();\n      const idCodeResponse = MolResponse.getIDCode();\n      // console.log({ idCodeResponse, idCodeResult });\n      if (idCodeResult === idCodeResponse) {\n        // correct answer\n        setResultFlag(true);\n      } else {\n        setResultFlag(false);\n        // wrong answer\n      }\n    }\n    getMF();\n  }\n\n  function getMF() {\n    let mf = '';\n    if (\n      data &&\n      data.molecules &&\n      data.molecules[0] &&\n      data.molecules[0].molfile\n    ) {\n      const molecule = Molecule.fromMolfile(data.molecules[0].molfile);\n      mf = molecule.getMolecularFormula().formula;\n      return mf;\n    }\n\n    return '';\n    // need to display the MF somehow\n  }\n\n  useEffect(() => {\n    if (file) {\n      loadData(file).then((d) => {\n        setData(d);\n      });\n    } else {\n      setData({});\n    }\n  }, [file, props]);\n\n  return (\n    <div\n      style={{\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        marginLeft: 30,\n      }}\n    >\n      <h5 className=\"title\">\n        Display and process 1D NMR spectra from a jcamp-dx file\n      </h5>\n      <p className=\"category\">{title}</p>\n      <div style={styles.mainContainer}>\n        <div style={styles.nmrContainer}>\n          <NMRDisplayer\n            data={data}\n            preferences={{\n              panels: {\n                hidePeaksPanel: true,\n                hideInformationPanel: true,\n                hideRangesPanel: true,\n                hideStructuresPanel: true,\n                hideFiltersPanel: true,\n              },\n            }}\n          />\n        </div>\n        <div style={styles.bottomContainer}>\n          <div style={styles.StructureEditor}>\n            <StructureEditor\n              svgMenu={true}\n              fragment={false}\n              onChange={checkAnswer}\n            />\n          </div>\n          <div style={styles.bottomRightContainer}>\n            <div style={styles.MF}>\n              <MF style={{ color: 'navy', fontSize: 30 }} mf={getMF()} />\n            </div>\n            <div\n              style={{\n                ...styles.resultContainer,\n              }}\n            >\n              <div\n                style={{\n                  ...styles.result,\n                  backgroundColor:\n                    resultFlag == null ? 'white' : resultFlag ? 'green' : 'red',\n                  color: resultFlag == null ? 'black' : 'white',\n                }}\n              >\n                {resultFlag == null ? (\n                  <p>Result</p>\n                ) : resultFlag === true ? (\n                  <p>Right Molecule</p>\n                ) : (\n                  <p>Wrong Molecule !!</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}